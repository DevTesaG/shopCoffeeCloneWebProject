var GN=Object.defineProperty,HN=Object.defineProperties;var WN=Object.getOwnPropertyDescriptors;var ku=Object.getOwnPropertySymbols,KN=Object.getPrototypeOf,PE=Object.prototype.hasOwnProperty,kE=Object.prototype.propertyIsEnumerable,QN=Reflect.get;var NE=(t,e,n)=>e in t?GN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,A=(t,e)=>{for(var n in e||={})PE.call(e,n)&&NE(t,n,e[n]);if(ku)for(var n of ku(e))kE.call(e,n)&&NE(t,n,e[n]);return t},Ne=(t,e)=>HN(t,WN(e));var Vt=(t,e)=>{var n={};for(var r in t)PE.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ku)for(var r of ku(t))e.indexOf(r)<0&&kE.call(t,r)&&(n[r]=t[r]);return n};var di=(t,e,n)=>QN(KN(t),n,e);var y=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});var OE=null;var vm=1,FE=Symbol("SIGNAL");function Ct(t){let e=OE;return OE=t,e}var VE={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function YN(t){if(!(Im(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===vm)){if(!t.producerMustRecompute(t)&&!ym(t)){t.dirty=!1,t.lastCleanEpoch=vm;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=vm}}function LE(t){return t&&(t.nextProducerIndex=0),Ct(t)}function jE(t,e){if(Ct(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Im(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)_m(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ym(t){Ou(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(YN(n),r!==n.version))return!0}return!1}function UE(t){if(Ou(t),Im(t))for(let e=0;e<t.producerNode.length;e++)_m(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function _m(t,e){if(JN(t),Ou(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)_m(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Ou(i),i.producerIndexOfThis[r]=e}}function Im(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ou(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function JN(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function ZN(){throw new Error}var XN=ZN;function $E(t){XN=t}function ne(t){return typeof t=="function"}function ms(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Fu=ms(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function co(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var vt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ne(r))try{r()}catch(o){e=o instanceof Fu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{BE(o)}catch(s){e=e??[],s instanceof Fu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Fu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)BE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&co(n,e)}remove(e){let{_finalizers:n}=this;n&&co(n,e),e instanceof t&&e._removeParent(this)}};vt.EMPTY=(()=>{let t=new vt;return t.closed=!0,t})();var wm=vt.EMPTY;function Vu(t){return t instanceof vt||t&&"closed"in t&&ne(t.remove)&&ne(t.add)&&ne(t.unsubscribe)}function BE(t){ne(t)?t():t.unsubscribe()}var Hn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var gs={setTimeout(t,e,...n){let{delegate:r}=gs;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=gs;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Lu(t){gs.setTimeout(()=>{let{onUnhandledError:e}=Hn;if(e)e(t);else throw t})}function $r(){}var qE=Em("C",void 0,void 0);function zE(t){return Em("E",void 0,t)}function GE(t){return Em("N",t,void 0)}function Em(t,e,n){return{kind:t,value:e,error:n}}var lo=null;function vs(t){if(Hn.useDeprecatedSynchronousErrorHandling){let e=!lo;if(e&&(lo={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=lo;if(lo=null,n)throw r}}else t()}function HE(t){Hn.useDeprecatedSynchronousErrorHandling&&lo&&(lo.errorThrown=!0,lo.error=t)}var uo=class extends vt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Vu(e)&&e.add(this)):this.destination=nP}static create(e,n,r){return new Br(e,n,r)}next(e){this.isStopped?Cm(GE(e),this):this._next(e)}error(e){this.isStopped?Cm(zE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Cm(qE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},eP=Function.prototype.bind;function bm(t,e){return eP.call(t,e)}var Tm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){ju(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){ju(r)}else ju(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ju(n)}}},Br=class extends uo{constructor(e,n,r){super();let i;if(ne(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Hn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&bm(e.next,o),error:e.error&&bm(e.error,o),complete:e.complete&&bm(e.complete,o)}):i=e}this.destination=new Tm(i)}};function ju(t){Hn.useDeprecatedSynchronousErrorHandling?HE(t):Lu(t)}function tP(t){throw t}function Cm(t,e){let{onStoppedNotification:n}=Hn;n&&gs.setTimeout(()=>n(t,e))}var nP={closed:!0,next:$r,error:tP,complete:$r};var ys=typeof Symbol=="function"&&Symbol.observable||"@@observable";function rn(t){return t}function Uu(...t){return Dm(t)}function Dm(t){return t.length===0?rn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var de=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=iP(n)?n:new Br(n,r,i);return vs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=WE(r),new r((i,o)=>{let s=new Br({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ys](){return this}pipe(...n){return Dm(n)(this)}toPromise(n){return n=WE(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function WE(t){var e;return(e=t??Hn.Promise)!==null&&e!==void 0?e:Promise}function rP(t){return t&&ne(t.next)&&ne(t.error)&&ne(t.complete)}function iP(t){return t&&t instanceof uo||rP(t)&&Vu(t)}function Sm(t){return ne(t?.lift)}function re(t){return e=>{if(Sm(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ge(t,e,n,r,i){return new Am(t,e,n,r,i)}var Am=class extends uo{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function _s(){return re((t,e)=>{let n=null;t._refCount++;let r=ge(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var hi=class extends de{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Sm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new vt;let n=this.getSubject();e.add(this.source.subscribe(ge(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=vt.EMPTY)}return e}refCount(){return _s()(this)}};var KE=ms(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pe=(()=>{class t extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new $u(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new KE}next(n){vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?wm:(this.currentObservers=null,o.push(n),new vt(()=>{this.currentObservers=null,co(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new de;return n.source=this,n}}return t.create=(e,n)=>new $u(e,n),t})(),$u=class extends Pe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:wm}};var le=class extends Pe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var lc={now(){return(lc.delegate||Date).now()},delegate:void 0};var Bu=class extends Pe{constructor(e=1/0,n=1/0,r=lc){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var qu=class extends vt{constructor(e,n){super()}schedule(e,n=0){return this}};var uc={setInterval(t,e,...n){let{delegate:r}=uc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=uc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Is=class extends qu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return uc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&uc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,co(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ws=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ws.now=lc.now;var Es=class extends ws{constructor(e,n=ws.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var fi=new Es(Is),xm=fi;var zu=class extends Is{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Gu=class extends Es{};var Rm=new Gu(zu);var mn=new de(t=>t.complete());function Hu(t){return t&&ne(t.schedule)}function Mm(t){return t[t.length-1]}function Wu(t){return ne(Mm(t))?t.pop():void 0}function Nn(t){return Hu(Mm(t))?t.pop():void 0}function Ku(t,e){return typeof Mm(t)=="number"?t.pop():e}function Qu(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function YE(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(h){s(h)}}function c(u){try{l(r.throw(u))}catch(h){s(h)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function QE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ho(t){return this instanceof ho?(this.v=t,this):new ho(t)}function JE(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(g){r[g]&&(i[g]=function(v){return new Promise(function(w,R){o.push([g,v,w,R])>1||a(g,v)})})}function a(g,v){try{c(r[g](v))}catch(w){h(o[0][3],w)}}function c(g){g.value instanceof ho?Promise.resolve(g.value.v).then(l,u):h(o[0][2],g)}function l(g){a("next",g)}function u(g){a("throw",g)}function h(g,v){g(v),o.shift(),o.length&&a(o[0][0],o[0][1])}}function ZE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof QE=="function"?QE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var bs=t=>t&&typeof t.length=="number"&&typeof t!="function";function Yu(t){return ne(t?.then)}function Ju(t){return ne(t[ys])}function Zu(t){return Symbol.asyncIterator&&ne(t?.[Symbol.asyncIterator])}function Xu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function oP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ed=oP();function td(t){return ne(t?.[ed])}function nd(t){return JE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ho(n.read());if(i)return yield ho(void 0);yield yield ho(r)}}finally{n.releaseLock()}})}function rd(t){return ne(t?.getReader)}function Oe(t){if(t instanceof de)return t;if(t!=null){if(Ju(t))return sP(t);if(bs(t))return aP(t);if(Yu(t))return cP(t);if(Zu(t))return XE(t);if(td(t))return lP(t);if(rd(t))return uP(t)}throw Xu(t)}function sP(t){return new de(e=>{let n=t[ys]();if(ne(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function aP(t){return new de(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function cP(t){return new de(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Lu)})}function lP(t){return new de(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function XE(t){return new de(e=>{dP(t,e).catch(n=>e.error(n))})}function uP(t){return XE(nd(t))}function dP(t,e){var n,r,i,o;return YE(this,void 0,void 0,function*(){try{for(n=ZE(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function gn(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function pi(t,e=0){return re((n,r)=>{n.subscribe(ge(r,i=>gn(r,t,()=>r.next(i),e),()=>gn(r,t,()=>r.complete(),e),i=>gn(r,t,()=>r.error(i),e)))})}function mi(t,e=0){return re((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function eb(t,e){return Oe(t).pipe(mi(e),pi(e))}function tb(t,e){return Oe(t).pipe(mi(e),pi(e))}function nb(t,e){return new de(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function rb(t,e){return new de(n=>{let r;return gn(n,e,()=>{r=t[ed](),gn(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>ne(r?.return)&&r.return()})}function id(t,e){if(!t)throw new Error("Iterable cannot be null");return new de(n=>{gn(n,e,()=>{let r=t[Symbol.asyncIterator]();gn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function ib(t,e){return id(nd(t),e)}function ob(t,e){if(t!=null){if(Ju(t))return eb(t,e);if(bs(t))return nb(t,e);if(Yu(t))return tb(t,e);if(Zu(t))return id(t,e);if(td(t))return rb(t,e);if(rd(t))return ib(t,e)}throw Xu(t)}function te(t,e){return e?ob(t,e):Oe(t)}function T(...t){let e=Nn(t);return te(t,e)}function zt(t,e){let n=ne(t)?t:()=>t,r=i=>i.error(n());return new de(e?i=>e.schedule(r,0,i):r)}function Nm(t){return!!t&&(t instanceof de||ne(t.lift)&&ne(t.subscribe))}var qr=ms(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function sb(t){return t instanceof Date&&!isNaN(t)}function P(t,e){return re((n,r)=>{let i=0;n.subscribe(ge(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:hP}=Array;function fP(t,e){return hP(e)?t(...e):t(e)}function Cs(t){return P(e=>fP(t,e))}var{isArray:pP}=Array,{getPrototypeOf:mP,prototype:gP,keys:vP}=Object;function od(t){if(t.length===1){let e=t[0];if(pP(e))return{args:e,keys:null};if(yP(e)){let n=vP(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function yP(t){return t&&typeof t=="object"&&mP(t)===gP}function sd(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function dc(...t){let e=Nn(t),n=Wu(t),{args:r,keys:i}=od(t);if(r.length===0)return te([],e);let o=new de(_P(r,e,i?s=>sd(i,s):rn));return n?o.pipe(Cs(n)):o}function _P(t,e,n=rn){return r=>{ab(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)ab(e,()=>{let l=te(t[c],e),u=!1;l.subscribe(ge(r,h=>{o[c]=h,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function ab(t,e,n){t?gn(n,t,e):e()}function cb(t,e,n,r,i,o,s,a){let c=[],l=0,u=0,h=!1,g=()=>{h&&!c.length&&!l&&e.complete()},v=R=>l<r?w(R):c.push(R),w=R=>{o&&e.next(R),l++;let C=!1;Oe(n(R,u++)).subscribe(ge(e,M=>{i?.(M),o?v(M):e.next(M)},()=>{C=!0},void 0,()=>{if(C)try{for(l--;c.length&&l<r;){let M=c.shift();s?gn(e,s,()=>w(M)):w(M)}g()}catch(M){e.error(M)}}))};return t.subscribe(ge(e,v,()=>{h=!0,g()})),()=>{a?.()}}function xe(t,e,n=1/0){return ne(e)?xe((r,i)=>P((o,s)=>e(r,o,i,s))(Oe(t(r,i))),n):(typeof e=="number"&&(n=e),re((r,i)=>cb(r,i,t,n)))}function _t(t=1/0){return xe(rn,t)}function lb(){return _t(1)}function rr(...t){return lb()(te(t,Nn(t)))}function fo(t){return new de(e=>{Oe(t()).subscribe(e)})}function po(...t){let e=Wu(t),{args:n,keys:r}=od(t),i=new de(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let h=!1;Oe(n[u]).subscribe(ge(o,g=>{h||(h=!0,l--),a[u]=g},()=>c--,void 0,()=>{(!c||!h)&&(l||o.next(r?sd(r,a):a),o.complete())}))}});return e?i.pipe(Cs(e)):i}var IP=["addListener","removeListener"],wP=["addEventListener","removeEventListener"],EP=["on","off"];function zr(t,e,n,r){if(ne(n)&&(r=n,n=void 0),r)return zr(t,e,n).pipe(Cs(r));let[i,o]=TP(t)?wP.map(s=>a=>t[s](e,a,n)):bP(t)?IP.map(ub(t,e)):CP(t)?EP.map(ub(t,e)):[];if(!i&&bs(t))return xe(s=>zr(s,e,n))(Oe(t));if(!i)throw new TypeError("Invalid event target");return new de(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return i(a),()=>o(a)})}function ub(t,e){return n=>r=>t[n](e,r)}function bP(t){return ne(t.addListener)&&ne(t.removeListener)}function CP(t){return ne(t.on)&&ne(t.off)}function TP(t){return ne(t.addEventListener)&&ne(t.removeEventListener)}function db(t=0,e,n=xm){let r=-1;return e!=null&&(Hu(e)?n=e:r=e),new de(i=>{let o=sb(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Ts(...t){let e=Nn(t),n=Ku(t,1/0),r=t;return r.length?r.length===1?Oe(r[0]):_t(n)(te(r,e)):mn}var mo=new de($r);var{isArray:DP}=Array;function hb(t){return t.length===1&&DP(t[0])?t[0]:t}function je(t,e){return re((n,r)=>{let i=0;n.subscribe(ge(r,o=>t.call(e,o,i++)&&r.next(o)))})}function ke(t){return re((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ge(n,void 0,void 0,s=>{o=Oe(t(s,ke(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function ad(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(ge(s,u=>{let h=l++;c=a?t(c,u,h):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function fb(t,e){return re(ad(t,e,arguments.length>=2,!1,!0))}var SP=(t,e)=>(t.push(e),t);function Pn(){return re((t,e)=>{fb(SP,[])(t).subscribe(e)})}function kn(t,e){return ne(e)?xe(t,e,1):xe(t,1)}function pb(t){return new de(e=>t.subscribe(e))}var AP={connector:()=>new Pe};function cd(t,e=AP){let{connector:n}=e;return re((r,i)=>{let o=n();Oe(t(pb(o))).subscribe(i),i.add(r.subscribe(o))})}function hc(t,e=fi){return re((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+t,u=e.now();if(u<l){i=this.schedule(void 0,l-u),r.add(i);return}a()}n.subscribe(ge(r,l=>{o=l,s=e.now(),i||(i=e.schedule(c,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function gi(t){return re((e,n)=>{let r=!1;e.subscribe(ge(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function H(t){return t<=0?()=>mn:re((e,n)=>{let r=0;e.subscribe(ge(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function fc(){return re((t,e)=>{t.subscribe(ge(e,$r))})}function pc(t){return P(()=>t)}function Pm(t,e){return e?n=>rr(e.pipe(H(1),fc()),n.pipe(Pm(t))):xe((n,r)=>Oe(t(n,r)).pipe(H(1),pc(n)))}function Ds(t,e=fi){let n=db(t,e);return Pm(()=>n)}function ld(t,e=rn){return t=t??xP,re((n,r)=>{let i,o=!0;n.subscribe(ge(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function xP(t,e){return t===e}function ud(t=RP){return re((e,n)=>{let r=!1;e.subscribe(ge(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function RP(){return new qr}function go(t){return re((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Gt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?je((i,o)=>t(i,o,r)):rn,H(1),n?gi(e):ud(()=>new qr))}function Ss(t){return t<=0?()=>mn:re((e,n)=>{let r=[];e.subscribe(ge(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function km(t,e){let n=arguments.length>=2;return r=>r.pipe(t?je((i,o)=>t(i,o,r)):rn,Ss(1),n?gi(e):ud(()=>new qr))}function mb(...t){let e=Nn(t),n=Ku(t,1/0);return t=hb(t),re((r,i)=>{_t(n)(te([r,...t],e)).subscribe(i)})}function mc(...t){return mb(...t)}function gb(t,e){let n=ne(t)?t:()=>t;return ne(e)?cd(e,{connector:n}):r=>new hi(r,n)}function dd(){return re((t,e)=>{let n,r=!1;t.subscribe(ge(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function Om(t){return t?e=>cd(t)(e):e=>gb(new Pe)(e)}function hd(t,e){return re(ad(t,e,arguments.length>=2,!0))}function vb(t={}){let{connector:e=()=>new Pe,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,l=0,u=!1,h=!1,g=()=>{a?.unsubscribe(),a=void 0},v=()=>{g(),s=c=void 0,u=h=!1},w=()=>{let R=s;v(),R?.unsubscribe()};return re((R,C)=>{l++,!h&&!u&&g();let M=c=c??e();C.add(()=>{l--,l===0&&!h&&!u&&(a=Fm(w,i))}),M.subscribe(C),!s&&l>0&&(s=new Br({next:X=>M.next(X),error:X=>{h=!0,g(),a=Fm(v,n,X),M.error(X)},complete:()=>{u=!0,g(),a=Fm(v,r),M.complete()}}),Oe(R).subscribe(s))})(o)}}function Fm(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Br({next:()=>{r.unsubscribe(),t()}});return Oe(e(...n)).subscribe(r)}function Vm(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,vb({connector:()=>new Bu(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function bn(...t){let e=Nn(t);return re((n,r)=>{(e?rr(t,n,e):rr(t,n)).subscribe(r)})}function V(t,e){return re((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ge(r,c=>{i?.unsubscribe();let l=0,u=o++;Oe(t(c,u)).subscribe(i=ge(r,h=>r.next(e?e(c,h,u,l++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function ir(t){return re((e,n)=>{Oe(t).subscribe(ge(n,()=>n.complete(),$r)),!n.closed&&e.subscribe(n)})}function S(t,e,n){let r=ne(t)||e||n?{next:t,error:e,complete:n}:t;return r?re((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ge(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):rn}var rC="https://g.co/ng/security#xss",ee=class extends Error{constructor(e,n){super(Gd(e,n)),this.code=e}};function Gd(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Ge(t){for(let e in t)if(t[e]===Ge)return e;throw Error("Could not find renamed property on target object.")}function MP(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function yn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(yn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function yb(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var NP=Ge({__forward_ref__:Ge});function an(t){return t.__forward_ref__=an,t.toString=function(){return yn(this())},t}function on(t){return iC(t)?t():t}function iC(t){return typeof t=="function"&&t.hasOwnProperty(NP)&&t.__forward_ref__===an}function oC(t){return t&&!!t.\u0275providers}var PP=Ge({\u0275cmp:Ge}),kP=Ge({\u0275dir:Ge}),OP=Ge({\u0275pipe:Ge}),FP=Ge({\u0275mod:Ge}),Td=Ge({\u0275fac:Ge}),gc=Ge({__NG_ELEMENT_ID__:Ge}),_b=Ge({__NG_ENV_ID__:Ge});function ks(t){return typeof t=="string"?t:t==null?"":String(t)}function VP(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ks(t)}function LP(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new ee(-200,`Circular dependency in DI detected for ${t}${n}`)}function r0(t,e){throw new ee(-201,!1)}function jP(t,e){t==null&&UP(e,t,null,"!=")}function UP(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function U(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function xt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Hd(t){return Ib(t,aC)||Ib(t,cC)}function sC(t){return Hd(t)!==null}function Ib(t,e){return t.hasOwnProperty(e)?t[e]:null}function $P(t){let e=t&&(t[aC]||t[cC]);return e||null}function wb(t){return t&&(t.hasOwnProperty(Eb)||t.hasOwnProperty(BP))?t[Eb]:null}var aC=Ge({\u0275prov:Ge}),Eb=Ge({\u0275inj:Ge}),cC=Ge({ngInjectableDef:Ge}),BP=Ge({ngInjectorDef:Ge}),Ce=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ce||{}),tg;function lC(){return tg}function vn(t){let e=tg;return tg=t,e}function uC(t,e,n){let r=Hd(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Ce.Optional)return null;if(e!==void 0)return e;r0(t,"Injector")}var Cn=globalThis;var K=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=U({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var qP={},vc=qP,ng="__NG_DI_FLAG__",Dd="ngTempTokenPath",zP="ngTokenPath",GP=/\n/gm,HP="\u0275",bb="__source",Ns;function WP(){return Ns}function vi(t){let e=Ns;return Ns=t,e}function KP(t,e=Ce.Default){if(Ns===void 0)throw new ee(-203,!1);return Ns===null?uC(t,void 0,e):Ns.get(t,e&Ce.Optional?null:void 0,e)}function x(t,e=Ce.Default){return(lC()||KP)(on(t),e)}function j(t,e=Ce.Default){return x(t,Wd(e))}function Wd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function rg(t){let e=[];for(let n=0;n<t.length;n++){let r=on(t[n]);if(Array.isArray(r)){if(r.length===0)throw new ee(900,!1);let i,o=Ce.Default;for(let s=0;s<r.length;s++){let a=r[s],c=QP(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(x(i,o))}else e.push(x(r))}return e}function dC(t,e){return t[ng]=e,t.prototype[ng]=e,t}function QP(t){return t[ng]}function YP(t,e,n,r){let i=t[Dd];throw e[bb]&&i.unshift(e[bb]),t.message=JP(`
`+t.message,i,n,r),t[zP]=i,t[Dd]=null,t}function JP(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==HP?t.slice(2):t;let i=yn(e);if(Array.isArray(e))i=e.map(yn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):yn(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(GP,`
  `)}`}function Rc(t){return{toString:t}.toString()}var hC=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(hC||{}),cr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(cr||{}),Os={},On=[],rt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(rt||{});function fC(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function ig(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];ZP(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function pC(t){return t===3||t===4||t===6}function ZP(t){return t.charCodeAt(0)===64}function yc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Cb(t,n,i,null,e[++r]):Cb(t,n,i,null,null))}}return t}function Cb(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var mC="ng-template";function XP(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&fC(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function gC(t){return t.type===4&&t.value!==mC}function ek(t,e,n){let r=t.type===4&&!n?mC:t.value;return e===r}function tk(t,e,n){let r=4,i=t.attrs||[],o=ik(i),s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Wn(r)&&!Wn(c))return!1;if(s&&Wn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!ek(t,c,n)||c===""&&e.length===1){if(Wn(r))return!1;s=!0}}else{let l=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!XP(t.attrs,l,n)){if(Wn(r))return!1;s=!0}continue}let u=r&8?"class":c,h=nk(u,i,gC(t),n);if(h===-1){if(Wn(r))return!1;s=!0;continue}if(l!==""){let g;h>o?g="":g=i[h+1].toLowerCase();let v=r&8?g:null;if(v&&fC(v,l,0)!==-1||r&2&&l!==g){if(Wn(r))return!1;s=!0}}}}return Wn(r)||s}function Wn(t){return(t&1)===0}function nk(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return ok(e,t)}function vC(t,e,n=!1){for(let r=0;r<e.length;r++)if(tk(t,e[r],n))return!0;return!1}function rk(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function ik(t){for(let e=0;e<t.length;e++){let n=t[e];if(pC(n))return e}return t.length}function ok(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function sk(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function Tb(t,e){return t?":not("+e.trim()+")":e}function ak(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Wn(s)&&(e+=Tb(o,i),i=""),r=s,o=o||!Wn(r);n++}return i!==""&&(e+=Tb(o,i)),e}function ck(t){return t.map(ak).join(",")}function lk(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Wn(i))break;i=o}r++}return{attrs:e,classes:n}}function se(t){return Rc(()=>{let e=EC(t),n=Ne(A({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===hC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||cr.Emulated,styles:t.styles||On,_:null,schemas:t.schemas||null,tView:null,id:""});bC(n);let r=t.dependencies;return n.directiveDefs=Sb(r,!1),n.pipeDefs=Sb(r,!0),n.id=hk(n),n})}function uk(t){return _i(t)||yC(t)}function dk(t){return t!==null}function Rt(t){return Rc(()=>({type:t.type,bootstrap:t.bootstrap||On,declarations:t.declarations||On,imports:t.imports||On,exports:t.exports||On,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Db(t,e){if(t==null)return Os;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=rt.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==rt.None?[r,a]:r,e[o]=s):n[o]=r}return n}function qe(t){return Rc(()=>{let e=EC(t);return bC(e),e})}function Kd(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function _i(t){return t[PP]||null}function yC(t){return t[kP]||null}function _C(t){return t[OP]||null}function IC(t){let e=_i(t)||yC(t)||_C(t);return e!==null?e.standalone:!1}function wC(t,e){let n=t[FP]||null;if(!n&&e===!0)throw new Error(`Type ${yn(t)} does not have '\u0275mod' property.`);return n}function EC(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Os,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||On,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Db(t.inputs,e),outputs:Db(t.outputs),debugInfo:null}}function bC(t){t.features?.forEach(e=>e(t))}function Sb(t,e){if(!t)return null;let n=e?_C:uk;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(dk)}function hk(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var Yr=0,ye=1,he=2,Lt=3,Kn=4,Tn=5,Fs=6,_c=7,Ht=8,Vs=9,Gr=10,Tt=11,Ic=12,Ab=13,zs=14,Fn=15,Mc=16,As=17,ar=18,Qd=19,CC=20,yi=21,Lm=22,Io=23,jt=25,TC=1;var wo=7,Sd=8,Ls=9,Wt=10,i0=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(i0||{});function yo(t){return Array.isArray(t)&&typeof t[TC]=="object"}function Jr(t){return Array.isArray(t)&&t[TC]===!0}function o0(t){return(t.flags&4)!==0}function Yd(t){return t.componentOffset>-1}function Jd(t){return(t.flags&1)===1}function Ii(t){return!!t.template}function fk(t){return(t[he]&512)!==0}function Eo(t,e){let n=t.hasOwnProperty(Td);return n?t[Td]:null}var og=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function DC(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function cn(){return SC}function SC(t){return t.type.prototype.ngOnChanges&&(t.setInput=mk),pk}cn.ngInherit=!0;function pk(){let t=xC(this),e=t?.current;if(e){let n=t.previous;if(n===Os)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function mk(t,e,n,r,i){let o=this.declaredInputs[r],s=xC(t)||gk(t,{previous:Os,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new og(l&&l.currentValue,n,c===Os),DC(t,e,i,n)}var AC="__ngSimpleChanges__";function xC(t){return t[AC]||null}function gk(t,e){return t[AC]=e}var xb=null;var or=function(t,e,n){xb?.(t,e,n)},RC="svg",vk="math",yk=!1;function _k(){return yk}function lr(t){for(;Array.isArray(t);)t=t[Yr];return t}function MC(t,e){return lr(e[t])}function Vn(t,e){return lr(e[t.index])}function s0(t,e){return t.data[e]}function a0(t,e){return t[e]}function bi(t,e){let n=e[t];return yo(n)?n:n[Yr]}function Ik(t){return(t[he]&4)===4}function c0(t){return(t[he]&128)===128}function wk(t){return Jr(t[Lt])}function js(t,e){return e==null?null:t[e]}function NC(t){t[As]=0}function Ek(t){t[he]&1024||(t[he]|=1024,c0(t)&&wc(t))}function bk(t,e){for(;t>0;)e=e[zs],t--;return e}function PC(t){return t[he]&9216||t[Io]?.dirty}function sg(t){PC(t)?wc(t):t[he]&64&&(_k()?(t[he]|=1024,wc(t)):t[Gr].changeDetectionScheduler?.notify())}function wc(t){t[Gr].changeDetectionScheduler?.notify();let e=Ec(t);for(;e!==null&&!(e[he]&8192||(e[he]|=8192,!c0(e)));)e=Ec(e)}function kC(t,e){if((t[he]&256)===256)throw new ee(911,!1);t[yi]===null&&(t[yi]=[]),t[yi].push(e)}function Ck(t,e){if(t[yi]===null)return;let n=t[yi].indexOf(e);n!==-1&&t[yi].splice(n,1)}function Ec(t){let e=t[Lt];return Jr(e)?e[Lt]:e}var _e={lFrame:BC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Tk(){return _e.lFrame.elementDepthCount}function Dk(){_e.lFrame.elementDepthCount++}function Sk(){_e.lFrame.elementDepthCount--}function OC(){return _e.bindingsEnabled}function FC(){return _e.skipHydrationRootTNode!==null}function Ak(t){return _e.skipHydrationRootTNode===t}function xk(){_e.skipHydrationRootTNode=null}function be(){return _e.lFrame.lView}function Mt(){return _e.lFrame.tView}function Q(t){return _e.lFrame.contextLView=t,t[Ht]}function Y(t){return _e.lFrame.contextLView=null,t}function ln(){let t=VC();for(;t!==null&&t.type===64;)t=t.parent;return t}function VC(){return _e.lFrame.currentTNode}function Rk(){let t=_e.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function xo(t,e){let n=_e.lFrame;n.currentTNode=t,n.isParent=e}function l0(){return _e.lFrame.isParent}function u0(){_e.lFrame.isParent=!1}function Mk(){return _e.lFrame.contextLView}function Nc(){let t=_e.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Nk(){return _e.lFrame.bindingIndex}function Pk(t){return _e.lFrame.bindingIndex=t}function Pc(){return _e.lFrame.bindingIndex++}function LC(t){let e=_e.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function kk(){return _e.lFrame.inI18n}function Ok(t,e){let n=_e.lFrame;n.bindingIndex=n.bindingRootIndex=t,ag(e)}function Fk(){return _e.lFrame.currentDirectiveIndex}function ag(t){_e.lFrame.currentDirectiveIndex=t}function Vk(t){let e=_e.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function jC(){return _e.lFrame.currentQueryIndex}function d0(t){_e.lFrame.currentQueryIndex=t}function Lk(t){let e=t[ye];return e.type===2?e.declTNode:e.type===1?t[Tn]:null}function UC(t,e,n){if(n&Ce.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&Ce.Host);)if(i=Lk(o),i===null||(o=o[zs],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=_e.lFrame=$C();return r.currentTNode=e,r.lView=t,!0}function h0(t){let e=$C(),n=t[ye];_e.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function $C(){let t=_e.lFrame,e=t===null?null:t.child;return e===null?BC(t):e}function BC(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function qC(){let t=_e.lFrame;return _e.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var zC=qC;function f0(){let t=qC();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function jk(t){return(_e.lFrame.contextLView=bk(t,_e.lFrame.contextLView))[Ht]}function Ci(){return _e.lFrame.selectedIndex}function bo(t){_e.lFrame.selectedIndex=t}function GC(){let t=_e.lFrame;return s0(t.tView,t.selectedIndex)}function fe(){_e.lFrame.currentNamespace=RC}function De(){Uk()}function Uk(){_e.lFrame.currentNamespace=null}function $k(){return _e.lFrame.currentNamespace}var HC=!0;function Zd(){return HC}function Xd(t){HC=t}function Bk(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=SC(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function eh(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function _d(t,e,n){WC(t,e,3,n)}function Id(t,e,n,r){(t[he]&3)===n&&WC(t,e,n,r)}function jm(t,e){let n=t[he];(n&3)===e&&(n&=16383,n+=1,t[he]=n)}function WC(t,e,n,r){let i=r!==void 0?t[As]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[As]+=65536),(a<o||o==-1)&&(qk(t,n,e,c),t[As]=(t[As]&4294901760)+c+2),c++}function Rb(t,e){or(4,t,e);let n=Ct(null);try{e.call(t)}finally{Ct(n),or(5,t,e)}}function qk(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[he]>>14<t[As]>>16&&(t[he]&3)===e&&(t[he]+=16384,Rb(a,o)):Rb(a,o)}var Ps=-1,Co=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function zk(t){return t instanceof Co}function Gk(t){return(t.flags&8)!==0}function Hk(t){return(t.flags&16)!==0}function KC(t){return t!==Ps}function Ad(t){return t&32767}function Wk(t){return t>>16}function xd(t,e){let n=Wk(t),r=e;for(;n>0;)r=r[zs],n--;return r}var cg=!0;function Rd(t){let e=cg;return cg=t,e}var Kk=256,QC=Kk-1,YC=5,Qk=0,sr={};function Yk(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(gc)&&(r=n[gc]),r==null&&(r=n[gc]=Qk++);let i=r&QC,o=1<<i;e.data[t+(i>>YC)]|=o}function Md(t,e){let n=JC(t,e);if(n!==-1)return n;let r=e[ye];r.firstCreatePass&&(t.injectorIndex=e.length,Um(r.data,t),Um(e,null),Um(r.blueprint,null));let i=p0(t,e),o=t.injectorIndex;if(KC(i)){let s=Ad(i),a=xd(i,e),c=a[ye].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Um(t,e){t.push(0,0,0,0,0,0,0,0,e)}function JC(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function p0(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=n1(i),r===null)return Ps;if(n++,i=i[zs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ps}function lg(t,e,n){Yk(t,e,n)}function Jk(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(pC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function ZC(t,e,n){if(n&Ce.Optional||t!==void 0)return t;r0(e,"NodeInjector")}function XC(t,e,n,r){if(n&Ce.Optional&&r===void 0&&(r=null),!(n&(Ce.Self|Ce.Host))){let i=t[Vs],o=vn(void 0);try{return i?i.get(e,r,n&Ce.Optional):uC(e,r,n&Ce.Optional)}finally{vn(o)}}return ZC(r,e,n)}function e1(t,e,n,r=Ce.Default,i){if(t!==null){if(e[he]&2048&&!(r&Ce.Self)){let s=tO(t,e,n,r,sr);if(s!==sr)return s}let o=t1(t,e,n,r,sr);if(o!==sr)return o}return XC(e,n,r,i)}function t1(t,e,n,r,i){let o=Xk(n);if(typeof o=="function"){if(!UC(e,t,r))return r&Ce.Host?ZC(i,n,r):XC(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&Ce.Optional))r0(n);else return s}finally{zC()}}else if(typeof o=="number"){let s=null,a=JC(t,e),c=Ps,l=r&Ce.Host?e[Fn][Tn]:null;for((a===-1||r&Ce.SkipSelf)&&(c=a===-1?p0(t,e):e[a+8],c===Ps||!Nb(r,!1)?a=-1:(s=e[ye],a=Ad(c),e=xd(c,e)));a!==-1;){let u=e[ye];if(Mb(o,a,u.data)){let h=Zk(a,e,n,s,r,l);if(h!==sr)return h}c=e[a+8],c!==Ps&&Nb(r,e[ye].data[a+8]===l)&&Mb(o,a,e)?(s=u,a=Ad(c),e=xd(c,e)):a=-1}}return i}function Zk(t,e,n,r,i,o){let s=e[ye],a=s.data[t+8],c=r==null?Yd(a)&&cg:r!=s&&(a.type&3)!==0,l=i&Ce.Host&&o===a,u=wd(a,s,n,c,l);return u!==null?To(e,s,u,a):sr}function wd(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,h=r?a:a+u,g=i?a+u:l;for(let v=h;v<g;v++){let w=s[v];if(v<c&&n===w||v>=c&&w.type===n)return v}if(i){let v=s[c];if(v&&Ii(v)&&v.type===n)return c}return null}function To(t,e,n,r){let i=t[n],o=e.data;if(zk(i)){let s=i;s.resolving&&LP(VP(o[n]));let a=Rd(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?vn(s.injectImpl):null,u=UC(t,r,Ce.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&Bk(n,o[n],e)}finally{l!==null&&vn(l),Rd(a),s.resolving=!1,zC()}}return i}function Xk(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(gc)?t[gc]:void 0;return typeof e=="number"?e>=0?e&QC:eO:e}function Mb(t,e,n){let r=1<<t;return!!(n[e+(t>>YC)]&r)}function Nb(t,e){return!(t&Ce.Self)&&!(t&Ce.Host&&e)}var _o=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return e1(this._tNode,this._lView,e,Wd(r),n)}};function eO(){return new _o(ln(),be())}function Qn(t){return Rc(()=>{let e=t.prototype.constructor,n=e[Td]||ug(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Td]||ug(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ug(t){return iC(t)?()=>{let e=ug(on(t));return e&&e()}:Eo(t)}function tO(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[he]&2048&&!(s[he]&512);){let a=t1(o,s,n,r|Ce.Self,sr);if(a!==sr)return a;let c=o.parent;if(!c){let l=s[CC];if(l){let u=l.get(n,sr,r);if(u!==sr)return u}c=n1(s),s=s[zs]}o=c}return i}function n1(t){let e=t[ye],n=e.type;return n===2?e.declTNode:n===1?t[Tn]:null}function m0(t){return Jk(ln(),t)}var fd="__parameters__";function nO(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function r1(t,e,n){return Rc(()=>{let r=nO(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let h=c.hasOwnProperty(fd)?c[fd]:Object.defineProperty(c,fd,{value:[]})[fd];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function rO(t){return typeof t=="function"}function iO(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function oO(t){return t.flat(Number.POSITIVE_INFINITY)}function g0(t,e){t.forEach(n=>Array.isArray(n)?g0(n,e):e(n))}function i1(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Nd(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function sO(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function aO(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function cO(t,e,n){let r=kc(t,e);return r>=0?t[r|1]=n:(r=~r,aO(t,r,e,n)),r}function $m(t,e){let n=kc(t,e);if(n>=0)return t[n|1]}function kc(t,e){return lO(t,e,1)}function lO(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var un=dC(r1("Optional"),8);var o1=dC(r1("SkipSelf"),4);var Us=new K("ENVIRONMENT_INITIALIZER"),s1=new K("INJECTOR",-1),a1=new K("INJECTOR_DEF_TYPES"),Pd=class{get(e,n=vc){if(n===vc){let r=new Error(`NullInjectorError: No provider for ${yn(e)}!`);throw r.name="NullInjectorError",r}return n}};function Ti(t){return{\u0275providers:t}}function v0(...t){return{\u0275providers:c1(!0,t),\u0275fromNgModule:!0}}function c1(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return g0(e,s=>{let a=s;dg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&l1(i,o),n}function l1(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];y0(i,o=>{e(o,r)})}}function dg(t,e,n,r){if(t=on(t),!t)return!1;let i=null,o=wb(t),s=!o&&_i(t);if(!o&&!s){let c=t.ngModule;if(o=wb(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)dg(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{g0(o.imports,u=>{dg(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&l1(l,e)}if(!a){let l=Eo(i)||(()=>new i);e({provide:i,useFactory:l,deps:On},i),e({provide:a1,useValue:i,multi:!0},i),e({provide:Us,useValue:()=>x(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;y0(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function y0(t,e){for(let n of t)oC(n)&&(n=n.\u0275providers),Array.isArray(n)?y0(n,e):e(n)}var uO=Ge({provide:String,useValue:Ge});function u1(t){return t!==null&&typeof t=="object"&&uO in t}function dO(t){return!!(t&&t.useExisting)}function hO(t){return!!(t&&t.useFactory)}function $s(t){return typeof t=="function"}function fO(t){return!!t.useClass}var th=new K("Set Injector scope."),Ed={},pO={},Bm;function _0(){return Bm===void 0&&(Bm=new Pd),Bm}var sn=class{},bc=class extends sn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fg(e,s=>this.processProvider(s)),this.records.set(s1,xs(void 0,this)),i.has("environment")&&this.records.set(sn,xs(void 0,this));let o=this.records.get(th);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(a1,On,Ce.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=vi(this),r=vn(void 0),i;try{return e()}finally{vi(n),vn(r)}}get(e,n=vc,r=Ce.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(_b))return e[_b](this);r=Wd(r);let i,o=vi(this),s=vn(void 0);try{if(!(r&Ce.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=_O(e)&&Hd(e);l&&this.injectableDefInScope(l)?c=xs(hg(e),Ed):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Ce.Self?_0():this.parent;return n=r&Ce.Optional&&n===vc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Dd]=a[Dd]||[]).unshift(yn(e)),o)throw a;return YP(a,e,"R3InjectorError",this.source)}else throw a}finally{vn(s),vi(o)}}resolveInjectorInitializers(){let e=vi(this),n=vn(void 0),r;try{let i=this.get(Us,On,Ce.Self);for(let o of i)o()}finally{vi(e),vn(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(yn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(e){e=on(e);let n=$s(e)?e:on(e&&e.provide),r=gO(e);if(!$s(e)&&e.multi===!0){let i=this.records.get(n);i||(i=xs(void 0,Ed,!0),i.factory=()=>rg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Ed&&(n.value=pO,n.value=n.factory()),typeof n.value=="object"&&n.value&&yO(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=on(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function hg(t){let e=Hd(t),n=e!==null?e.factory:Eo(t);if(n!==null)return n;if(t instanceof K)throw new ee(204,!1);if(t instanceof Function)return mO(t);throw new ee(204,!1)}function mO(t){if(t.length>0)throw new ee(204,!1);let n=$P(t);return n!==null?()=>n.factory(t):()=>new t}function gO(t){if(u1(t))return xs(void 0,t.useValue);{let e=d1(t);return xs(e,Ed)}}function d1(t,e,n){let r;if($s(t)){let i=on(t);return Eo(i)||hg(i)}else if(u1(t))r=()=>on(t.useValue);else if(hO(t))r=()=>t.useFactory(...rg(t.deps||[]));else if(dO(t))r=()=>x(on(t.useExisting));else{let i=on(t&&(t.useClass||t.provide));if(vO(t))r=()=>new i(...rg(t.deps));else return Eo(i)||hg(i)}return r}function xs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function vO(t){return!!t.deps}function yO(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function _O(t){return typeof t=="function"||typeof t=="object"&&t instanceof K}function fg(t,e){for(let n of t)Array.isArray(n)?fg(n,e):n&&oC(n)?fg(n.\u0275providers,e):e(n)}function dr(t,e){t instanceof bc&&t.assertNotDestroyed();let n,r=vi(t),i=vn(void 0);try{return e()}finally{vi(r),vn(i)}}function IO(t){if(!lC()&&!WP())throw new ee(-203,!1)}function Pb(t,e=null,n=null,r){let i=h1(t,e,n,r);return i.resolveInjectorInitializers(),i}function h1(t,e=null,n=null,r,i=new Set){let o=[n||On,v0(t)];return r=r||(typeof t=="object"?void 0:yn(t)),new bc(o,e||_0(),r||null,i)}var Dt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return Pb({name:""},i,r,"");{let o=r.name??"";return Pb({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=vc,e.NULL=new Pd,e.\u0275prov=U({token:e,providedIn:"any",factory:()=>x(s1)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var pg;function f1(t){pg=t}function wO(){if(pg!==void 0)return pg;if(typeof document<"u")return document;throw new ee(210,!1)}var I0=new K("AppId",{providedIn:"root",factory:()=>EO}),EO="ng",w0=new K("Platform Initializer"),dn=new K("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var E0=new K("CSP nonce",{providedIn:"root",factory:()=>wO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function p1(t){return t instanceof Function?t():t}function bO(t){return(t??j(Dt)).get(dn)==="browser"}function m1(t){return(t.flags&128)===128}var Hr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Hr||{}),CO=/^>|^->|<!--|-->|--!>|<!-$/g,TO=/(<|>)/g,DO="\u200B$1\u200B";function SO(t){return t.replace(CO,e=>e.replace(TO,DO))}var g1=new Map,AO=0;function xO(){return AO++}function RO(t){g1.set(t[Qd],t)}function MO(t){g1.delete(t[Qd])}var kb="__ngContext__";function wi(t,e){yo(e)?(t[kb]=e[Qd],RO(e)):t[kb]=e}var NO;function b0(t,e){return NO(t,e)}function Rs(t,e,n,r,i){if(r!=null){let o,s=!1;Jr(r)?o=r:yo(r)&&(s=!0,r=r[Yr]);let a=lr(r);t===0&&n!==null?i==null?w1(e,n,a):kd(e,n,a,i||null,!0):t===1&&n!==null?kd(e,n,a,i||null,!0):t===2?KO(e,a,s):t===3&&e.destroyNode(a),o!=null&&YO(e,t,o,n,i)}}function PO(t,e){return t.createText(e)}function kO(t,e,n){t.setValue(e,n)}function OO(t,e){return t.createComment(SO(e))}function v1(t,e,n){return t.createElement(e,n)}function FO(t,e){y1(t,e),e[Yr]=null,e[Tn]=null}function VO(t,e,n,r,i,o){r[Yr]=i,r[Tn]=e,ih(t,r,n,1,i,o)}function y1(t,e){ih(t,e,e[Tt],2,null,null)}function LO(t){let e=t[Ic];if(!e)return qm(t[ye],t);for(;e;){let n=null;if(yo(e))n=e[Ic];else{let r=e[Wt];r&&(n=r)}if(!n){for(;e&&!e[Kn]&&e!==t;)yo(e)&&qm(e[ye],e),e=e[Lt];e===null&&(e=t),yo(e)&&qm(e[ye],e),n=e&&e[Kn]}e=n}}function jO(t,e,n,r){let i=Wt+r,o=n.length;r>0&&(n[i-1][Kn]=e),r<o-Wt?(e[Kn]=n[i],i1(n,Wt+r,e)):(n.push(e),e[Kn]=null),e[Lt]=n;let s=e[Mc];s!==null&&n!==s&&UO(s,e);let a=e[ar];a!==null&&a.insertView(t),sg(e),e[he]|=128}function UO(t,e){let n=t[Ls],i=e[Lt][Lt][Fn];e[Fn]!==i&&(t[he]|=i0.HasTransplantedViews),n===null?t[Ls]=[e]:n.push(e)}function _1(t,e){let n=t[Ls],r=n.indexOf(e);n.splice(r,1)}function Cc(t,e){if(t.length<=Wt)return;let n=Wt+e,r=t[n];if(r){let i=r[Mc];i!==null&&i!==t&&_1(i,r),e>0&&(t[n-1][Kn]=r[Kn]);let o=Nd(t,Wt+e);FO(r[ye],r);let s=o[ar];s!==null&&s.detachView(o[ye]),r[Lt]=null,r[Kn]=null,r[he]&=-129}return r}function nh(t,e){if(!(e[he]&256)){let n=e[Tt];n.destroyNode&&ih(t,e,n,3,null,null),LO(e)}}function qm(t,e){if(!(e[he]&256)){e[he]&=-129,e[he]|=256,e[Io]&&UE(e[Io]),BO(t,e),$O(t,e),e[ye].type===1&&e[Tt].destroy();let n=e[Mc];if(n!==null&&Jr(e[Lt])){n!==e[Lt]&&_1(n,e);let r=e[ar];r!==null&&r.detachView(t)}MO(e)}}function $O(t,e){let n=t.cleanup,r=e[_c];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[_c]=null);let i=e[yi];if(i!==null){e[yi]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function BO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Co)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];or(4,a,c);try{c.call(a)}finally{or(5,a,c)}}else{or(4,i,o);try{o.call(i)}finally{or(5,i,o)}}}}}function I1(t,e,n){return qO(t,e.parent,n)}function qO(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Yr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===cr.None||o===cr.Emulated)return null}return Vn(r,n)}}function kd(t,e,n,r,i){t.insertBefore(e,n,r,i)}function w1(t,e,n){t.appendChild(e,n)}function Ob(t,e,n,r,i){r!==null?kd(t,e,n,r,i):w1(t,e,n)}function zO(t,e,n,r){t.removeChild(e,n,r)}function C0(t,e){return t.parentNode(e)}function GO(t,e){return t.nextSibling(e)}function E1(t,e,n){return WO(t,e,n)}function HO(t,e,n){return t.type&40?Vn(t,n):null}var WO=HO,Fb;function rh(t,e,n,r){let i=I1(t,r,e),o=e[Tt],s=r.parent||e[Tn],a=E1(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Ob(o,i,n[c],a,!1);else Ob(o,i,n,a,!1);Fb!==void 0&&Fb(o,r,e,n,i)}function bd(t,e){if(e!==null){let n=e.type;if(n&3)return Vn(e,t);if(n&4)return mg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return bd(t,r);{let i=t[e.index];return Jr(i)?mg(-1,i):lr(i)}}else{if(n&32)return b0(e,t)()||lr(t[e.index]);{let r=b1(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ec(t[Fn]);return bd(i,r)}else return bd(t,e.next)}}}return null}function b1(t,e){if(e!==null){let r=t[Fn][Tn],i=e.projection;return r.projection[i]}return null}function mg(t,e){let n=Wt+t+1;if(n<e.length){let r=e[n],i=r[ye].firstChild;if(i!==null)return bd(r,i)}return e[wo]}function KO(t,e,n){let r=C0(t,e);r&&zO(t,r,e,n)}function T0(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&wi(lr(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)T0(t,e,n.child,r,i,o,!1),Rs(e,t,i,a,o);else if(c&32){let l=b0(n,r),u;for(;u=l();)Rs(e,t,i,u,o);Rs(e,t,i,a,o)}else c&16?C1(t,e,r,n,i,o):Rs(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ih(t,e,n,r,i,o){T0(n,r,t.firstChild,e,i,o,!1)}function QO(t,e,n){let r=e[Tt],i=I1(t,n,e),o=n.parent||e[Tn],s=E1(o,n,e);C1(r,0,e,n,i,s)}function C1(t,e,n,r,i,o){let s=n[Fn],c=s[Tn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Rs(e,t,i,u,o)}else{let l=c,u=s[Lt];m1(r)&&(l.flags|=128),T0(t,e,l,u,i,o,!0)}}function YO(t,e,n,r,i){let o=n[wo],s=lr(n);o!==s&&Rs(e,t,r,o,i);for(let a=Wt;a<n.length;a++){let c=n[a];ih(c[ye],c,t,e,r,o)}}function JO(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Hr.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Hr.Important),t.setStyle(n,r,i,o))}}function ZO(t,e,n){t.setAttribute(e,"style",n)}function T1(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function D1(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&ig(t,e,r),i!==null&&T1(t,e,i),o!==null&&ZO(t,e,o)}var pd;function XO(){if(pd===void 0&&(pd=null,Cn.trustedTypes))try{pd=Cn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return pd}function oh(t){return XO()?.createHTML(t)||t}var md;function eF(){if(md===void 0&&(md=null,Cn.trustedTypes))try{md=Cn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return md}function Vb(t){return eF()?.createScriptURL(t)||t}var Wr=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rC})`}},gg=class extends Wr{getTypeName(){return"HTML"}},vg=class extends Wr{getTypeName(){return"Style"}},yg=class extends Wr{getTypeName(){return"Script"}},_g=class extends Wr{getTypeName(){return"URL"}},Ig=class extends Wr{getTypeName(){return"ResourceURL"}};function hr(t){return t instanceof Wr?t.changingThisBreaksApplicationSecurity:t}function Di(t,e){let n=tF(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${rC})`)}return n===e}function tF(t){return t instanceof Wr&&t.getTypeName()||null}function S1(t){return new gg(t)}function A1(t){return new vg(t)}function x1(t){return new yg(t)}function R1(t){return new _g(t)}function M1(t){return new Ig(t)}function nF(t){let e=new Eg(t);return rF()?new wg(e):e}var wg=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(oh(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}},Eg=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=oh(e),n}};function rF(){try{return!!new window.DOMParser().parseFromString(oh(""),"text/html")}catch{return!1}}var iF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function sh(t){return t=String(t),t.match(iF)?t:"unsafe:"+t}function Zr(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function Oc(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var N1=Zr("area,br,col,hr,img,wbr"),P1=Zr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),k1=Zr("rp,rt"),oF=Oc(k1,P1),sF=Oc(P1,Zr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),aF=Oc(k1,Zr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Lb=Oc(N1,sF,aF,oF),O1=Zr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),cF=Zr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),lF=Zr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),uF=Oc(O1,cF,lF),dF=Zr("script,style,template"),bg=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0;for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){n=n.firstChild;continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}}return this.buf.join("")}startElement(e){let n=e.nodeName.toLowerCase();if(!Lb.hasOwnProperty(n))return this.sanitizedSomething=!0,!dF.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!uF.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;O1[a]&&(c=sh(c)),this.buf.push(" ",s,'="',jb(c),'"')}return this.buf.push(">"),!0}endElement(e){let n=e.nodeName.toLowerCase();Lb.hasOwnProperty(n)&&!N1.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(jb(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}},hF=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fF=/([^\#-~ |!])/g;function jb(t){return t.replace(/&/g,"&amp;").replace(hF,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(fF,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var gd;function F1(t,e){let n=null;try{gd=gd||nF(t);let r=e?String(e):"";n=gd.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=gd.getInertBodyElement(r)}while(r!==o);let a=new bg().sanitizeChildren(Ub(n)||n);return oh(a)}finally{if(n){let r=Ub(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Ub(t){return"content"in t&&pF(t)?t.content:null}function pF(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var fr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(fr||{});function mF(t){let e=L1();return e?e.sanitize(fr.URL,t)||"":Di(t,"URL")?hr(t):sh(ks(t))}function gF(t){let e=L1();if(e)return Vb(e.sanitize(fr.RESOURCE_URL,t)||"");if(Di(t,"ResourceURL"))return Vb(hr(t));throw new ee(904,!1)}function vF(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?gF:mF}function V1(t,e,n){return vF(e,n)(t)}function L1(){let t=be();return t&&t[Gr].sanitizer}var Cg=class{};var yF="h",_F="b";var IF=()=>null;function D0(t,e,n=!1){return IF(t,e,n)}var Tg=class{},Od=class{};function wF(t){let e=Error(`No component factory found for ${yn(t)}.`);return e[EF]=t,e}var EF="ngComponent";var Dg=class{resolveComponentFactory(e){throw wF(e)}},ah=(()=>{let e=class e{};e.NULL=new Dg;let t=e;return t})();function bF(){return Gs(ln(),be())}function Gs(t,e){return new _n(Vn(t,e))}var _n=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=bF;let t=e;return t})();function CF(t){return t instanceof _n?t.nativeElement:t}var Tc=class{},pr=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>TF();let t=e;return t})();function TF(){let t=be(),e=ln(),n=bi(e.index,t);return(yo(n)?n:t)[Tt]}var DF=(()=>{let e=class e{};e.\u0275prov=U({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),zm={};function S0(t){let e=Ct(null);try{return t()}finally{Ct(e)}}function Fd(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(lr(o)),Jr(o)&&SF(o,r);let s=n.type;if(s&8)Fd(t,e,n.child,r);else if(s&32){let a=b0(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=b1(e,n);if(Array.isArray(a))r.push(...a);else{let c=Ec(e[Fn]);Fd(c[ye],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function SF(t,e){for(let n=Wt;n<t.length;n++){let r=t[n],i=r[ye].firstChild;i!==null&&Fd(r[ye],r,i,e)}t[wo]!==t[Yr]&&e.push(t[wo])}var j1=[];function AF(t){return t[Io]??xF(t)}function xF(t){let e=j1.pop()??Object.create(MF);return e.lView=t,e}function RF(t){t.lView[Io]!==t&&(t.lView=null,j1.push(t))}var MF=Ne(A({},VE),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{wc(t.lView)},consumerOnSignalRead(){this.lView[Io]=this}});function U1(t){return B1(t[Ic])}function $1(t){return B1(t[Kn])}function B1(t){for(;t!==null&&!Jr(t);)t=t[Kn];return t}var NF="ngOriginalError";function Gm(t){return t[NF]}var ur=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Gm(e);for(;n&&Gm(n);)n=Gm(n);return n||null}},q1=new K("",{providedIn:"root",factory:()=>j(ur).handleError.bind(void 0)});var z1=!1,PF=new K("",{providedIn:"root",factory:()=>z1});var mr={};function p(t=1){G1(Mt(),be(),Ci()+t,!1)}function G1(t,e,n,r){if(!r)if((e[he]&3)===3){let o=t.preOrderCheckHooks;o!==null&&_d(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Id(e,o,0,n)}bo(n)}function b(t,e=Ce.Default){let n=be();if(n===null)return x(t,e);let r=ln();return e1(r,n,on(t),e)}function H1(){let t="invalid";throw new Error(t)}function W1(t,e,n,r,i,o){let s=Ct(null);try{let a=null;i&rt.SignalBased&&(a=e[r][FE]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&rt.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):DC(e,a,r,o)}finally{Ct(s)}}function kF(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)bo(~i);else{let o=i,s=n[++r],a=n[++r];Ok(s,o);let c=e[o];a(2,c)}}}finally{bo(-1)}}function ch(t,e,n,r,i,o,s,a,c,l,u){let h=e.blueprint.slice();return h[Yr]=i,h[he]=r|4|128|8|64,(l!==null||t&&t[he]&2048)&&(h[he]|=2048),NC(h),h[Lt]=h[zs]=t,h[Ht]=n,h[Gr]=s||t&&t[Gr],h[Tt]=a||t&&t[Tt],h[Vs]=c||t&&t[Vs]||null,h[Tn]=o,h[Qd]=xO(),h[Fs]=u,h[CC]=l,h[Fn]=e.type==2?t[Fn]:h,h}function Hs(t,e,n,r,i){let o=t.data[e];if(o===null)o=OF(t,e,n,r,i),kk()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Rk();o.injectorIndex=s===null?-1:s.injectorIndex}return xo(o,!0),o}function OF(t,e,n,r,i){let o=VC(),s=l0(),a=s?o:o&&o.parent,c=t.data[e]=$F(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function K1(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Q1(t,e,n,r,i){let o=Ci(),s=r&2;try{bo(-1),s&&e.length>jt&&G1(t,e,jt,!1),or(s?2:0,i),n(r,i)}finally{bo(o),or(s?3:1,i)}}function A0(t,e,n){if(o0(e)){let r=Ct(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{Ct(r)}}}function x0(t,e,n){OC()&&(KF(t,e,n,Vn(n,e)),(n.flags&64)===64&&Z1(t,e,n))}function R0(t,e,n=Vn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function Y1(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=M0(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function M0(t,e,n,r,i,o,s,a,c,l,u){let h=jt+r,g=h+i,v=FF(h,g),w=typeof l=="function"?l():l;return v[ye]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:u}}function FF(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:mr);return n}function VF(t,e,n,r){let o=r.get(PF,z1)||n===cr.ShadowDom,s=t.selectRootElement(e,o);return LF(s),s}function LF(t){jF(t)}var jF=()=>null;function UF(t,e,n,r){let i=tT(e);i.push(n),t.firstCreatePass&&nT(t).push(r,i.length-1)}function $F(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return FC()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function $b(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=rt.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?Bb(r,n,l,a,c):Bb(r,n,l,a)}return r}function Bb(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function BF(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let h=o[u],g=n?n.get(h):null,v=g?g.inputs:null,w=g?g.outputs:null;c=$b(0,h.inputs,u,c,v),l=$b(1,h.outputs,u,l,w);let R=c!==null&&s!==null&&!gC(e)?o2(c,u,s):null;a.push(R)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function qF(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function zF(t,e,n,r,i,o,s,a){let c=Vn(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(P0(t,n,u,r,i),Yd(e)&&GF(n,e.index)):e.type&3?(r=qF(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function GF(t,e){let n=bi(e,t);n[he]&16||(n[he]|=64)}function N0(t,e,n,r){if(OC()){let i=r===null?null:{"":-1},o=YF(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&J1(t,e,n,s,i,a),i&&JF(n,r,i)}n.mergedAttrs=yc(n.mergedAttrs,n.attrs)}function J1(t,e,n,r,i,o){for(let l=0;l<r.length;l++)lg(Md(n,e),t,r[l].type);XF(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=K1(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=yc(n.mergedAttrs,u.hostAttrs),e2(t,n,e,c,u),ZF(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let h=u.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}BF(t,n,o)}function HF(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;WF(s)!=a&&s.push(a),s.push(n,r,o)}}function WF(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function KF(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Yd(n)&&t2(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Md(n,e),wi(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],l=To(e,t,a,n);if(wi(l,e),s!==null&&i2(e,a-i,l,c,n,s),Ii(c)){let u=bi(n.index,e);u[Ht]=To(e,t,a,n)}}}function Z1(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Fk();try{bo(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];ag(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&QF(c,l)}}finally{bo(-1),ag(s)}}function QF(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function YF(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(vC(e,s.selectors,!1))if(r||(r=[]),Ii(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Sg(t,e,c)}else r.unshift(s),Sg(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Sg(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function JF(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new ee(-301,!1);r.push(e[i],o)}}}function ZF(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ii(e)&&(n[""]=t)}}function XF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function e2(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Eo(i.type,!0)),s=new Co(o,Ii(i),b);t.blueprint[r]=s,n[r]=s,HF(t,e,r,K1(t,n,i.hostVars,mr),i)}function t2(t,e,n){let r=Vn(e,t),i=Y1(n),o=t[Gr].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=lh(t,ch(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function n2(t,e,n,r,i,o){let s=Vn(t,e);r2(e[Tt],s,o,t.value,n,r,i)}function r2(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?ks(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function i2(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],h=s[a++];W1(r,n,c,l,u,h)}}function o2(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function X1(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function eT(t,e){let n=t.contentQueries;if(n!==null){let r=Ct(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];d0(o),a.contentQueries(2,e[s],s)}}}finally{Ct(r)}}}function lh(t,e){return t[Ic]?t[Ab][Kn]=e:t[Ic]=e,t[Ab]=e,e}function Ag(t,e,n){d0(0);let r=Ct(null);try{e(t,n)}finally{Ct(r)}}function tT(t){return t[_c]||(t[_c]=[])}function nT(t){return t.cleanup||(t.cleanup=[])}function rT(t,e){let n=t[Vs],r=n?n.get(ur,null):null;r&&r.handleError(e)}function P0(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=e[s],u=t.data[s];W1(u,l,r,a,c,i)}}function iT(t,e,n){let r=MC(e,t);kO(t[Tt],r,n)}var s2=100;function a2(t,e=!0){let n=t[Gr],r=n.rendererFactory,i=!1;i||r.begin?.();try{c2(t)}catch(o){throw e&&rT(t,o),o}finally{i||(r.end?.(),n.inlineEffectRunner?.flush())}}function c2(t){xg(t,0);let e=0;for(;PC(t);){if(e===s2)throw new ee(103,!1);e++,xg(t,1)}}function l2(t,e,n,r){let i=e[he];if((i&256)===256)return;let o=!1;!o&&e[Gr].inlineEffectRunner?.flush(),h0(e);let s=null,a=null;!o&&u2(t)&&(a=AF(e),s=LE(a));try{NC(e),Pk(t.bindingStartIndex),n!==null&&Q1(t,e,n,2,r);let c=(i&3)===3;if(!o)if(c){let h=t.preOrderCheckHooks;h!==null&&_d(e,h,null)}else{let h=t.preOrderHooks;h!==null&&Id(e,h,0,null),jm(e,0)}if(d2(e),oT(e,0),t.contentQueries!==null&&eT(t,e),!o)if(c){let h=t.contentCheckHooks;h!==null&&_d(e,h)}else{let h=t.contentHooks;h!==null&&Id(e,h,1),jm(e,1)}kF(t,e);let l=t.components;l!==null&&aT(e,l,0);let u=t.viewQuery;if(u!==null&&Ag(2,u,r),!o)if(c){let h=t.viewCheckHooks;h!==null&&_d(e,h)}else{let h=t.viewHooks;h!==null&&Id(e,h,2),jm(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Lm]){for(let h of e[Lm])h();e[Lm]=null}o||(e[he]&=-73)}catch(c){throw wc(e),c}finally{a!==null&&(jE(a,s),RF(a)),f0()}}function u2(t){return t.type!==2}function oT(t,e){for(let n=U1(t);n!==null;n=$1(n))for(let r=Wt;r<n.length;r++){let i=n[r];sT(i,e)}}function d2(t){for(let e=U1(t);e!==null;e=$1(e)){if(!(e[he]&i0.HasTransplantedViews))continue;let n=e[Ls];for(let r=0;r<n.length;r++){let i=n[r],o=i[Lt];Ek(i)}}}function h2(t,e,n){let r=bi(e,t);sT(r,n)}function sT(t,e){c0(t)&&xg(t,e)}function xg(t,e){let r=t[ye],i=t[he],o=t[Io],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ym(o)),o&&(o.dirty=!1),t[he]&=-9217,s)l2(r,t,r.template,t[Ht]);else if(i&8192){oT(t,1);let a=r.components;a!==null&&aT(t,a,1)}}function aT(t,e,n){for(let r=0;r<e.length;r++)h2(t,e[r],n)}function k0(t){for(t[Gr].changeDetectionScheduler?.notify();t;){t[he]|=64;let e=Ec(t);if(fk(t)&&!e)return t;t=e}return null}var Do=class{get rootNodes(){let e=this._lView,n=e[ye];return Fd(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ht]}set context(e){this._lView[Ht]=e}get destroyed(){return(this._lView[he]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Lt];if(Jr(e)){let n=e[Sd],r=n?n.indexOf(this):-1;r>-1&&(Cc(e,r),Nd(n,r))}this._attachedToViewContainer=!1}nh(this._lView[ye],this._lView)}onDestroy(e){kC(this._lView,e)}markForCheck(){k0(this._cdRefInjectingView||this._lView)}detach(){this._lView[he]&=-129}reattach(){sg(this._lView),this._lView[he]|=128}detectChanges(){this._lView[he]|=1024,a2(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,y1(this._lView[ye],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=e,sg(this._lView)}},gr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=f2;let t=e;return t})();function f2(t){return p2(ln(),be(),(t&16)===16)}function p2(t,e,n){if(Yd(t)&&!n){let r=bi(t.index,e);return new Do(r,r)}else if(t.type&47){let r=e[Fn];return new Do(r,e)}return null}var cT=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=m2,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Rg=class extends cT{constructor(e){super(),this._lView=e}onDestroy(e){return kC(this._lView,e),()=>Ck(this._lView,e)}};function m2(){return new Rg(be())}var qb=new Set;function Ws(t){qb.has(t)||(qb.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Mg=class extends Pe{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Hm(o),i&&(i=Hm(i)),s&&(s=Hm(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof vt&&e.add(a),a}};function Hm(t){return e=>{setTimeout(t,void 0,e)}}var nt=Mg;function zb(...t){}function g2(){let t=typeof Cn.requestAnimationFrame=="function",e=Cn[t?"requestAnimationFrame":"setTimeout"],n=Cn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Re=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nt(!1),this.onMicrotaskEmpty=new nt(!1),this.onStable=new nt(!1),this.onError=new nt(!1),typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=g2().nativeRequestAnimationFrame,_2(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new ee(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,v2,zb,zb);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},v2={};function O0(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function y2(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Cn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ng(t),t.isCheckStableRunning=!0,O0(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ng(t))}function _2(t){let e=()=>{y2(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(I2(a))return n.invokeTask(i,o,s,a);try{return Gb(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Hb(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return Gb(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),Hb(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Ng(t),O0(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Ng(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Gb(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Hb(t){t._nesting--,O0(t)}function I2(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Ms=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ms||{}),w2={destroy(){}};function F0(t,e){!e&&IO(F0);let n=e?.injector??j(Dt);if(!bO(n))return w2;Ws("NgAfterNextRender");let r=n.get(V0),i=r.handler??=new kg,o=e?.phase??Ms.MixedReadWrite,s=()=>{i.unregister(c),a()},a=n.get(cT).onDestroy(s),c=new Pg(n,o,()=>{s(),t()});return i.register(c),{destroy:s}}var Pg=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(Re),this.errorHandler=e.get(ur,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},kg=class{constructor(){this.executingCallbacks=!1,this.buckets={[Ms.EarlyRead]:new Set,[Ms.Write]:new Set,[Ms.MixedReadWrite]:new Set,[Ms.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){let e=!1;this.executingCallbacks=!0;for(let n of Object.values(this.buckets))for(let r of n)e=!0,r.invoke();this.executingCallbacks=!1;for(let n of this.deferredCallbacks)this.buckets[n.phase].add(n);return this.deferredCallbacks.clear(),e}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},V0=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let o of r)o();return!!this.handler?.execute()||r.length>0}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=U({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function E2(t,e){let n=bi(e,t),r=n[ye];b2(r,n);let i=n[Yr];i!==null&&n[Fs]===null&&(n[Fs]=D0(i,n[Vs])),L0(r,n,n[Ht])}function b2(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function L0(t,e,n){h0(e);try{let r=t.viewQuery;r!==null&&Ag(1,r,n);let i=t.template;i!==null&&Q1(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&eT(t,e),t.staticViewQueries&&Ag(2,t.viewQuery,n);let o=t.components;o!==null&&C2(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[he]&=-5,f0()}}function C2(t,e){for(let n=0;n<e.length;n++)E2(t,e[n])}function Vd(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=yb(i,a);else if(o==2){let c=a,l=e[++s];r=yb(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Ld=class extends ah{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=_i(e);return new Bs(n,this.ngModule)}};function Wb(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function T2(t){let e=t.toLowerCase();return e==="svg"?RC:e==="math"?vk:null}var Og=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Wd(r);let i=this.injector.get(e,zm,r);return i!==zm||n===zm?i:this.parentInjector.get(e,n,r)}},Bs=class extends Od{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Wb(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Wb(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=ck(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let o=i instanceof sn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new Og(e,o):e,a=s.get(Tc,null);if(a===null)throw new ee(407,!1);let c=s.get(DF,null),l=s.get(V0,null),u=s.get(Cg,null),h={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:u},g=a.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",w=r?VF(g,r,this.componentDef.encapsulation,s):v1(g,v,T2(v)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let C=null;w!==null&&(C=D0(w,s,!0));let M=M0(0,null,null,1,0,null,null,null,null,null,null),X=ch(null,M,null,R,null,null,h,g,s,null,C);h0(X);let Te,ce;try{let Be=this.componentDef,Ve,nn=null;Be.findHostDirectiveDefs?(Ve=[],nn=new Map,Be.findHostDirectiveDefs(Be,Ve,nn),Ve.push(Be)):Ve=[Be];let ui=D2(X,w),ao=S2(ui,w,Be,Ve,X,h,g);ce=s0(M,jt),w&&R2(g,Be,w,r),n!==void 0&&M2(ce,this.ngContentSelectors,n),Te=x2(ao,Be,Ve,nn,X,[N2]),L0(M,X,null)}finally{f0()}return new Fg(this.componentType,Te,Gs(ce,X),X,ce)}},Fg=class extends Tg{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Do(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;P0(o[ye],o,i,e,n),this.previousInputValues.set(e,n);let s=bi(this._tNode.index,o);k0(s)}}get injector(){return new _o(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function D2(t,e){let n=t[ye],r=jt;return t[r]=e,Hs(n,r,2,"#host",null)}function S2(t,e,n,r,i,o,s){let a=i[ye];A2(r,t,e,s);let c=null;e!==null&&(c=D0(e,i[Vs]));let l=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let h=ch(i,Y1(n),null,u,i[t.index],t,o,l,null,null,c);return a.firstCreatePass&&Sg(a,t,r.length-1),lh(i,h),i[t.index]=h}function A2(t,e,n,r){for(let i of t)e.mergedAttrs=yc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Vd(e,e.mergedAttrs,!0),n!==null&&D1(r,n,e))}function x2(t,e,n,r,i,o){let s=ln(),a=i[ye],c=Vn(s,i);J1(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let h=s.directiveStart+u,g=To(i,a,h,s);wi(g,i)}Z1(a,i,s),c&&wi(c,i);let l=To(i,a,s.directiveStart+s.componentOffset,s);if(t[Ht]=i[Ht]=l,o!==null)for(let u of o)u(l,e);return A0(a,s,t),l}function R2(t,e,n,r){if(r)ig(t,n,["ng-version","17.1.1"]);else{let{attrs:i,classes:o}=lk(e.selectors[0]);i&&ig(t,n,i),o&&o.length>0&&T1(t,n,o.join(" "))}}function M2(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function N2(){let t=ln();eh(be()[ye],t)}function P2(t){return Object.getPrototypeOf(t.prototype).constructor}function Nt(t){let e=P2(t.type),n=!0,r=[t];for(;e;){let i;if(Ii(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ee(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=vd(t.inputs),s.inputTransforms=vd(t.inputTransforms),s.declaredInputs=vd(t.declaredInputs),s.outputs=vd(t.outputs);let a=i.hostBindings;a&&L2(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&F2(t,c),l&&V2(t,l),k2(t,i),MP(t.outputs,i.outputs),Ii(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Nt&&(n=!1)}}e=Object.getPrototypeOf(e)}O2(r)}function k2(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function O2(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=yc(i.hostAttrs,n=yc(n,i.hostAttrs))}}function vd(t){return t===Os?{}:t===On?[]:t}function F2(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function V2(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function L2(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function j0(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var UX=new RegExp(`^(\\d+)*(${_F}|${yF})*(.*)`);var j2=()=>null;function Dc(t,e){return j2(t,e)}function uh(t,e,n,r){let i=e.tView,s=t[he]&4096?4096:16,a=ch(t,i,n,s,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),c=t[e.index];a[Mc]=c;let l=t[ar];return l!==null&&(a[ar]=l.createEmbeddedView(i)),L0(i,a,n),a}function lT(t,e){let n=Wt+e;if(n<t.length)return t[n]}function Sc(t,e){return!e||e.firstChild===null||m1(t)}function dh(t,e,n,r=!0){let i=e[ye];if(jO(i,e,t,n),r){let s=mg(n,t),a=e[Tt],c=C0(a,t[wo]);c!==null&&VO(i,t[Tn],a,e,c,s)}let o=e[Fs];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function uT(t,e){let n=Cc(t,e);return n!==void 0&&nh(n[ye],n),n}var Ro=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=U2;let t=e;return t})();function U2(){let t=ln();return hT(t,be())}var $2=Ro,dT=class extends $2{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Gs(this._hostTNode,this._hostLView)}get injector(){return new _o(this._hostTNode,this._hostLView)}get parentInjector(){let e=p0(this._hostTNode,this._hostLView);if(KC(e)){let n=xd(e,this._hostLView),r=Ad(e),i=n[ye].data[r+8];return new _o(i,n)}else return new _o(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Kb(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Wt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Dc(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Sc(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!rO(e),a;if(s)a=n;else{let w=n||{};a=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}let c=s?e:new Bs(_i(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let R=(s?l:this.parentInjector).get(sn,null);R&&(o=R)}let u=_i(c.componentType??{}),h=Dc(this._lContainer,u?.id??null),g=h?.firstChild??null,v=c.create(l,i,g,o);return this.insertImpl(v.hostView,a,Sc(this._hostTNode,h)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(wk(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Lt],l=new dT(c,c[Tn],c[Lt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return dh(s,i,o,r),e.attachToViewContainerRef(),i1(Wm(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Kb(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Cc(this._lContainer,n);r&&(Nd(Wm(this._lContainer),n),nh(r[ye],r))}detach(e){let n=this._adjustIndex(e,-1),r=Cc(this._lContainer,n);return r&&Nd(Wm(this._lContainer),n)!=null?new Do(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Kb(t){return t[Sd]}function Wm(t){return t[Sd]||(t[Sd]=[])}function hT(t,e){let n,r=e[t.index];return Jr(r)?n=r:(n=X1(r,e,null,t),e[t.index]=n,lh(e,n)),q2(n,e,t,r),new dT(n,t,e)}function B2(t,e){let n=t[Tt],r=n.createComment(""),i=Vn(e,t),o=C0(n,i);return kd(n,o,r,GO(n,i),!1),r}var q2=H2,z2=()=>!1;function G2(t,e,n){return z2(t,e,n)}function H2(t,e,n,r){if(t[wo])return;let i;n.type&8?i=lr(r):i=B2(e,n),t[wo]=i}function hh(t,e,n){return t[e]=n}function W2(t,e){return t[e]}function Kr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function jd(t,e,n,r){let i=Kr(t,e,n);return Kr(t,e+1,r)||i}function K2(t,e,n,r,i,o){let s=jd(t,e,n,r);return jd(t,e+2,i,o)||s}function Q2(t,e,n,r,i,o,s,a,c){let l=e.consts,u=Hs(e,t,4,s||null,js(l,a));N0(e,n,u,js(l,c)),eh(e,u);let h=u.tView=M0(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}function F(t,e,n,r,i,o,s,a){let c=be(),l=Mt(),u=t+jt,h=l.firstCreatePass?Q2(u,l,c,e,n,r,i,o,s):l.data[u];xo(h,!1);let g=Y2(l,c,h,t);Zd()&&rh(l,c,g,h),wi(g,c);let v=X1(g,c,g,h);return c[u]=v,lh(c,v),G2(v,h,c),Jd(h)&&x0(l,c,h),s!=null&&R0(c,h,a),F}var Y2=J2;function J2(t,e,n,r){return Xd(!0),e[Tt].createComment("")}function Ks(t,e,n,r){let i=be(),o=Pc();if(Kr(i,o,e)){let s=Mt(),a=GC();n2(a,i,t,e,n,r)}return Ks}function Z2(t,e,n,r){return Kr(t,Pc(),n)?e+ks(n)+r:mr}function X2(t,e,n,r,i,o){let s=Nk(),a=jd(t,s,n,i);return LC(2),a?e+ks(n)+r+ks(i)+o:mr}function yd(t,e){return t<<17|e<<2}function So(t){return t>>17&32767}function eV(t){return(t&2)==2}function tV(t,e){return t&131071|e<<17}function Vg(t){return t|2}function qs(t){return(t&131068)>>2}function Km(t,e){return t&-131069|e<<2}function nV(t){return(t&1)===1}function Lg(t){return t|1}function rV(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=So(s),c=qs(s);t[r]=n;let l=!1,u;if(Array.isArray(n)){let h=n;u=h[1],(u===null||kc(h,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let g=So(t[a+1]);t[r+1]=yd(g,a),g!==0&&(t[g+1]=Km(t[g+1],r)),t[a+1]=tV(t[a+1],r)}else t[r+1]=yd(a,0),a!==0&&(t[a+1]=Km(t[a+1],r)),a=r;else t[r+1]=yd(c,0),a===0?a=r:t[c+1]=Km(t[c+1],r),c=r;l&&(t[r+1]=Vg(t[r+1])),Qb(t,u,r,!0),Qb(t,u,r,!1),iV(e,u,t,r,o),s=yd(a,c),o?e.classBindings=s:e.styleBindings=s}function iV(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&kc(o,e)>=0&&(n[r+1]=Lg(n[r+1]))}function Qb(t,e,n,r){let i=t[n+1],o=e===null,s=r?So(i):qs(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],l=t[s+1];oV(c,e)&&(a=!0,t[s+1]=r?Lg(l):Vg(l)),s=r?So(l):qs(l)}a&&(t[n+1]=r?Vg(i):Lg(i))}function oV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?kc(t,e)>=0:!1}function _(t,e,n){let r=be(),i=Pc();if(Kr(r,i,e)){let o=Mt(),s=GC();zF(o,s,r,t,e,r[Tt],n,!1)}return _}function Yb(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";P0(t,n,o[s],s,r)}function J(t,e){return sV(t,e,null,!0),J}function sV(t,e,n,r){let i=be(),o=Mt(),s=LC(2);if(o.firstUpdatePass&&cV(o,t,s,r),e!==mr&&Kr(i,s,e)){let a=o.data[Ci()];fV(o,a,i,i[Tt],t,i[s+1]=pV(e,n),r,s)}}function aV(t,e){return e>=t.expandoStartIndex}function cV(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Ci()],s=aV(t,n);mV(o,r)&&e===null&&!s&&(e=!1),e=lV(i,o,e,r),rV(i,o,e,n,s,r)}}function lV(t,e,n,r){let i=Vk(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Qm(null,t,e,n,r),n=Ac(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Qm(i,t,e,n,r),o===null){let c=uV(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Qm(null,t,e,c[1],r),c=Ac(c,e.attrs,r),dV(t,e,r,c))}else o=hV(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function uV(t,e,n){let r=n?e.classBindings:e.styleBindings;if(qs(r)!==0)return t[So(r)]}function dV(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[So(i)]=r}function hV(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Ac(r,s,n)}return Ac(r,e.attrs,n)}function Qm(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ac(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ac(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),cO(t,s,n?!0:e[++o]))}return t===void 0?null:t}function fV(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=nV(l)?Jb(c,e,n,i,qs(l),s):void 0;if(!Ud(u)){Ud(o)||eV(l)&&(o=Jb(c,null,n,i,a,s));let h=MC(Ci(),n);JO(r,s,h,i,o)}}function Jb(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,h=u===null,g=n[i+1];g===mr&&(g=h?On:void 0);let v=h?$m(g,r):u===r?g:void 0;if(l&&!Ud(v)&&(v=$m(c,r)),Ud(v)&&(a=v,s))return a;let w=t[i+1];i=s?So(w):qs(w)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=$m(c,r))}return a}function Ud(t){return t!==void 0}function pV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=yn(hr(t)))),t}function mV(t,e){return(t.flags&(e?8:16))!==0}var jg=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Ym(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function gV(t,e,n){let r,i,o=0,s=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;o<=s&&o<=a;){let c=t.at(o),l=e[o],u=Ym(o,c,o,l,n);if(u!==0){u<0&&t.updateValue(o,l),o++;continue}let h=t.at(s),g=e[a],v=Ym(s,h,a,g,n);if(v!==0){v<0&&t.updateValue(s,g),s--,a--;continue}let w=n(o,c),R=n(s,h),C=n(o,l);if(Object.is(C,R)){let M=n(a,g);Object.is(M,w)?(t.swap(o,s),t.updateValue(s,g),a--,s--):t.move(s,o),t.updateValue(o,l),o++;continue}if(r??=new $d,i??=Xb(t,o,s,n),Ug(t,r,o,C))t.updateValue(o,l),o++,s++;else if(i.has(C))r.set(w,t.detach(o)),s--;else{let M=t.create(o,e[o]);t.attach(o,M),o++,s++}}for(;o<=a;)Zb(t,r,n,o,e[o]),o++}else if(e!=null){let a=e[Symbol.iterator](),c=a.next();for(;!c.done&&o<=s;){let l=t.at(o),u=c.value,h=Ym(o,l,o,u,n);if(h!==0)h<0&&t.updateValue(o,u),o++,c=a.next();else{r??=new $d,i??=Xb(t,o,s,n);let g=n(o,u);if(Ug(t,r,o,g))t.updateValue(o,u),o++,s++,c=a.next();else if(!i.has(g))t.attach(o,t.create(o,u)),o++,s++,c=a.next();else{let v=n(o,l);r.set(v,t.detach(o)),s--}}}for(;!c.done;)Zb(t,r,n,t.length,c.value),c=a.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(a=>{t.destroy(a)})}function Ug(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function Zb(t,e,n,r,i){if(Ug(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function Xb(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var $d=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function z(t,e,n){Ws("NgControlFlow");let r=be(),i=Pc(),o=zg(r,jt+t),s=0;if(Kr(r,i,e)){let a=Ct(null);try{if(uT(o,s),e!==-1){let c=Gg(r[ye],jt+e),l=Dc(o,c.tView.ssrId),u=uh(r,c,n,{dehydratedView:l});dh(o,u,s,Sc(c,l))}}finally{Ct(a)}}else{let a=lT(o,s);a!==void 0&&(a[Ht]=n)}}var $g=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Wt}};function fT(t,e){return e}var Bg=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function at(t,e,n,r,i,o,s,a,c,l,u,h,g){Ws("NgControlFlow");let v=c!==void 0,w=be(),R=a?s.bind(w[Fn][Ht]):s,C=new Bg(v,R);w[jt+t]=C,F(t+1,e,n,r,i,o),v&&F(t+2,c,l,u,h,g)}var qg=class extends jg{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Wt}at(e){return this.getLView(e)[Ht].$implicit}attach(e,n){let r=n[Fs];this.needsIndexUpdate||=e!==this.length,dh(this.lContainer,n,e,Sc(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,vV(this.lContainer,e)}create(e,n){let r=Dc(this.lContainer,this.templateTNode.tView.ssrId);return uh(this.hostLView,this.templateTNode,new $g(this.lContainer,n,e),{dehydratedView:r})}destroy(e){nh(e[ye],e)}updateValue(e,n){this.getLView(e)[Ht].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ht].$index=e}getLView(e){return yV(this.lContainer,e)}};function ct(t){let e=Ct(null),n=Ci();try{let r=be(),i=r[ye],o=r[n];if(o.liveCollection===void 0){let a=n+1,c=zg(r,a),l=Gg(i,a);o.liveCollection=new qg(c,r,l)}else o.liveCollection.reset();let s=o.liveCollection;if(gV(s,t,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){let a=Pc(),c=s.length===0;if(Kr(r,a,c)){let l=n+2,u=zg(r,l);if(c){let h=Gg(i,l),g=Dc(u,h.tView.ssrId),v=uh(r,h,void 0,{dehydratedView:g});dh(u,v,0,Sc(h,g))}else uT(u,0)}}}finally{Ct(e)}}function zg(t,e){return t[e]}function vV(t,e){return Cc(t,e)}function yV(t,e){return lT(t,e)}function Gg(t,e){return s0(t,e)}function _V(t,e,n,r,i,o){let s=e.consts,a=js(s,i),c=Hs(e,t,2,r,a);return N0(e,n,c,js(s,o)),c.attrs!==null&&Vd(c,c.attrs,!1),c.mergedAttrs!==null&&Vd(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function d(t,e,n,r){let i=be(),o=Mt(),s=jt+t,a=i[Tt],c=o.firstCreatePass?_V(s,o,i,e,n,r):o.data[s],l=IV(o,i,c,a,e,t);i[s]=l;let u=Jd(c);return xo(c,!0),D1(a,l,c),(c.flags&32)!==32&&Zd()&&rh(o,i,l,c),Tk()===0&&wi(l,i),Dk(),u&&(x0(o,i,c),A0(o,c,i)),r!==null&&R0(i,c),d}function f(){let t=ln();l0()?u0():(t=t.parent,xo(t,!1));let e=t;Ak(e)&&xk(),Sk();let n=Mt();return n.firstCreatePass&&(eh(n,t),o0(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Gk(e)&&Yb(n,e,be(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Hk(e)&&Yb(n,e,be(),e.stylesWithoutHost,!1),f}function I(t,e,n,r){return d(t,e,n,r),f(),I}var IV=(t,e,n,r,i,o)=>(Xd(!0),v1(r,i,$k()));function wV(t,e,n,r,i){let o=e.consts,s=js(o,r),a=Hs(e,t,8,"ng-container",s);s!==null&&Vd(a,s,!0);let c=js(o,i);return N0(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function Qs(t,e,n){let r=be(),i=Mt(),o=t+jt,s=i.firstCreatePass?wV(o,i,r,e,n):i.data[o];xo(s,!0);let a=EV(i,r,s,t);return r[o]=a,Zd()&&rh(i,r,a,s),wi(a,r),Jd(s)&&(x0(i,r,s),A0(i,s,r)),n!=null&&R0(r,s),Qs}function Ys(){let t=ln(),e=Mt();return l0()?u0():(t=t.parent,xo(t,!1)),e.firstCreatePass&&(eh(e,t),o0(t)&&e.queries.elementEnd(t)),Ys}var EV=(t,e,n,r)=>(Xd(!0),OO(e[Tt],""));function ie(){return be()}var vo=void 0;function bV(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var CV=["en",[["a","p"],["AM","PM"],vo],[["AM","PM"],vo,vo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vo,"{1} 'at' {0}",vo],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",bV],Jm={};function fh(t){let e=TV(t),n=eC(e);if(n)return n;let r=e.split("-")[0];if(n=eC(r),n)return n;if(r==="en")return CV;throw new ee(701,!1)}function eC(t){return t in Jm||(Jm[t]=Cn.ng&&Cn.ng.common&&Cn.ng.common.locales&&Cn.ng.common.locales[t]),Jm[t]}var Mo=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Mo||{});function TV(t){return t.toLowerCase().replace(/_/g,"-")}var Bd="en-US",DV="USD";var SV=Bd;function AV(t){jP(t,"Expected localeId to be defined"),typeof t=="string"&&(SV=t.toLowerCase().replace(/_/g,"-"))}function Si(t){return!!t&&typeof t.then=="function"}function U0(t){return!!t&&typeof t.subscribe=="function"}function L(t,e,n,r){let i=be(),o=Mt(),s=ln();return RV(o,i,i[Tt],s,t,e,r),L}function xV(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[_c],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function RV(t,e,n,r,i,o,s){let a=Jd(r),l=t.firstCreatePass&&nT(t),u=e[Ht],h=tT(e),g=!0;if(r.type&3||s){let R=Vn(r,e),C=s?s(R):R,M=h.length,X=s?ce=>s(lr(ce[r.index])):r.index,Te=null;if(!s&&a&&(Te=xV(t,e,i,r.index)),Te!==null){let ce=Te.__ngLastListenerFn__||Te;ce.__ngNextListenerFn__=o,Te.__ngLastListenerFn__=o,g=!1}else{o=nC(r,e,u,o,!1);let ce=n.listen(C,i,o);h.push(o,ce),l&&l.push(i,X,M,M+1)}}else o=nC(r,e,u,o,!1);let v=r.outputs,w;if(g&&v!==null&&(w=v[i])){let R=w.length;if(R)for(let C=0;C<R;C+=2){let M=w[C],X=w[C+1],Be=e[M][X].subscribe(o),Ve=h.length;h.push(o,Be),l&&l.push(i,r.index,Ve,-(Ve+1))}}}function tC(t,e,n,r){try{return or(6,e,n),n(r)!==!1}catch(i){return rT(t,i),!1}finally{or(7,e,n)}}function nC(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?bi(t.index,e):e;k0(a);let c=tC(e,n,r,s),l=o.__ngNextListenerFn__;for(;l;)c=tC(e,n,l,s)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function E(t=1){return jk(t)}function MV(t,e){let n=null,r=rk(t);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){n=i;continue}if(r===null?vC(t,o,!0):sk(r,o))return i}return n}function ph(t){let e=be()[Fn][Tn];if(!e.projection){let n=t?t.length:1,r=e.projection=sO(n,null),i=r.slice(),o=e.child;for(;o!==null;){let s=t?MV(o,t):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}function Yn(t,e=0,n){let r=be(),i=Mt(),o=Hs(i,jt+t,16,null,n||null);o.projection===null&&(o.projection=e),u0(),(!r[Fs]||FC())&&(o.flags&32)!==32&&QO(i,r,o)}function NV(){return this._results[Symbol.iterator]()}var Hg=class t{get changes(){return this._changes??=new nt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=NV)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=oO(e);(this._changesDetected=!iO(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},Ao=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=OV;let t=e;return t})(),PV=Ao,kV=class extends PV{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=uh(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new Do(i)}};function OV(){return mh(ln(),be())}function mh(t,e){return t.type&4?new kV(e,t,Gs(t,e)):null}var Wg=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Kg=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)vT(e,n).matches!==null&&this.queries[n].setDirty()}},qd=class{constructor(e,n,r=null){this.predicate=e,this.flags=n,this.read=r}},Qg=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Yg=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,FV(n,o)),this.matchTNodeWithReadOption(e,n,wd(n,e,o,!1,!1))}else r===Ao?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,wd(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===_n||i===Ro||i===Ao&&n.type&4)this.addMatch(n.index,-2);else{let o=wd(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function FV(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function VV(t,e){return t.type&11?Gs(t,e):t.type&4?mh(t,e):null}function LV(t,e,n,r){return n===-1?VV(e,t):n===-2?jV(t,e,r):To(t,t[ye],n,e)}function jV(t,e,n){if(n===_n)return Gs(e,t);if(n===Ao)return mh(e,t);if(n===Ro)return hT(e,t)}function pT(t,e,n,r){let i=e[ar].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(LV(e,u,s[c+1],n.metadata.read))}}i.matches=a}return i.matches}function Jg(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=pT(t,e,i,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=e[-c];for(let h=Wt;h<u.length;h++){let g=u[h];g[Mc]===g[Lt]&&Jg(g[ye],g,l,r)}if(u[Ls]!==null){let h=u[Ls];for(let g=0;g<h.length;g++){let v=h[g];Jg(v[ye],v,l,r)}}}}}return r}function UV(t,e){return t[ar].queries[e].queryList}function mT(t,e,n){let r=new Hg((n&4)===4);UF(t,e,r,r.destroy),e[ar]===null&&(e[ar]=new Kg),e[ar].queries.push(new Wg(r))}function gT(t,e,n){t.queries===null&&(t.queries=new Qg),t.queries.track(new Yg(e,n))}function $V(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function vT(t,e){return t.queries.getByIndex(e)}function $0(t,e,n,r){let i=Mt();if(i.firstCreatePass){let o=ln();gT(i,new qd(e,n,r),o.index),$V(i,t),(n&2)===2&&(i.staticContentQueries=!0)}mT(i,be(),n)}function yT(t,e,n){let r=Mt();r.firstCreatePass&&(gT(r,new qd(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),mT(r,be(),e)}function Fc(t){let e=be(),n=Mt(),r=jC();d0(r+1);let i=vT(n,r);if(t.dirty&&Ik(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=i.crossesNgTemplate?Jg(n,e,r,[]):pT(n,e,i,r);t.reset(o,CF),t.notifyOnChanges()}return!0}return!1}function Vc(){return UV(be(),jC())}function BV(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Js(t){let e=Mk();return a0(e,jt+t)}function m(t,e=""){let n=be(),r=Mt(),i=t+jt,o=r.firstCreatePass?Hs(r,i,1,e,null):r.data[i],s=qV(r,n,o,e,t);n[i]=s,Zd()&&rh(r,n,s,o),xo(o,!1)}var qV=(t,e,n,r,i)=>(Xd(!0),PO(e[Tt],r));function Z(t){return O("",t,""),Z}function O(t,e,n){let r=be(),i=Z2(r,t,e,n);return i!==mr&&iT(r,Ci(),i),O}function Lc(t,e,n,r,i){let o=be(),s=X2(o,t,e,n,r,i);return s!==mr&&iT(o,Ci(),s),Lc}function zV(t,e,n){let r=Mt();if(r.firstCreatePass){let i=Ii(t);Zg(n,r.data,r.blueprint,i,!0),Zg(e,r.data,r.blueprint,i,!1)}}function Zg(t,e,n,r,i){if(t=on(t),Array.isArray(t))for(let o=0;o<t.length;o++)Zg(t[o],e,n,r,i);else{let o=Mt(),s=be(),a=ln(),c=$s(t)?t:on(t.provide),l=d1(t),u=a.providerIndexes&1048575,h=a.directiveStart,g=a.providerIndexes>>20;if($s(t)||!t.multi){let v=new Co(l,i,b),w=Xm(c,e,i?u:u+g,h);w===-1?(lg(Md(a,s),o,c),Zm(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),s.push(v)):(n[w]=v,s[w]=v)}else{let v=Xm(c,e,u+g,h),w=Xm(c,e,u,u+g),R=v>=0&&n[v],C=w>=0&&n[w];if(i&&!C||!i&&!R){lg(Md(a,s),o,c);let M=WV(i?HV:GV,n.length,i,r,l);!i&&C&&(n[w].providerFactory=M),Zm(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(M),s.push(M)}else{let M=_T(n[i?w:v],l,!i&&r);Zm(o,t,v>-1?v:w,M)}!i&&r&&C&&n[w].componentProviders++}}}function Zm(t,e,n,r){let i=$s(e),o=fO(e);if(i||o){let c=(o?on(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function _T(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Xm(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function GV(t,e,n,r){return Xg(this.multi,[])}function HV(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=To(n,n[ye],this.providerFactory.index,r);o=a.slice(0,s),Xg(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Xg(i,o);return o}function Xg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function WV(t,e,n,r,i){let o=new Co(t,n,b);return o.multi=[],o.index=e,o.componentProviders=0,_T(o,i,r&&!n),o}function hn(t,e=[]){return n=>{n.providersResolver=(r,i)=>zV(r,i?i(t):t,e)}}var Ei=class{},xc=class{};var e0=class extends Ei{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ld(this);let i=wC(e);this._bootstrapComponents=p1(i.bootstrap),this._r3Injector=h1(e,n,[{provide:Ei,useValue:this},{provide:ah,useValue:this.componentFactoryResolver},...r],yn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},t0=class extends xc{constructor(e){super(),this.moduleType=e}create(e){return new e0(this.moduleType,e,[])}};var zd=class extends Ei{constructor(e){super(),this.componentFactoryResolver=new Ld(this),this.instance=null;let n=new bc([...e.providers,{provide:Ei,useValue:this},{provide:ah,useValue:this.componentFactoryResolver}],e.parent||_0(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function gh(t,e,n=null){return new zd({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var KV=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=c1(!1,r.type),o=i.length>0?gh([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=U({token:e,providedIn:"environment",factory:()=>new e(x(sn))});let t=e;return t})();function ae(t){Ws("NgStandalone"),t.getStandaloneInjector=e=>e.get(KV).getOrCreateStandaloneInjector(t)}function it(t,e,n){let r=Nc()+t,i=be();return i[r]===mr?hh(i,r,n?e.call(n):e()):W2(i,r)}function jc(t,e,n,r){return IT(be(),Nc(),t,e,n,r)}function Ai(t,e,n,r,i){return QV(be(),Nc(),t,e,n,r,i)}function B0(t,e){let n=t[e];return n===mr?void 0:n}function IT(t,e,n,r,i,o){let s=e+n;return Kr(t,s,i)?hh(t,s+1,o?r.call(o,i):r(i)):B0(t,s+1)}function QV(t,e,n,r,i,o,s){let a=e+n;return jd(t,a,i,o)?hh(t,a+2,s?r.call(s,i,o):r(i,o)):B0(t,a+2)}function YV(t,e,n,r,i,o,s,a,c){let l=e+n;return K2(t,l,i,o,s,a)?hh(t,l+4,c?r.call(c,i,o,s,a):r(i,o,s,a)):B0(t,l+4)}function $(t,e){let n=Mt(),r,i=t+jt;n.firstCreatePass?(r=JV(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Eo(r.type,!0)),s,a=vn(b);try{let c=Rd(!1),l=o();return Rd(c),BV(n,be(),i,l),l}finally{vn(a)}}function JV(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function W(t,e,n){let r=t+jt,i=be(),o=a0(i,r);return wT(i,r)?IT(i,Nc(),e,o.transform,n,o):o.transform(n)}function Pt(t,e,n,r,i,o){let s=t+jt,a=be(),c=a0(a,s);return wT(a,s)?YV(a,Nc(),e,c.transform,n,r,i,o,c):c.transform(n,r,i,o)}function wT(t,e){return t[ye].data[e].pure}function Ue(t,e){return mh(t,e)}var Qr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},ET=new Qr("17.1.1");var vh=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),n0=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},yh=(()=>{let e=class e{compileModuleSync(r){return new t0(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=wC(r),s=p1(o.declarations).reduce((a,c)=>{let l=_i(c);return l&&a.push(new Bs(l)),a},[]);return new n0(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Zs=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new le(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var bT=new K("");var Xs=new K("Application Initializer"),CT=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=j(Xs,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Si(s))r.push(s);else if(U0(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Uc=new K("appBootstrapListener");function ZV(){$E(()=>{throw new ee(600,!1)})}function XV(t){return t.isBoundToModule}function eL(t,e,n){try{let r=n();return Si(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var xi=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=j(q1),this.afterRenderEffectManager=j(V0),this.componentTypes=[],this.components=[],this.isStable=j(Zs).hasPendingTasks.pipe(P(r=>!r)),this._injector=j(sn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Od;if(!this._injector.get(CT).done){let v=!o&&IC(r),w=!1;throw new ee(405,w)}let a;o?a=r:a=this._injector.get(ah).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=XV(a)?void 0:this._injector.get(Ei),l=i||a.selector,u=a.create(Dt.NULL,[],l,c),h=u.location.nativeElement,g=u.injector.get(bT,null);return g?.registerApplication(h),u.onDestroy(()=>{this.detachView(u.hostView),eg(this.components,u),g?.unregisterApplication(h)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new ee(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{try{let r=this.afterRenderEffectManager.execute()}catch(r){this.internalErrorHandler(r)}this._runningTick=!1}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;eg(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Uc,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>eg(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new ee(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function eg(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var tL=(()=>{let e=class e{constructor(){this.zone=j(Re),this.applicationRef=j(xi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nL(t){return[{provide:Re,useFactory:t},{provide:Us,multi:!0,useFactory:()=>{let e=j(tL,{optional:!0});return()=>e.initialize()}},{provide:Us,multi:!0,useFactory:()=>{let e=j(sL);return()=>{e.initialize()}}},{provide:q1,useFactory:rL}]}function rL(){let t=j(Re),e=j(ur);return n=>t.runOutsideAngular(()=>e.handleError(n))}function iL(t){let e=nL(()=>new Re(oL(t)));return Ti([[],e])}function oL(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var sL=(()=>{let e=class e{constructor(){this.subscription=new vt,this.initialized=!1,this.zone=j(Re),this.pendingTasks=j(Zs)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Re.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Re.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function aL(){return typeof $localize<"u"&&$localize.locale||Bd}var _h=new K("LocaleId",{providedIn:"root",factory:()=>j(_h,Ce.Optional|Ce.SkipSelf)||aL()}),TT=new K("DefaultCurrencyCode",{providedIn:"root",factory:()=>DV});var DT=new K("PlatformDestroyListeners");var Cd=null;function cL(t=[],e){return Dt.create({name:e,providers:[{provide:th,useValue:"platform"},{provide:DT,useValue:new Set([()=>Cd=null])},...t]})}function lL(t=[]){if(Cd)return Cd;let e=cL(t);return Cd=e,ZV(),uL(e),e}function uL(t){t.get(w0,null)?.forEach(n=>n())}function ST(){return!1}function AT(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=lL(r),o=[iL(),...n||[]],a=new zd({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(Re);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(ur,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:v=>{l.handleError(v)}})});let h=()=>a.destroy(),g=i.get(DT);return g.add(h),a.onDestroy(()=>{u.unsubscribe(),g.delete(h)}),eL(l,c,()=>{let v=a.get(CT);return v.runInitializers(),v.donePromise.then(()=>{let w=a.get(_h,Bd);AV(w||Bd);let R=a.get(xi);return e!==void 0&&R.bootstrap(e),R})})})}catch(e){return Promise.reject(e)}}function ea(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function xT(t){let e=_i(t);if(!e)return null;let n=new Bs(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var H0=null;function ei(){return H0}function OT(t){H0||(H0=t)}var Ih=class{},St=new K("DocumentToken"),J0=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>j(dL),providedIn:"platform"});let t=e;return t})(),FT=new K("Location Initialized"),dL=(()=>{let e=class e extends J0{constructor(){super(),this._doc=j(St),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ei().getBaseHref(this._doc)}onPopState(r){let i=ei().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=ei().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Z0(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function RT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Xr(t){return t&&t[0]!=="?"?"?"+t:t}var ti=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>j(X0),providedIn:"root"});let t=e;return t})(),VT=new K("appBaseHref"),X0=(()=>{let e=class e extends ti{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??j(St).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Z0(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Xr(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Xr(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Xr(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(x(J0),x(VT,8))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),LT=(()=>{let e=class e extends ti{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash;return i==null&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Z0(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Xr(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Xr(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(x(J0),x(VT,8))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),na=(()=>{let e=class e{constructor(r){this._subject=new nt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=pL(RT(MT(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Xr(i))}normalize(r){return e.stripTrailingSlash(fL(this._basePath,MT(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Xr(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Xr(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Xr,e.joinWithSlash=Z0,e.stripTrailingSlash=RT,e.\u0275fac=function(i){return new(i||e)(x(ti))},e.\u0275prov=U({token:e,factory:()=>hL(),providedIn:"root"});let t=e;return t})();function hL(){return new na(x(ti))}function fL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function MT(t){return t.replace(/\/index.html$/,"")}function pL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var jT={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},UT=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(UT||{});var vr=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t.Infinity=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}(vr||{});function $c(t,e){let n=fh(t),r=n[Mo.NumberSymbols][e];if(typeof r>"u"){if(e===vr.CurrencyDecimal)return n[Mo.NumberSymbols][vr.Decimal];if(e===vr.CurrencyGroup)return n[Mo.NumberSymbols][vr.Group]}return r}function mL(t,e){return fh(t)[Mo.NumberFormats][e]}function gL(t){return fh(t)[Mo.Currencies]}function vL(t,e,n="en"){let r=gL(n)[t]||jT[t]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||t}var yL=2;function _L(t){let e,n=jT[t];return n&&(e=n[2]),typeof e=="number"?e:yL}var IL=/^(\d+)?\.((\d+)(-(\d+))?)?$/,NT=22,wh=".",Bc="0",wL=";",EL=",",q0="#",PT="\xA4";function bL(t,e,n,r,i,o,s=!1){let a="",c=!1;if(!isFinite(t))a=$c(n,vr.Infinity);else{let l=SL(t);s&&(l=DL(l));let u=e.minInt,h=e.minFrac,g=e.maxFrac;if(o){let X=o.match(IL);if(X===null)throw new Error(`${o} is not a valid digit info`);let Te=X[1],ce=X[3],Be=X[5];Te!=null&&(u=z0(Te)),ce!=null&&(h=z0(ce)),Be!=null?g=z0(Be):ce!=null&&h>g&&(g=h)}AL(l,h,g);let v=l.digits,w=l.integerLen,R=l.exponent,C=[];for(c=v.every(X=>!X);w<u;w++)v.unshift(0);for(;w<0;w++)v.unshift(0);w>0?C=v.splice(w,v.length):(C=v,v=[0]);let M=[];for(v.length>=e.lgSize&&M.unshift(v.splice(-e.lgSize,v.length).join(""));v.length>e.gSize;)M.unshift(v.splice(-e.gSize,v.length).join(""));v.length&&M.unshift(v.join("")),a=M.join($c(n,r)),C.length&&(a+=$c(n,i)+C.join("")),R&&(a+=$c(n,vr.Exponential)+"+"+R)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function CL(t,e,n,r,i){let o=mL(e,UT.Currency),s=TL(o,$c(e,vr.MinusSign));return s.minFrac=_L(r),s.maxFrac=s.minFrac,bL(t,s,e,vr.CurrencyGroup,vr.CurrencyDecimal,i).replace(PT,n).replace(PT,"").trim()}function TL(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(wL),i=r[0],o=r[1],s=i.indexOf(wh)!==-1?i.split(wh):[i.substring(0,i.lastIndexOf(Bc)+1),i.substring(i.lastIndexOf(Bc)+1)],a=s[0],c=s[1]||"";n.posPre=a.substring(0,a.indexOf(q0));for(let u=0;u<c.length;u++){let h=c.charAt(u);h===Bc?n.minFrac=n.maxFrac=u+1:h===q0?n.maxFrac=u+1:n.posSuf+=h}let l=a.split(EL);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let u=i.length-n.posPre.length-n.posSuf.length,h=o.indexOf(q0);n.negPre=o.substring(0,h).replace(/'/g,""),n.negSuf=o.slice(h+u).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function DL(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function SL(t){let e=Math.abs(t)+"",n=0,r,i,o,s,a;for((i=e.indexOf(wh))>-1&&(e=e.replace(wh,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Bc;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Bc;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>NT&&(r=r.splice(0,NT-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function AL(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let h=s;h<r.length;h++)r[h]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let h=1;h<s;h++)r[h]=0}if(a>=5)if(s-1<0){for(let h=0;h>s;h--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,l=e+t.integerLen,u=r.reduceRight(function(h,g,v,w){return g=g+h,w[v]=g<10?g:g-10,c&&(w[v]===0&&v>=l?w.pop():c=!1),g>=10?1:0},0);u&&(r.unshift(u),t.integerLen++)}function z0(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function Eh(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var G0=/\s+/,kT=[],Ri=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=kT,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(G0):kT}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(G0):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(G0).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(b(_n),b(pr))},e.\u0275dir=qe({type:e,selectors:[["","ngClass",""]],inputs:{klass:[rt.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var $T=(()=>{let e=class e{constructor(r){this._viewContainerRef=r,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(r){if(this._shouldRecreateView(r)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let o=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,o,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(r){return!!r.ngTemplateOutlet||!!r.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(r,i,o)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,o):!1,get:(r,i,o)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,o)}})}};e.\u0275fac=function(i){return new(i||e)(b(Ro))},e.\u0275dir=qe({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[cn]});let t=e;return t})();function ev(t,e){return new ee(2100,!1)}var W0=class{createSubscription(e,n){return S0(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){S0(()=>e.unsubscribe())}},K0=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},xL=new K0,RL=new W0,ze=(()=>{let e=class e{constructor(r){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){return this._obj?r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue:(r&&this._subscribe(r),this._latestValue)}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(Si(r))return xL;if(U0(r))return RL;throw ev(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this._ref.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(b(gr,16))},e.\u0275pipe=Kd({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var Mi=(()=>{let e=class e{transform(r){if(r==null)return null;if(typeof r!="string")throw ev(e,r);return r.toUpperCase()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=Kd({name:"uppercase",type:e,pure:!0,standalone:!0});let t=e;return t})();var Ni=(()=>{let e=class e{constructor(r,i="USD"){this._locale=r,this._defaultCurrencyCode=i}transform(r,i=this._defaultCurrencyCode,o="symbol",s,a){if(!ML(r))return null;a=a||this._locale,typeof o=="boolean"&&(o=o?"symbol":"code");let c=i||this._defaultCurrencyCode;o!=="code"&&(o==="symbol"||o==="symbol-narrow"?c=vL(c,o==="symbol"?"wide":"narrow",a):c=o);try{let l=NL(r);return CL(l,a,c,i,s)}catch(l){throw ev(e,l.message)}}};e.\u0275fac=function(i){return new(i||e)(b(_h,16),b(TT,16))},e.\u0275pipe=Kd({name:"currency",type:e,pure:!0,standalone:!0});let t=e;return t})();function ML(t){return!(t==null||t===""||t!==t)}function NL(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var Ut=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Rt({type:e}),e.\u0275inj=xt({});let t=e;return t})(),tv="browser",PL="server";function bh(t){return t===tv}function nv(t){return t===PL}var BT=(()=>{let e=class e{};e.\u0275prov=U({token:e,providedIn:"root",factory:()=>bh(j(dn))?new Q0(j(St),window):new Y0});let t=e;return t})(),Q0=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=kL(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function kL(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Y0=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},ta=class{};var zc=class{},Th=class{},No=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var iv=class{encodeKey(e){return qT(e)}encodeValue(e){return qT(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function VL(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var LL=/%(\d[a-f0-9])/gi,jL={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function qT(t){return encodeURIComponent(t).replace(LL,(e,n)=>jL[n]??e)}function Ch(t){return`${t}`}var ki=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new iv,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=VL(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Ch):[Ch(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Ch(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Ch(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var ov=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function UL(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function zT(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function GT(t){return typeof Blob<"u"&&t instanceof Blob}function HT(t){return typeof FormData<"u"&&t instanceof FormData}function $L(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var qc=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(UL(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers||(this.headers=new No),this.context||(this.context=new ov),!this.params)this.params=new ki,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:zT(this.body)||GT(this.body)||HT(this.body)||$L(this.body)||typeof this.body=="string"?this.body:this.body instanceof ki?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||HT(this.body)?null:GT(this.body)?this.body.type||null:zT(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ki?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.body!==void 0?e.body:this.body,s=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,a=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,c=e.headers||this.headers,l=e.params||this.params,u=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((h,g)=>h.set(g,e.setHeaders[g]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((h,g)=>h.set(g,e.setParams[g]),l)),new t(n,r,o,{params:l,headers:c,context:u,reportProgress:a,responseType:i,withCredentials:s})}},ra=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(ra||{}),Gc=class{constructor(e,n=Ah.Ok,r="OK"){this.headers=e.headers||new No,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},sv=class t extends Gc{constructor(e={}){super(e),this.type=ra.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Dh=class t extends Gc{constructor(e={}){super(e),this.type=ra.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Sh=class extends Gc{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Ah=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(Ah||{});function rv(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var BL=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof qc)s=r;else{let l;o.headers instanceof No?l=o.headers:l=new No(o.headers);let u;o.params&&(o.params instanceof ki?u=o.params:u=new ki({fromObject:o.params})),s=new qc(r,i,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:u,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=T(s).pipe(kn(l=>this.handler.handle(l)));if(r instanceof qc||o.observe==="events")return a;let c=a.pipe(je(l=>l instanceof Dh));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(P(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(P(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(P(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(P(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new ki().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,rv(o,i))}post(r,i,o={}){return this.request("POST",r,rv(o,i))}put(r,i,o={}){return this.request("PUT",r,rv(o,i))}};e.\u0275fac=function(i){return new(i||e)(x(zc))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})();function qL(t,e){return e(t)}function zL(t,e,n){return(r,i)=>dr(n,()=>e(r,o=>t(o,i)))}var QT=new K(""),GL=new K(""),HL=new K("");var WT=(()=>{let e=class e extends zc{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=j(Zs);let o=j(HL,{optional:!0});this.backend=o??r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(QT),...this.injector.get(GL,[])]));this.chain=o.reduceRight((s,a)=>zL(s,a,this.injector),qL)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(go(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(x(Th),x(sn))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})();var WL=/^\)\]\}',?\n/;function KL(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var KT=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new ee(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?te(i.\u0275loadImpl()):T(null)).pipe(V(()=>new de(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((C,M)=>a.setRequestHeader(C,M.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let C=r.detectContentTypeHeader();C!==null&&a.setRequestHeader("Content-Type",C)}if(r.responseType){let C=r.responseType.toLowerCase();a.responseType=C!=="json"?C:"text"}let c=r.serializeBody(),l=null,u=()=>{if(l!==null)return l;let C=a.statusText||"OK",M=new No(a.getAllResponseHeaders()),X=KL(a)||r.url;return l=new sv({headers:M,status:a.status,statusText:C,url:X}),l},h=()=>{let{headers:C,status:M,statusText:X,url:Te}=u(),ce=null;M!==Ah.NoContent&&(ce=typeof a.response>"u"?a.responseText:a.response),M===0&&(M=ce?Ah.Ok:0);let Be=M>=200&&M<300;if(r.responseType==="json"&&typeof ce=="string"){let Ve=ce;ce=ce.replace(WL,"");try{ce=ce!==""?JSON.parse(ce):null}catch(nn){ce=Ve,Be&&(Be=!1,ce={error:nn,text:ce})}}Be?(s.next(new Dh({body:ce,headers:C,status:M,statusText:X,url:Te||void 0})),s.complete()):s.error(new Sh({error:ce,headers:C,status:M,statusText:X,url:Te||void 0}))},g=C=>{let{url:M}=u(),X=new Sh({error:C,status:a.status||0,statusText:a.statusText||"Unknown Error",url:M||void 0});s.error(X)},v=!1,w=C=>{v||(s.next(u()),v=!0);let M={type:ra.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(M.total=C.total),r.responseType==="text"&&a.responseText&&(M.partialText=a.responseText),s.next(M)},R=C=>{let M={type:ra.UploadProgress,loaded:C.loaded};C.lengthComputable&&(M.total=C.total),s.next(M)};return a.addEventListener("load",h),a.addEventListener("error",g),a.addEventListener("timeout",g),a.addEventListener("abort",g),r.reportProgress&&(a.addEventListener("progress",w),c!==null&&a.upload&&a.upload.addEventListener("progress",R)),a.send(c),s.next({type:ra.Sent}),()=>{a.removeEventListener("error",g),a.removeEventListener("abort",g),a.removeEventListener("load",h),a.removeEventListener("timeout",g),r.reportProgress&&(a.removeEventListener("progress",w),c!==null&&a.upload&&a.upload.removeEventListener("progress",R)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(x(ta))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),YT=new K("XSRF_ENABLED"),QL="XSRF-TOKEN",YL=new K("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>QL}),JL="X-XSRF-TOKEN",ZL=new K("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>JL}),xh=class{},XL=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Eh(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(x(St),x(dn),x(YL))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})();function ej(t,e){let n=t.url.toLowerCase();if(!j(YT)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=j(xh).getToken(),i=j(ZL);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function JT(...t){let e=[BL,KT,WT,{provide:zc,useExisting:WT},{provide:Th,useExisting:KT},{provide:QT,useValue:ej,multi:!0},{provide:YT,useValue:!0},{provide:xh,useClass:XL}];for(let n of t)e.push(...n.\u0275providers);return Ti(e)}var lv=class extends Ih{constructor(){super(...arguments),this.supportsDOMEvents=!0}},uv=class t extends lv{static makeCurrent(){OT(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=tj();return n==null?null:nj(n)}resetBaseElement(){Hc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Eh(document.cookie,e)}},Hc=null;function tj(){return Hc=Hc||document.querySelector("base"),Hc?Hc.getAttribute("href"):null}function nj(t){return new URL(t,document.baseURI).pathname}var rj=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),dv=new K("EventManagerPlugins"),tD=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new ee(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(x(dv),x(Re))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),Rh=class{constructor(e){this._doc=e}},av="ng-app-id",nD=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=nv(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${av}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(av),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(av,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(x(St),x(I0),x(E0,8),x(dn))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),cv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},fv=/%COMP%/g,rD="%COMP%",ij=`_nghost-${rD}`,oj=`_ngcontent-${rD}`,sj=!0,aj=new K("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>sj});function cj(t){return oj.replace(fv,t)}function lj(t){return ij.replace(fv,t)}function iD(t,e){return e.map(n=>n.replace(fv,t))}var ZT=(()=>{let e=class e{constructor(r,i,o,s,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=nv(c),this.defaultRenderer=new Wc(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===cr.ShadowDom&&(i=Ne(A({},i),{encapsulation:cr.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof Mh?o.applyToHost(r):o instanceof Kc&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case cr.Emulated:s=new Mh(l,u,i,this.appId,h,a,c,g);break;case cr.ShadowDom:return new hv(l,u,r,i,a,c,this.nonce,g);default:s=new Kc(l,u,i,h,a,c,g);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(x(tD),x(nD),x(I0),x(aj),x(St),x(dn),x(Re),x(E0))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),Wc=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(cv[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(XT(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(XT(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ee(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=cv[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=cv[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Hr.DashCase|Hr.Important)?e.style.setProperty(n,r,i&Hr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Hr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=ei().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function XT(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var hv=class extends Wc{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=iD(i.id,i.styles);for(let u of l){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Kc=class extends Wc{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?iD(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Mh=class extends Kc{constructor(e,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,n,r,o,s,a,c,l),this.contentAttr=cj(l),this.hostAttr=lj(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},uj=(()=>{let e=class e extends Rh{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(x(St))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),eD=["alt","control","meta","shift"],dj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hj={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},fj=(()=>{let e=class e extends Rh{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ei().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),eD.forEach(u=>{let h=i.indexOf(u);h>-1&&(i.splice(h,1),a+=u+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=dj[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),eD.forEach(a=>{if(a!==o){let c=hj[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(x(St))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})();function oD(t,e){return AT(A({rootComponent:t},pj(e)))}function pj(t){return{appProviders:[..._j,...t?.providers??[]],platformProviders:yj}}function mj(){uv.makeCurrent()}function gj(){return new ur}function vj(){return f1(document),document}var yj=[{provide:dn,useValue:tv},{provide:w0,useValue:mj,multi:!0},{provide:St,useFactory:vj,deps:[]}];var _j=[{provide:th,useValue:"root"},{provide:ur,useFactory:gj,deps:[]},{provide:dv,useClass:uj,multi:!0,deps:[St,Re,dn]},{provide:dv,useClass:fj,multi:!0,deps:[St]},ZT,nD,tD,{provide:Tc,useExisting:ZT},{provide:ta,useClass:rj,deps:[]},[]];function Ij(){return new pv(x(St))}var pv=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(x(St))},e.\u0275prov=U({token:e,factory:function(i){let o=null;return i?o=new i:o=Ij(),o},providedIn:"root"});let t=e;return t})();var mv=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:function(i){let o=null;return i?o=new(i||e):o=x(sD),o},providedIn:"root"});let t=e;return t})();function wj(t){return new sD(t.get(St))}var sD=(()=>{let e=class e extends mv{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case fr.NONE:return i;case fr.HTML:return Di(i,"HTML")?hr(i):F1(this._doc,String(i)).toString();case fr.STYLE:return Di(i,"Style")?hr(i):i;case fr.SCRIPT:if(Di(i,"Script"))return hr(i);throw new ee(5200,!1);case fr.URL:return Di(i,"URL")?hr(i):sh(String(i));case fr.RESOURCE_URL:if(Di(i,"ResourceURL"))return hr(i);throw new ee(5201,!1);default:throw new ee(5202,!1)}}bypassSecurityTrustHtml(r){return S1(r)}bypassSecurityTrustStyle(r){return A1(r)}bypassSecurityTrustScript(r){return x1(r)}bypassSecurityTrustUrl(r){return R1(r)}bypassSecurityTrustResourceUrl(r){return M1(r)}};e.\u0275fac=function(i){return new(i||e)(x(St))},e.\u0275prov=U({token:e,factory:function(i){let o=null;return i?o=new i:o=wj(x(Dt)),o},providedIn:"root"});let t=e;return t})();var Ee="primary",ul=Symbol("RouteTitle"),Iv=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ca(t){return new Iv(t)}function Ej(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function bj(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!yr(t[n],e[n]))return!1;return!0}function yr(t,e){let n=t?wv(t):void 0,r=e?wv(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!gD(t[i],e[i]))return!1;return!0}function wv(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function gD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function vD(t){return t.length>0?t[t.length-1]:null}function Li(t){return Nm(t)?t:Si(t)?te(Promise.resolve(t)):T(t)}var Cj={exact:_D,subset:ID},yD={exact:Tj,subset:Dj,ignored:()=>!0};function cD(t,e,n){return Cj[n.paths](t.root,e.root,n.matrixParams)&&yD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Tj(t,e){return yr(t,e)}function _D(t,e,n){if(!ko(t.segments,e.segments)||!kh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!_D(t.children[r],e.children[r],n))return!1;return!0}function Dj(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>gD(t[n],e[n]))}function ID(t,e,n){return wD(t,e,e.segments,n)}function wD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ko(i,n)||e.hasChildren()||!kh(i,n,r))}else if(t.segments.length===n.length){if(!ko(t.segments,n)||!kh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!ID(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ko(t.segments,i)||!kh(t.segments,i,r)||!t.children[Ee]?!1:wD(t.children[Ee],e,o,r)}}function kh(t,e,n){return e.every((r,i)=>yD[n](t[i].parameters,r.parameters))}var Oi=class{constructor(e=new Le([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ca(this.queryParams),this._queryParamMap}toString(){return xj.serialize(this)}},Le=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Oh(this)}},Po=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ca(this.parameters),this._parameterMap}toString(){return bD(this)}};function Sj(t,e){return ko(t,e)&&t.every((n,r)=>yr(n.parameters,e[r].parameters))}function ko(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Aj(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ee&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ee&&(n=n.concat(e(i,r)))}),n}var dl=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>new tl,providedIn:"root"});let t=e;return t})(),tl=class{parse(e){let n=new bv(e);return new Oi(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Qc(e.root,!0)}`,r=Nj(e.queryParams),i=typeof e.fragment=="string"?`#${Rj(e.fragment)}`:"";return`${n}${r}${i}`}},xj=new tl;function Oh(t){return t.segments.map(e=>bD(e)).join("/")}function Qc(t,e){if(!t.hasChildren())return Oh(t);if(e){let n=t.children[Ee]?Qc(t.children[Ee],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Ee&&r.push(`${i}:${Qc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Aj(t,(r,i)=>i===Ee?[Qc(t.children[Ee],!1)]:[`${i}:${Qc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Ee]!=null?`${Oh(t)}/${n[0]}`:`${Oh(t)}/(${n.join("//")})`}}function ED(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nh(t){return ED(t).replace(/%3B/gi,";")}function Rj(t){return encodeURI(t)}function Ev(t){return ED(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fh(t){return decodeURIComponent(t)}function lD(t){return Fh(t.replace(/\+/g,"%20"))}function bD(t){return`${Ev(t.path)}${Mj(t.parameters)}`}function Mj(t){return Object.entries(t).map(([e,n])=>`;${Ev(e)}=${Ev(n)}`).join("")}function Nj(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Nh(n)}=${Nh(i)}`).join("&"):`${Nh(n)}=${Nh(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Pj=/^[^\/()?;#]+/;function gv(t){let e=t.match(Pj);return e?e[0]:""}var kj=/^[^\/()?;=#]+/;function Oj(t){let e=t.match(kj);return e?e[0]:""}var Fj=/^[^=?&#]+/;function Vj(t){let e=t.match(Fj);return e?e[0]:""}var Lj=/^[^&#]+/;function jj(t){let e=t.match(Lj);return e?e[0]:""}var bv=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Le([],{}):new Le([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ee]=new Le(e,n)),r}parseSegment(){let e=gv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ee(4009,!1);return this.capture(e),new Po(Fh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Oj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=gv(this.remaining);i&&(r=i,this.capture(r))}e[Fh(n)]=Fh(r)}parseQueryParam(e){let n=Vj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=jj(this.remaining);s&&(r=s,this.capture(r))}let i=lD(n),o=lD(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=gv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ee(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ee);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[Ee]:new Le([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ee(4011,!1)}};function CD(t){return t.segments.length>0?new Le([],{[Ee]:t}):t}function TD(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=TD(i);if(r===Ee&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Le(t.segments,e);return Uj(n)}function Uj(t){if(t.numberOfChildren===1&&t.children[Ee]){let e=t.children[Ee];return new Le(t.segments.concat(e.segments),e.children)}return t}function la(t){return t instanceof Oi}function $j(t,e,n=null,r=null){let i=DD(t);return SD(i,e,n,r)}function DD(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new Le(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=CD(r);return e??i}function SD(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return vv(i,i,i,n,r);let o=Bj(e);if(o.toRoot())return vv(i,i,new Le([],{}),n,r);let s=qj(o,i,t),a=s.processChildren?Zc(s.segmentGroup,s.index,o.commands):xD(s.segmentGroup,s.index,o.commands);return vv(i,s.segmentGroup,a,n,r)}function Vh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function nl(t){return typeof t=="object"&&t!=null&&t.outlets}function vv(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;t===e?s=n:s=AD(t,e,n);let a=CD(TD(s));return new Oi(a,o,i)}function AD(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=AD(o,e,n)}),new Le(t.segments,r)}var Lh=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Vh(r[0]))throw new ee(4003,!1);let i=r.find(nl);if(i&&i!==vD(r))throw new ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Bj(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Lh(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Lh(n,e,r)}var sa=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function qj(t,e,n){if(t.isAbsolute)return new sa(e,!0,0);if(!n)return new sa(e,!1,NaN);if(n.parent===null)return new sa(n,!0,0);let r=Vh(t.commands[0])?0:1,i=n.segments.length-1+r;return zj(n,i,t.numberOfDoubleDots)}function zj(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ee(4005,!1);i=r.segments.length}return new sa(r,!1,i-o)}function Gj(t){return nl(t[0])?t[0].outlets:{[Ee]:t}}function xD(t,e,n){if(t??=new Le([],{}),t.segments.length===0&&t.hasChildren())return Zc(t,e,n);let r=Hj(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Le(t.segments.slice(0,r.pathIndex),{});return o.children[Ee]=new Le(t.segments.slice(r.pathIndex),t.children),Zc(o,0,i)}else return r.match&&i.length===0?new Le(t.segments,{}):r.match&&!t.hasChildren()?Cv(t,e,n):r.match?Zc(t,0,i):Cv(t,e,n)}function Zc(t,e,n){if(n.length===0)return new Le(t.segments,{});{let r=Gj(n),i={};if(Object.keys(r).some(o=>o!==Ee)&&t.children[Ee]&&t.numberOfChildren===1&&t.children[Ee].segments.length===0){let o=Zc(t.children[Ee],e,n);return new Le(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=xD(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Le(t.segments,i)}}function Hj(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(nl(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!dD(c,l,s))return o;r+=2}else{if(!dD(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Cv(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(nl(o)){let c=Wj(o.outlets);return new Le(r,c)}if(i===0&&Vh(n[0])){let c=t.segments[e];r.push(new Po(c.path,uD(n[0]))),i++;continue}let s=nl(o)?o.outlets[Ee]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Vh(a)?(r.push(new Po(s,uD(a))),i+=2):(r.push(new Po(s,{})),i++)}return new Le(r,{})}function Wj(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Cv(new Le([],{}),0,r))}),e}function uD(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function dD(t,e,n){return t==n.path&&yr(e,n.parameters)}var Xc="imperative",kt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(kt||{}),jn=class{constructor(e,n){this.id=e,this.url=n}},ua=class extends jn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=kt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},_r=class extends jn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=kt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ln=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ln||{}),jh=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(jh||{}),Fi=class extends jn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=kt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Vi=class extends jn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=kt.NavigationSkipped}},rl=class extends jn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=kt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Uh=class extends jn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=kt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tv=class extends jn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=kt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dv=class extends jn{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=kt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Sv=class extends jn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=kt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Av=class extends jn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=kt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xv=class{constructor(e){this.route=e,this.type=kt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Rv=class{constructor(e){this.route=e,this.type=kt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Mv=class{constructor(e){this.snapshot=e,this.type=kt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nv=class{constructor(e){this.snapshot=e,this.type=kt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pv=class{constructor(e){this.snapshot=e,this.type=kt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kv=class{constructor(e){this.snapshot=e,this.type=kt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$h=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=kt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},il=class{},ol=class{constructor(e){this.url=e}};var Ov=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new hl,this.attachRef=null}},hl=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Ov,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Bh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Fv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Fv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Vv(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Vv(e,this._root).map(n=>n.value)}};function Fv(t,e){if(t===e.value)return e;for(let n of e.children){let r=Fv(t,n);if(r)return r}return null}function Vv(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Vv(t,n);if(r.length)return r.unshift(e),r}return[]}var Dn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function oa(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var qh=class extends Bh{constructor(e,n){super(e),this.snapshot=n,Wv(this,e)}toString(){return this.snapshot.toString()}};function RD(t){let e=Kj(t),n=new le([new Po("",{})]),r=new le({}),i=new le({}),o=new le({}),s=new le(""),a=new Ir(n,r,o,s,i,Ee,t,e.root);return a.snapshot=e.root,new qh(new Dn(a,[]),e)}function Kj(t){let e={},n={},r={},i="",o=new sl([],e,r,i,n,Ee,t,null,{});return new zh("",new Dn(o,[]))}var Ir=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(P(l=>l[ul]))??T(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(P(e=>ca(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(P(e=>ca(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Hv(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:A(A({},e.params),t.params),data:A(A({},e.data),t.data),resolve:A(A(A(A({},t.data),e.data),i?.data),t._resolvedData)}:r={params:A({},t.params),data:A({},t.data),resolve:A(A({},t.data),t._resolvedData??{})},i&&ND(i)&&(r.resolve[ul]=i.title),r}var sl=class{get title(){return this.data?.[ul]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ca(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ca(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},zh=class extends Bh{constructor(e,n){super(n),this.url=e,Wv(this,n)}toString(){return MD(this._root)}};function Wv(t,e){e.value._routerState=t,e.children.forEach(n=>Wv(t,n))}function MD(t){let e=t.children.length>0?` { ${t.children.map(MD).join(", ")} } `:"";return`${t.value}${e}`}function yv(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,yr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),yr(e.params,n.params)||t.paramsSubject.next(n.params),bj(e.url,n.url)||t.urlSubject.next(n.url),yr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Lv(t,e){let n=yr(t.params,e.params)&&Sj(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Lv(t.parent,e.parent))}function ND(t){return typeof t.title=="string"||t.title===null}var Oo=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ee,this.activateEvents=new nt,this.deactivateEvents=new nt,this.attachEvents=new nt,this.detachEvents=new nt,this.parentContexts=j(hl),this.location=j(Ro),this.changeDetector=j(gr),this.environmentInjector=j(sn),this.inputBinder=j(Kh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ee(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new ee(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new jv(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=qe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[cn]});let t=e;return t})(),jv=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Ir?this.route:e===hl?this.childContexts:this.parent.get(e,n)}},Kh=new K(""),hD=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=dc([i.queryParams,i.params,i.data]).pipe(V(([s,a,c],l)=>(c=A(A(A({},s),a),c),l===0?T(c):Promise.resolve(c)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=xT(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})();function Qj(t,e,n){let r=al(t,e._root,n?n._root:void 0);return new qh(r,e)}function al(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Yj(t,e,n);return new Dn(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>al(t,a)),s}}let r=Jj(e.value),i=e.children.map(o=>al(t,o));return new Dn(r,i)}}function Yj(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return al(t,r,i);return al(t,r)})}function Jj(t){return new Ir(new le(t.url),new le(t.params),new le(t.queryParams),new le(t.fragment),new le(t.data),t.outlet,t.component,t)}var PD="ngNavigationCancelingError";function kD(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=la(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=OD(!1,Ln.Redirect,e);return i.url=n,i.navigationBehaviorOptions=r,i}function OD(t,e,n){let r=new Error("NavigationCancelingError: "+(t||""));return r[PD]=!0,r.cancellationCode=e,n&&(r.url=n),r}function Zj(t){return FD(t)&&la(t.url)}function FD(t){return t&&t[PD]}var Xj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=se({type:e,selectors:[["ng-component"]],standalone:!0,features:[ae],decls:1,vars:0,template:function(i,o){i&1&&I(0,"router-outlet")},dependencies:[Oo],encapsulation:2});let t=e;return t})();function e3(t,e){return t.providers&&!t._injector&&(t._injector=gh(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Kv(t){let e=t.children&&t.children.map(Kv),n=e?Ne(A({},t),{children:e}):A({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ee&&(n.component=Xj),n}function wr(t){return t.outlet||Ee}function t3(t,e){let n=t.filter(r=>wr(r)===e);return n.push(...t.filter(r=>wr(r)!==e)),n}function fl(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var n3=(t,e,n,r)=>P(i=>(new Uv(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Uv=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),yv(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=oa(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=oa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=oa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=oa(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new kv(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Nv(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(yv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),yv(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=fl(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},Gh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},aa=class{constructor(e,n){this.component=e,this.route=n}};function r3(t,e,n){let r=t._root,i=e?e._root:null;return Yc(r,i,n,[r.value])}function i3(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ha(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!sC(t)?t:e.get(t):r}function Yc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=oa(e);return t.children.forEach(s=>{o3(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>el(a,n.getContext(s),i)),i}function o3(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=s3(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Gh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Yc(t,e,a?a.children:null,r,i):Yc(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new aa(a.outlet.component,s))}else s&&el(e,a,i),i.canActivateChecks.push(new Gh(r)),o.component?Yc(t,null,a?a.children:null,r,i):Yc(t,null,n,r,i);return i}function s3(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ko(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ko(t.url,e.url)||!yr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Lv(t,e)||!yr(t.queryParams,e.queryParams);case"paramsChange":default:return!Lv(t,e)}}function el(t,e,n){let r=oa(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?el(s,e.children.getContext(o),n):el(s,null,n):el(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new aa(e.outlet.component,i)):n.canDeactivateChecks.push(new aa(null,i)):n.canDeactivateChecks.push(new aa(null,i))}function pl(t){return typeof t=="function"}function a3(t){return typeof t=="boolean"}function c3(t){return t&&pl(t.canLoad)}function l3(t){return t&&pl(t.canActivate)}function u3(t){return t&&pl(t.canActivateChild)}function d3(t){return t&&pl(t.canDeactivate)}function h3(t){return t&&pl(t.canMatch)}function VD(t){return t instanceof qr||t?.name==="EmptyError"}var Ph=Symbol("INITIAL_VALUE");function da(){return V(t=>dc(t.map(e=>e.pipe(H(1),bn(Ph)))).pipe(P(e=>{for(let n of e)if(n!==!0){if(n===Ph)return Ph;if(n===!1||n instanceof Oi)return n}return!0}),je(e=>e!==Ph),H(1)))}function f3(t,e){return xe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?T(Ne(A({},n),{guardsResult:!0})):p3(s,r,i,t).pipe(xe(a=>a&&a3(a)?m3(r,o,t,e):T(a)),P(a=>Ne(A({},n),{guardsResult:a})))})}function p3(t,e,n,r){return te(t).pipe(xe(i=>I3(i.component,i.route,n,e,r)),Gt(i=>i!==!0,!0))}function m3(t,e,n,r){return te(e).pipe(kn(i=>rr(v3(i.route.parent,r),g3(i.route,r),_3(t,i.path,n),y3(t,i.route,n))),Gt(i=>i!==!0,!0))}function g3(t,e){return t!==null&&e&&e(new Pv(t)),T(!0)}function v3(t,e){return t!==null&&e&&e(new Mv(t)),T(!0)}function y3(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return T(!0);let i=r.map(o=>fo(()=>{let s=fl(e)??n,a=ha(o,s),c=l3(a)?a.canActivate(e,t):dr(s,()=>a(e,t));return Li(c).pipe(Gt())}));return T(i).pipe(da())}function _3(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>i3(s)).filter(s=>s!==null).map(s=>fo(()=>{let a=s.guards.map(c=>{let l=fl(s.node)??n,u=ha(c,l),h=u3(u)?u.canActivateChild(r,t):dr(l,()=>u(r,t));return Li(h).pipe(Gt())});return T(a).pipe(da())}));return T(o).pipe(da())}function I3(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return T(!0);let s=o.map(a=>{let c=fl(e)??i,l=ha(a,c),u=d3(l)?l.canDeactivate(t,e,n,r):dr(c,()=>l(t,e,n,r));return Li(u).pipe(Gt())});return T(s).pipe(da())}function w3(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return T(!0);let o=i.map(s=>{let a=ha(s,t),c=c3(a)?a.canLoad(e,n):dr(t,()=>a(e,n));return Li(c)});return T(o).pipe(da(),LD(r))}function LD(t){return Uu(S(e=>{if(la(e))throw kD(t,e)}),P(e=>e===!0))}function E3(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return T(!0);let o=i.map(s=>{let a=ha(s,t),c=h3(a)?a.canMatch(e,n):dr(t,()=>a(e,n));return Li(c)});return T(o).pipe(da(),LD(r))}var cl=class{constructor(e){this.segmentGroup=e||null}},Hh=class extends Error{constructor(e){super(),this.urlTree=e}};function ia(t){return zt(new cl(t))}function b3(t){return zt(new ee(4e3,!1))}function C3(t){return zt(OD(!1,Ln.GuardRejected))}var $v=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return T(r);if(i.numberOfChildren>1||!i.children[Ee])return b3(e.redirectTo);i=i.children[Ee]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Hh(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Oi(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Le(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new ee(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Bv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function T3(t,e,n,r,i){let o=Qv(t,e,n);return o.matched?(r=e3(e,r),E3(r,e,n,i).pipe(P(s=>s===!0?o:A({},Bv)))):T(o)}function Qv(t,e,n){if(e.path==="**")return D3(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?A({},Bv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Ej)(n,t,e);if(!i)return A({},Bv);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?A(A({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function D3(t){return{matched:!0,parameters:t.length>0?vD(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function fD(t,e,n,r){return n.length>0&&x3(t,n,r)?{segmentGroup:new Le(e,A3(r,new Le(n,t.children))),slicedSegments:[]}:n.length===0&&R3(t,n,r)?{segmentGroup:new Le(t.segments,S3(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Le(t.segments,t.children),slicedSegments:n}}function S3(t,e,n,r){let i={};for(let o of n)if(Qh(t,e,o)&&!r[wr(o)]){let s=new Le([],{});i[wr(o)]=s}return A(A({},r),i)}function A3(t,e){let n={};n[Ee]=e;for(let r of t)if(r.path===""&&wr(r)!==Ee){let i=new Le([],{});n[wr(r)]=i}return n}function x3(t,e,n){return n.some(r=>Qh(t,e,r)&&wr(r)!==Ee)}function R3(t,e,n){return n.some(r=>Qh(t,e,r))}function Qh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function M3(t,e,n,r){return wr(t)!==r&&(r===Ee||!Qh(e,n,t))?!1:Qv(e,t,n).matched}function N3(t,e,n){return e.length===0&&!t.children[n]}var qv=class{};function P3(t,e,n,r,i,o,s="emptyOnly"){return new zv(t,e,n,r,i,s,o).recognize()}var k3=31,zv=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new $v(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ee(4002,`'${e.segmentGroup}'`)}recognize(){let e=fD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(P(n=>{let r=new sl([],Object.freeze({}),Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ee,this.rootComponentType,null,{}),i=new Dn(r,n),o=new zh("",i),s=$j(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Ee).pipe(ke(r=>{if(r instanceof Hh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof cl?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Hv(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(P(o=>o instanceof Dn?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return te(i).pipe(kn(o=>{let s=r.children[o],a=t3(n,o);return this.processSegmentGroup(e,a,s,o)}),hd((o,s)=>(o.push(...s),o)),gi(null),km(),xe(o=>{if(o===null)return ia(r);let s=jD(o);return O3(s),T(s)}))}processSegment(e,n,r,i,o,s){return te(n).pipe(kn(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(ke(c=>{if(c instanceof cl)return T(null);throw c}))),Gt(a=>!!a),ke(a=>{if(VD(a))return N3(r,i,o)?T(new qv):ia(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return M3(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):ia(i):ia(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=Qv(n,i,o);if(!a)return ia(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>k3&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,h).pipe(xe(g=>this.processSegment(e,r,n,g.concat(u),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=T3(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(V(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(V(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:h,parameters:g}=a,v=new sl(u,g,Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,V3(r),wr(r),r.component??r._loadedComponent??null,r,L3(r)),{segmentGroup:w,slicedSegments:R}=fD(n,u,h,c);if(R.length===0&&w.hasChildren())return this.processChildren(l,c,w).pipe(P(M=>M===null?null:new Dn(v,M)));if(c.length===0&&R.length===0)return T(new Dn(v,[]));let C=wr(r)===o;return this.processSegment(l,c,w,R,C?Ee:o,!0).pipe(P(M=>new Dn(v,M instanceof Dn?[M]:[])))}))):ia(n)))}getChildConfig(e,n,r){return n.children?T({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?T({routes:n._loadedRoutes,injector:n._loadedInjector}):w3(e,n,r,this.urlSerializer).pipe(xe(i=>i?this.configLoader.loadChildren(e,n).pipe(S(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):C3(n))):T({routes:[],injector:e})}};function O3(t){t.sort((e,n)=>e.value.outlet===Ee?-1:n.value.outlet===Ee?1:e.value.outlet.localeCompare(n.value.outlet))}function F3(t){let e=t.value.routeConfig;return e&&e.path===""}function jD(t){let e=[],n=new Set;for(let r of t){if(!F3(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=jD(r.children);e.push(new Dn(r.value,i))}return e.filter(r=>!n.has(r))}function V3(t){return t.data||{}}function L3(t){return t.resolve||{}}function j3(t,e,n,r,i,o){return xe(s=>P3(t,e,n,r,s.extractedUrl,i,o).pipe(P(({state:a,tree:c})=>Ne(A({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function U3(t,e){return xe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return T(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of UD(c))s.add(l);let a=0;return te(s).pipe(kn(c=>o.has(c)?$3(c,r,t,e):(c.data=Hv(c,c.parent,t).resolve,T(void 0))),S(()=>a++),Ss(1),xe(c=>a===s.size?T(n):mn))})}function UD(t){let e=t.children.map(n=>UD(n)).flat();return[t,...e]}function $3(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!ND(i)&&(o[ul]=i.title),B3(o,t,e,r).pipe(P(s=>(t._resolvedData=s,t.data=Hv(t,t.parent,n).resolve,null)))}function B3(t,e,n,r){let i=wv(t);if(i.length===0)return T({});let o={};return te(i).pipe(xe(s=>q3(t[s],e,n,r).pipe(Gt(),S(a=>{o[s]=a}))),Ss(1),pc(o),ke(s=>VD(s)?mn:zt(s)))}function q3(t,e,n,r){let i=fl(e)??r,o=ha(t,i),s=o.resolve?o.resolve(e,n):dr(i,()=>o(e,n));return Li(s)}function _v(t){return V(e=>{let n=t(e);return n?te(n).pipe(P(()=>e)):T(e)})}var $D=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===Ee);return i}getResolvedTitleForRoute(r){return r.data[ul]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>j(z3),providedIn:"root"});let t=e;return t})(),z3=(()=>{let e=class e extends $D{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(x(pv))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),fa=new K("",{providedIn:"root",factory:()=>({})}),ll=new K("ROUTES"),Yv=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(yh)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return T(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Li(r.loadComponent()).pipe(P(BD),S(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),go(()=>{this.componentLoaders.delete(r)})),o=new hi(i,()=>new Pe).pipe(_s());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return T({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=G3(i,this.compiler,r,this.onLoadEndListener).pipe(go(()=>{this.childrenLoaders.delete(i)})),a=new hi(s,()=>new Pe).pipe(_s());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function G3(t,e,n,r){return Li(t.loadChildren()).pipe(P(BD),xe(i=>i instanceof xc||Array.isArray(i)?T(i):te(e.compileModuleAsync(i))),P(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(ll,[],{optional:!0,self:!0}).flat()),{routes:s.map(Kv),injector:o}}))}function H3(t){return t&&typeof t=="object"&&"default"in t}function BD(t){return H3(t)?t.default:t}var Jv=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>j(W3),providedIn:"root"});let t=e;return t})(),W3=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qD=new K(""),zD=new K("");function K3(t,e,n){let r=t.get(zD),i=t.get(St);return t.get(Re).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),Q3(t))),{onViewTransitionCreated:c}=r;return c&&dr(t,()=>c({transition:a,from:e,to:n})),s})}function Q3(t){return new Promise(e=>{F0(e,{injector:t})})}var Zv=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Pe,this.transitionAbortSubject=new Pe,this.configLoader=j(Yv),this.environmentInjector=j(sn),this.urlSerializer=j(dl),this.rootContexts=j(hl),this.location=j(na),this.inputBindingEnabled=j(Kh,{optional:!0})!==null,this.titleStrategy=j($D),this.options=j(fa,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(Jv),this.createViewTransition=j(qD,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>T(void 0),this.rootComponentType=null;let r=o=>this.events.next(new xv(o)),i=o=>this.events.next(new Rv(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Ne(A(A({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new le({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Xc,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(je(s=>s.id!==0),P(s=>Ne(A({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),V(s=>{this.currentTransition=s;let a=!1,c=!1;return T(s).pipe(S(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Ne(A({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),V(l=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&h!=="reload"){let g="";return this.events.next(new Vi(l.id,this.urlSerializer.serialize(l.rawUrl),g,jh.IgnoredSameUrlNavigation)),l.resolve(null),mn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return T(l).pipe(V(g=>{let v=this.transitions?.getValue();return this.events.next(new ua(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),v!==this.transitions?.getValue()?mn:Promise.resolve(g)}),j3(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),S(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=Ne(A({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let v=new Uh(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(v)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:g,extractedUrl:v,source:w,restoredState:R,extras:C}=l,M=new ua(g,this.urlSerializer.serialize(v),w,R);this.events.next(M);let X=RD(this.rootComponentType).snapshot;return this.currentTransition=s=Ne(A({},l),{targetSnapshot:X,urlAfterRedirects:v,extras:Ne(A({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=v,T(s)}else{let g="";return this.events.next(new Vi(l.id,this.urlSerializer.serialize(l.extractedUrl),g,jh.IgnoredByUrlHandlingStrategy)),l.resolve(null),mn}}),S(l=>{let u=new Tv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),P(l=>(this.currentTransition=s=Ne(A({},l),{guards:r3(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),f3(this.environmentInjector,l=>this.events.next(l)),S(l=>{if(s.guardsResult=l.guardsResult,la(l.guardsResult))throw kD(this.urlSerializer,l.guardsResult);let u=new Dv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),je(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ln.GuardRejected),!1)),_v(l=>{if(l.guards.canActivateChecks.length)return T(l).pipe(S(u=>{let h=new Sv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),V(u=>{let h=!1;return T(u).pipe(U3(this.paramsInheritanceStrategy,this.environmentInjector),S({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(u,"",Ln.NoDataFromResolver)}}))}),S(u=>{let h=new Av(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),_v(l=>{let u=h=>{let g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(S(v=>{h.component=v}),P(()=>{})));for(let v of h.children)g.push(...u(v));return g};return dc(u(l.targetSnapshot.root)).pipe(gi(null),H(1))}),_v(()=>this.afterPreactivation()),V(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,h=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return h?te(h).pipe(P(()=>s)):T(s)}),P(l=>{let u=Qj(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=Ne(A({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),S(()=>{this.events.next(new il)}),n3(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),H(1),S({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new _r(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),ir(this.transitionAbortSubject.pipe(S(l=>{throw l}))),go(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",Ln.SupersededByNewNavigation),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),ke(l=>{if(c=!0,FD(l))this.events.next(new Fi(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),Zj(l)?this.events.next(new ol(l.url)):s.resolve(!1);else{this.events.next(new rl(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return mn}))}))}cancelNavigationTransition(r,i,o){let s=new Fi(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Y3(t){return t!==Xc}var J3=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>j(Z3),providedIn:"root"});let t=e;return t})(),Gv=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Z3=(()=>{let e=class e extends Gv{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Qn(e)))(o||e)}})(),e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),GD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>j(X3),providedIn:"root"});let t=e;return t})(),X3=(()=>{let e=class e extends GD{constructor(){super(...arguments),this.location=j(na),this.urlSerializer=j(dl),this.options=j(fa,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(Jv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Oi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=RD(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof ua)this.stateMemento=this.createStateMemento();else if(r instanceof Vi)this.rawUrlTree=i.initialUrl;else if(r instanceof Uh){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof il?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Fi&&(r.code===Ln.GuardRejected||r.code===Ln.NoDataFromResolver)?this.restoreHistory(i):r instanceof rl?this.restoreHistory(i,!0):r instanceof _r&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=A(A({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=A(A({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Qn(e)))(o||e)}})(),e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Jc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Jc||{});function HD(t,e){t.events.pipe(je(n=>n instanceof _r||n instanceof Fi||n instanceof rl||n instanceof Vi),P(n=>n instanceof _r||n instanceof Vi?Jc.COMPLETE:(n instanceof Fi?n.code===Ln.Redirect||n.code===Ln.SupersededByNewNavigation:!1)?Jc.REDIRECTING:Jc.FAILED),je(n=>n!==Jc.REDIRECTING),H(1)).subscribe(()=>{e()})}function eU(t){throw t}var tU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},yt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=j(vh),this.stateManager=j(GD),this.options=j(fa,{optional:!0})||{},this.pendingTasks=j(Zs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(Zv),this.urlSerializer=j(dl),this.location=j(na),this.urlHandlingStrategy=j(Jv),this._events=new Pe,this.errorHandler=this.options.errorHandler||eU,this.navigated=!1,this.routeReuseStrategy=j(J3),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(ll,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(Kh,{optional:!0}),this.eventsSubscription=new vt,this.isNgZoneEnabled=j(Re)instanceof Re&&Re.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Fi&&i.code!==Ln.Redirect&&i.code!==Ln.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof _r)this.navigated=!0;else if(i instanceof ol){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Y3(o.source)};this.scheduleNavigation(a,Xc,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}iU(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Xc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=A({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Kv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,h=null;switch(c){case"merge":h=A(A({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let g;try{let v=o?o.snapshot:this.routerState.snapshot.root;g=DD(v)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),g=this.currentUrlTree.root}return SD(g,r,h,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=la(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Xc,null,i)}navigate(r,i={skipLocationChange:!1}){return rU(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=A({},tU):i===!1?o=A({},nU):o=i,la(r))return cD(this.currentUrlTree,r,o);let s=this.parseUrl(r);return cD(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((g,v)=>{c=g,l=v});let h=this.pendingTasks.add();return HD(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(g=>Promise.reject(g))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function rU(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new ee(4008,!1)}function iU(t){return!(t instanceof il)&&!(t instanceof ol)}var Un=(()=>{let e=class e{constructor(r,i,o,s,a,c){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new Pe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(u=>{u instanceof _r&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,s,a){if(this.urlTree===null||this.isAnchorElement&&(r!==0||i||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(this.urlTree,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=this.urlTree!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;let r=this.href===null?null:V1(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(r,i){let o=this.renderer,s=this.el.nativeElement;i!==null?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(b(yt),b(Ir),m0("tabindex"),b(pr),b(_n),b(ti))},e.\u0275dir=qe({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&L("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Ks("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[rt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",ea],skipLocationChange:[rt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",ea],replaceUrl:[rt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",ea],routerLink:"routerLink"},standalone:!0,features:[j0,cn]});let t=e;return t})();var Wh=class{};var oU=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(je(r=>r instanceof _r),kn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=gh(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return te(o).pipe(_t())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=T(null);let s=o.pipe(xe(a=>a===null?T(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return te([s,a]).pipe(_t())}else return s})}};e.\u0275fac=function(i){return new(i||e)(x(yt),x(yh),x(sn),x(Wh),x(Yv))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),WD=new K(""),sU=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof ua?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof _r?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Vi&&r.code===jh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof $h&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new $h(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){H1()},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})();function KD(t,...e){return Ti([{provide:ll,multi:!0,useValue:t},[],{provide:Ir,useFactory:QD,deps:[yt]},{provide:Uc,multi:!0,useFactory:YD},e.map(n=>n.\u0275providers)])}function QD(t){return t.routerState.root}function pa(t,e){return{\u0275kind:t,\u0275providers:e}}function YD(){let t=j(Dt);return e=>{let n=t.get(xi);if(e!==n.components[0])return;let r=t.get(yt),i=t.get(JD);t.get(Xv)===1&&r.initialNavigation(),t.get(ZD,null,Ce.Optional)?.setUpPreloading(),t.get(WD,null,Ce.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var JD=new K("",{factory:()=>new Pe}),Xv=new K("",{providedIn:"root",factory:()=>1});function aU(){return pa(2,[{provide:Xv,useValue:0},{provide:Xs,multi:!0,deps:[Dt],useFactory:e=>{let n=e.get(FT,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(yt),o=e.get(JD);HD(i,()=>{r(!0)}),e.get(Zv).afterPreactivation=()=>(r(!0),o.closed?T(void 0):o),i.initialNavigation()}))}}])}function cU(){return pa(3,[{provide:Xs,multi:!0,useFactory:()=>{let e=j(yt);return()=>{e.setUpLocationChangeListener()}}},{provide:Xv,useValue:2}])}var ZD=new K("");function lU(t){return pa(0,[{provide:ZD,useExisting:oU},{provide:Wh,useExisting:t}])}function XD(t){return pa(5,[{provide:fa,useValue:t}])}function ey(){return pa(8,[hD,{provide:Kh,useExisting:hD}])}function uU(t){let e=[{provide:qD,useValue:K3},{provide:zD,useValue:A({skipNextTransition:!!t?.skipInitialTransition},t)}];return pa(9,e)}var pD=new K("ROUTER_FORROOT_GUARD"),dU=[na,{provide:dl,useClass:tl},yt,hl,{provide:Ir,useFactory:QD,deps:[yt]},Yv,[]],eS=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[dU,[],{provide:ll,multi:!0,useValue:r},{provide:pD,useFactory:mU,deps:[[yt,new un,new o1]]},{provide:fa,useValue:i||{}},i?.useHash?fU():pU(),hU(),i?.preloadingStrategy?lU(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?gU(i):[],i?.bindToComponentInputs?ey().\u0275providers:[],i?.enableViewTransitions?uU().\u0275providers:[],vU()]}}static forChild(r){return{ngModule:e,providers:[{provide:ll,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(x(pD,8))},e.\u0275mod=Rt({type:e}),e.\u0275inj=xt({});let t=e;return t})();function hU(){return{provide:WD,useFactory:()=>{let t=j(BT),e=j(Re),n=j(fa),r=j(Zv),i=j(dl);return n.scrollOffset&&t.setOffset(n.scrollOffset),new sU(i,r,t,e,n)}}}function fU(){return{provide:ti,useClass:LT}}function pU(){return{provide:ti,useClass:X0}}function mU(t){return"guarded"}function gU(t){return[t.initialNavigation==="disabled"?cU().\u0275providers:[],t.initialNavigation==="enabledBlocking"?aU().\u0275providers:[]]}var mD=new K("");function vU(){return[{provide:mD,useFactory:YD},{provide:Uc,multi:!0,useExisting:mD}]}var nS=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yU=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},rS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=o>>2,h=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,v=l&63;c||(v=64,s||(g=64)),r.push(n[u],n[h],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let h=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||h==null)throw new ny;let g=o<<2|a>>4;if(r.push(g),l!==64){let v=a<<4&240|l>>2;if(r.push(v),h!==64){let w=l<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},ny=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},_U=function(t){let e=nS(t);return rS.encodeByteArray(e,!0)},iy=function(t){return _U(t).replace(/\./g,"")},oy=function(t){try{return rS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function IU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var wU=()=>IU().__FIREBASE_DEFAULTS__,EU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&oy(t[1]);return e&&JSON.parse(e)},Zh=()=>{try{return wU()||EU()||bU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},iS=t=>{var e,n;return(n=(e=Zh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]};var sy=()=>{var t;return(t=Zh())===null||t===void 0?void 0:t.config},ay=t=>{var e;return(e=Zh())===null||e===void 0?void 0:e[`_${t}`]};var Jh=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function CU(){var t;let e=(t=Zh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sS(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cS(){let t=lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lS(){return!CU()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xh(){try{return typeof indexedDB=="object"}catch{return!1}}function uS(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var TU="FirebaseError",Sn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=TU,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ni.prototype.create)}},ni=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?DU(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Sn(i,a,r)}};function DU(t,e){return t.replace(SU,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var SU=/\{\$([^}]+)}/g;function dS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ji(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(tS(o)&&tS(s)){if(!ji(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function tS(t){return t!==null&&typeof t=="object"}function ma(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hS(t,e){let n=new ry(t,e);return n.subscribe.bind(n)}var ry=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");AU(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ty),i.error===void 0&&(i.error=ty),i.complete===void 0&&(i.complete=ty);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function AU(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ty(){}var rte=4*60*60*1e3;function ut(t){return t&&t._delegate?t._delegate:t}var $n=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Fo="[DEFAULT]";var cy=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Jh;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RU(e))try{this.getOrInitializeService({instanceIdentifier:Fo})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return y(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Fo){return this.instances.has(e)}getOptions(e=Fo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fo){return this.component?this.component.multipleInstances?e:Fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function xU(t){return t===Fo?void 0:t}function RU(t){return t.instantiationMode==="EAGER"}var ef=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new cy(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var MU=[],Se=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Se||{}),NU={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},PU=Se.INFO,kU={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},OU=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=kU[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ui=class{constructor(e){this.name=e,this._logLevel=PU,this._logHandler=OU,this._userLogHandler=null,MU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}};var FU=(t,e)=>e.some(n=>t instanceof n),fS,pS;function VU(){return fS||(fS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LU(){return pS||(pS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var mS=new WeakMap,uy=new WeakMap,gS=new WeakMap,ly=new WeakMap,hy=new WeakMap;function jU(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Er(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&mS.set(n,t)}).catch(()=>{}),hy.set(e,t),e}function UU(t){if(uy.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});uy.set(t,e)}var dy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return uy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||gS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Er(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function vS(t){dy=t(dy)}function $U(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(tf(this),e,...n);return gS.set(r,e.sort?e.sort():[e]),Er(r)}:LU().includes(t)?function(...e){return t.apply(tf(this),e),Er(mS.get(this))}:function(...e){return Er(t.apply(tf(this),e))}}function BU(t){return typeof t=="function"?$U(t):(t instanceof IDBTransaction&&UU(t),FU(t,VU())?new Proxy(t,dy):t)}function Er(t){if(t instanceof IDBRequest)return jU(t);if(ly.has(t))return ly.get(t);let e=BU(t);return e!==t&&(ly.set(t,e),hy.set(e,t)),e}var tf=t=>hy.get(t);function _S(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Er(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Er(s.result),c.oldVersion,c.newVersion,Er(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var qU=["get","getKey","getAll","getAllKeys","count"],zU=["put","add","delete","clear"],fy=new Map;function yS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fy.get(e))return fy.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=zU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||qU.includes(n)))return;let o=function(s,...a){return y(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return fy.set(e,o),o}vS(t=>Ne(A({},t),{get:(e,n,r)=>yS(e,n)||t.get(e,n,r),has:(e,n)=>!!yS(e,n)||t.has(e,n)}));var my=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GU(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function GU(t){let e=t.getComponent();return e?.type==="VERSION"}var gy="@firebase/app",IS="0.9.26";var Vo=new Ui("@firebase/app"),HU="@firebase/app-compat",WU="@firebase/analytics-compat",KU="@firebase/analytics",QU="@firebase/app-check-compat",YU="@firebase/app-check",JU="@firebase/auth",ZU="@firebase/auth-compat",XU="@firebase/database",e4="@firebase/database-compat",t4="@firebase/functions",n4="@firebase/functions-compat",r4="@firebase/installations",i4="@firebase/installations-compat",o4="@firebase/messaging",s4="@firebase/messaging-compat",a4="@firebase/performance",c4="@firebase/performance-compat",l4="@firebase/remote-config",u4="@firebase/remote-config-compat",d4="@firebase/storage",h4="@firebase/storage-compat",f4="@firebase/firestore",p4="@firebase/firestore-compat",m4="firebase",g4="10.7.2";var vy="[DEFAULT]",v4={[gy]:"fire-core",[HU]:"fire-core-compat",[KU]:"fire-analytics",[WU]:"fire-analytics-compat",[YU]:"fire-app-check",[QU]:"fire-app-check-compat",[JU]:"fire-auth",[ZU]:"fire-auth-compat",[XU]:"fire-rtdb",[e4]:"fire-rtdb-compat",[t4]:"fire-fn",[n4]:"fire-fn-compat",[r4]:"fire-iid",[i4]:"fire-iid-compat",[o4]:"fire-fcm",[s4]:"fire-fcm-compat",[a4]:"fire-perf",[c4]:"fire-perf-compat",[l4]:"fire-rc",[u4]:"fire-rc-compat",[d4]:"fire-gcs",[h4]:"fire-gcs-compat",[f4]:"fire-fst",[p4]:"fire-fst-compat","fire-js":"fire-js",[m4]:"fire-js-all"};var ml=new Map,yy=new Map;function y4(t,e){try{t.container.addComponent(e)}catch(n){Vo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Bi(t){let e=t.name;if(yy.has(e))return Vo.debug(`There were multiple attempts to register component ${e}.`),!1;yy.set(e,t);for(let n of ml.values())y4(n,t);return!0}function vl(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var _4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},$i=new ni("app","Firebase",_4);var _y=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $n("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $i.create("app-deleted",{appName:this._name})}};var qi=g4;function yl(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:vy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw $i.create("bad-app-name",{appName:String(i)});if(n||(n=sy()),!n)throw $i.create("no-options");let o=ml.get(i);if(o){if(ji(n,o.options)&&ji(r,o.config))return o;throw $i.create("duplicate-app",{appName:i})}let s=new ef(i);for(let c of yy.values())s.addComponent(c);let a=new _y(n,r,s);return ml.set(i,a),a}function ga(t=vy){let e=ml.get(t);if(!e&&t===vy&&sy())return yl();if(!e)throw $i.create("no-app",{appName:t});return e}function nf(){return Array.from(ml.values())}function At(t,e,n){var r;let i=(r=v4[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vo.warn(a.join(" "));return}Bi(new $n(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var I4="firebase-heartbeat-database",w4=1,gl="firebase-heartbeat-store",py=null;function CS(){return py||(py=_S(I4,w4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(gl)}catch(n){console.warn(n)}}}}).catch(t=>{throw $i.create("idb-open",{originalErrorMessage:t.message})})),py}function E4(t){return y(this,null,function*(){try{return yield(yield CS()).transaction(gl).objectStore(gl).get(TS(t))}catch(e){if(e instanceof Sn)Vo.warn(e.message);else{let n=$i.create("idb-get",{originalErrorMessage:e?.message});Vo.warn(n.message)}}})}function wS(t,e){return y(this,null,function*(){try{let r=(yield CS()).transaction(gl,"readwrite");yield r.objectStore(gl).put(e,TS(t)),yield r.done}catch(n){if(n instanceof Sn)Vo.warn(n.message);else{let r=$i.create("idb-set",{originalErrorMessage:n?.message});Vo.warn(r.message)}}})}function TS(t){return`${t.name}!${t.options.appId}`}var b4=1024,C4=30*24*60*60*1e3,Iy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new wy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return y(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ES();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=C4}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return y(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=ES(),{heartbeatsToSend:r,unsentEntries:i}=T4(this._heartbeatsCache.heartbeats),o=iy(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o})}};function ES(){return new Date().toISOString().substring(0,10)}function T4(t,e=b4){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),bS(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),bS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var wy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return y(this,null,function*(){return Xh()?uS().then(()=>!0).catch(()=>!1):!1})}read(){return y(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield E4(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return y(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return wS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return y(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return wS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function bS(t){return iy(JSON.stringify({version:2,heartbeats:t})).length}function D4(t){Bi(new $n("platform-logger",e=>new my(e),"PRIVATE")),Bi(new $n("heartbeat",e=>new Iy(e),"PRIVATE")),At(gy,IS,t),At(gy,IS,"esm2017"),At("fire-js","")}D4("");var S4="firebase",A4="10.7.2";At(S4,A4,"app");var jo=new Qr("ANGULARFIRE2_VERSION");function of(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var _l=(t,e)=>{let n=e?[e]:nf(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ya=class{constructor(){return _l(x4)}},x4="app-check";function va(){}var rf=class{zone;delegate;constructor(e,n=Rm){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},Ey=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",va,{},va,va)),n.pipe(S({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},_a=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new rf(Zone.current)),this.insideAngular=n.run(()=>new rf(Zone.current,fi)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(x(Re))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function sf(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function R4(t){return sf().ngZone.runOutsideAngular(()=>t())}function Lo(t){return sf().ngZone.run(()=>t())}function M4(t){return N4(sf())(t)}function N4(t){return function(n){return n=n.lift(new Ey(t.ngZone)),n.pipe(mi(t.outsideAngular),pi(t.insideAngular))}}var P4=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Lo(()=>t.apply(void 0,r))},It=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=Lo(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",va,{},va,va))),r[o]=P4(r[o],n));let i=R4(()=>t.apply(this,r));if(!e)if(i instanceof de){let o=sf();return i.pipe(mi(o.outsideAngular),pi(o.insideAngular))}else return Lo(()=>i);return i instanceof de?i.pipe(M4):i instanceof Promise?Lo(()=>new Promise((o,s)=>i.then(a=>Lo(()=>o(a)),a=>Lo(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Lo(()=>i)};var Jn=class{constructor(e){return e}},Uo=class{constructor(){return nf()}};function k4(t){return t&&t.length===1?t[0]:new Jn(ga())}var by=new K("angularfire2._apps"),O4={provide:Jn,useFactory:k4,deps:[[new un,by]]},F4={provide:Uo,deps:[[new un,by]]};function V4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Jn(r)}}var L4=(()=>{class t{constructor(n){At("angularfire",jo.full,"core"),At("angularfire",jo.full,"app"),At("angular",ET.full,n.toString())}static \u0275fac=function(r){return new(r||t)(x(dn))};static \u0275mod=Rt({type:t});static \u0275inj=xt({providers:[O4,F4]})}return t})();function DS(t,...e){return{ngModule:L4,providers:[{provide:by,useFactory:V4(t),multi:!0,deps:[Re,Dt,_a,...e]}]}}var Cy=It(ga,!0);var SS=It(yl,!0);function qS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var zS=qS,GS=new ni("auth","Firebase",qS());var hf=new Ui("@firebase/auth");function U4(t,...e){hf.logLevel<=Se.WARN&&hf.warn(`Auth (${qi}): ${t}`,...e)}function cf(t,...e){hf.logLevel<=Se.ERROR&&hf.error(`Auth (${qi}): ${t}`,...e)}function Tr(t,...e){throw By(t,...e)}function br(t,...e){return By(t,...e)}function HS(t,e,n){let r=Object.assign(Object.assign({},zS()),{[e]:n});return new ni("auth","Firebase",r).create(e,{appName:t.name})}function $4(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Tr(t,"argument-error"),HS(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function By(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return GS.create(t,...e)}function ve(t,e,...n){if(!t)throw By(e,...n)}function ri(t){let e="INTERNAL ASSERTION FAILED: "+t;throw cf(e),new Error(e)}function oi(t,e){t||ri(e)}function Sy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function B4(){return AS()==="http:"||AS()==="https:"}function AS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function q4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(B4()||sS()||"connection"in navigator)?navigator.onLine:!0}function z4(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var $o=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,oi(n>e,"Short delay should be less than long delay!"),this.isMobile=oS()||aS()}get(){return q4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function qy(t,e){oi(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var ff=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var G4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var H4=new $o(3e4,6e4);function Sl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function qo(o,s,a,c){return y(this,arguments,function*(t,e,n,r,i={}){return WS(t,i,()=>y(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let h=ma(Object.assign({key:t.config.apiKey},u)).slice(1),g=yield t._getAdditionalHeaders();return g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode),ff.fetch()(QS(t,t.config.apiHost,n,h),Object.assign({method:e,headers:g,referrerPolicy:"no-referrer"},l))}))})}function WS(t,e,n){return y(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},G4),e);try{let i=new Ay(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw af(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw af(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw af(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw af(t,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw HS(t,u,l);Tr(t,u)}}catch(i){if(i instanceof Sn)throw i;Tr(t,"network-request-failed",{message:String(i)})}})}function KS(o,s,a,c){return y(this,arguments,function*(t,e,n,r,i={}){let l=yield qo(t,e,n,r,i);return"mfaPendingCredential"in l&&Tr(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function QS(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?qy(t.config,i):`${t.config.apiScheme}://${i}`}function W4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Ay=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(br(this.auth,"network-request-failed")),H4.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function af(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=br(t,e,r);return i.customData._tokenResponse=n,i}function xS(t){return t!==void 0&&t.enterprise!==void 0}var xy=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return W4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function K4(t,e){return y(this,null,function*(){return qo(t,"GET","/v2/recaptchaConfig",Sl(t,e))})}function Q4(t,e){return y(this,null,function*(){return qo(t,"POST","/v1/accounts:delete",e)})}function Y4(t,e){return y(this,null,function*(){return qo(t,"POST","/v1/accounts:lookup",e)})}function Il(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function zy(t,e=!1){return y(this,null,function*(){let n=ut(t),r=yield n.getIdToken(e),i=Gy(r);ve(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Il(Ty(i.auth_time)),issuedAtTime:Il(Ty(i.iat)),expirationTime:Il(Ty(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Ty(t){return Number(t)*1e3}function Gy(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return cf("JWT malformed, contained fewer than 3 sections"),null;try{let i=oy(n);return i?JSON.parse(i):(cf("Failed to decode base64 JWT payload"),null)}catch(i){return cf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function J4(t){let e=Gy(t);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function wl(t,e,n=!1){return y(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Sn&&Z4(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function Z4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Ry=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),n)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var pf=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Il(this.lastLoginAt),this.creationTime=Il(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function mf(t){return y(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield wl(t,Y4(n,{idToken:r}));ve(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?e$(o.providerUserInfo):[],a=X4(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,u=c?l:!1,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new pf(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(t,h)})}function Hy(t){return y(this,null,function*(){let e=ut(t);yield mf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function X4(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function e$(t){return t.map(e=>{var{providerId:n}=e,r=Qu(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function t$(t,e){return y(this,null,function*(){let n=yield WS(t,{},()=>y(this,null,function*(){let r=ma({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=QS(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ff.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function n$(t,e){return y(this,null,function*(){return qo(t,"POST","/v2/accounts:revokeToken",Sl(t,e))})}var gf=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):J4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){return y(this,null,function*(){return ve(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield t$(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(ve(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ve(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ve(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return ri("not implemented")}};function zi(t,e){ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var El=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Qu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ry(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new pf(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let n=yield wl(this,this.stsTokenManager.getToken(this.auth,e));return ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return zy(this,e)}reload(){return Hy(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield mf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){let e=yield this.getIdToken();return yield wl(this,Q4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,l,u;let h=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,v=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,w=(s=n.photoURL)!==null&&s!==void 0?s:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,M=(l=n.createdAt)!==null&&l!==void 0?l:void 0,X=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:Te,emailVerified:ce,isAnonymous:Be,providerData:Ve,stsTokenManager:nn}=n;ve(Te&&nn,e,"internal-error");let ui=gf.fromJSON(this.name,nn);ve(typeof Te=="string",e,"internal-error"),zi(h,e.name),zi(g,e.name),ve(typeof ce=="boolean",e,"internal-error"),ve(typeof Be=="boolean",e,"internal-error"),zi(v,e.name),zi(w,e.name),zi(R,e.name),zi(C,e.name),zi(M,e.name),zi(X,e.name);let ao=new t({uid:Te,auth:e,email:g,emailVerified:ce,displayName:h,isAnonymous:Be,photoURL:w,phoneNumber:v,tenantId:R,stsTokenManager:ui,createdAt:M,lastLoginAt:X});return Ve&&Array.isArray(Ve)&&(ao.providerData=Ve.map(Pu=>Object.assign({},Pu))),C&&(ao._redirectEventId=C),ao}static _fromIdTokenResponse(e,n,r=!1){return y(this,null,function*(){let i=new gf;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield mf(o),o})}};var RS=new Map;function ii(t){oi(t instanceof Function,"Expected a class definition");let e=RS.get(t);return e?(oi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,RS.set(t,e),e)}var r$=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(n,r){return y(this,null,function*(){this.storage[n]=r})}_get(n){return y(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return y(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),bl=r$;function lf(t,e,n){return`firebase:${t}:${e}:${n}`}var vf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=lf(this.userKey,i.apiKey,o),this.fullPersistenceKey=lf("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?El._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return y(this,null,function*(){if(!n.length)return new t(ii(bl),e,r);let i=(yield Promise.all(n.map(l=>y(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||ii(bl),s=lf(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let h=El._fromJSON(e,u);l!==o&&(a=h),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new t(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>y(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function MS(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eA(e))return"Blackberry";if(tA(e))return"Webos";if(Wy(e))return"Safari";if((e.includes("chrome/")||JS(e))&&!e.includes("edge/"))return"Chrome";if(XS(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function YS(t=lt()){return/firefox\//i.test(t)}function Wy(t=lt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JS(t=lt()){return/crios\//i.test(t)}function ZS(t=lt()){return/iemobile/i.test(t)}function XS(t=lt()){return/android/i.test(t)}function eA(t=lt()){return/blackberry/i.test(t)}function tA(t=lt()){return/webos/i.test(t)}function Df(t=lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function i$(t=lt()){var e;return Df(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function o$(){return cS()&&document.documentMode===10}function nA(t=lt()){return Df(t)||XS(t)||tA(t)||eA(t)||/windows phone/i.test(t)||ZS(t)}function s$(){try{return!!(window&&window!==window.top)}catch{return!1}}function rA(t,e=[]){let n;switch(t){case"Browser":n=MS(lt());break;case"Worker":n=`${MS(lt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qi}/${r}`}var My=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function a$(n){return y(this,arguments,function*(t,e={}){return qo(t,"GET","/v2/passwordPolicy",Sl(t,e))})}var c$=6,Ny=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:c$,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Py=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yf(this),this.idTokenSubscription=new yf(this),this.beforeStateQueue=new My(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ii(n)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield vf.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUser(e){return y(this,null,function*(){var n;let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield mf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=z4()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){let n=e?ut(e):null;return n&&ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return y(this,null,function*(){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0)})}setPersistence(e){return this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(ii(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield a$(this),n=new Ny(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ni("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield n$(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&ii(e)||this._popupRedirectResolver;ve(n,this,"argument-error"),this.redirectPersistenceManager=yield vf.create(this,[ii(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return y(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&U4(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function zo(t){return ut(t)}var yf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=hS(n=>this.observer=n)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};function l$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function iA(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=br("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",l$().appendChild(r)})}function oA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var u$="https://www.google.com/recaptcha/enterprise.js?render=",d$="recaptcha-enterprise",h$="NO_RECAPTCHA",ky=class{constructor(e){this.type=d$,this.auth=zo(e)}verify(e="verify",n=!1){return y(this,null,function*(){function r(o){return y(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>y(this,null,function*(){K4(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new xy(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;xS(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(h$)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&xS(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}iA(u$+a).then(()=>{i(a,o,s)}).catch(c=>{s(c)})}}).catch(a=>{s(a)})})})}};function NS(t,e,n,r=!1){return y(this,null,function*(){let i=new ky(t),o;try{o=yield i.verify(n)}catch{o=yield i.verify(n,!0)}let s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function f$(t,e,n,r){return y(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield NS(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(o=>y(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield NS(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(o)}))})}function Ky(t,e){let n=vl(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(ji(o,e??{}))return i;Tr(i,"already-initialized")}return n.initialize({options:e})}function p$(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ii);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Qy(t,e,n){let r=zo(t);ve(r._canInitEmulator,r,"emulator-config-failed"),ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=sA(e),{host:s,port:a}=m$(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||g$()}function sA(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function m$(t){let e=sA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:PS(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:PS(s)}}}function PS(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function g$(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Cl=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ri("not implemented")}_getIdTokenResponse(e){return ri("not implemented")}_linkToIdToken(e,n){return ri("not implemented")}_getReauthenticationResolver(e){return ri("not implemented")}};function Ia(t,e){return y(this,null,function*(){return KS(t,"POST","/v1/accounts:signInWithIdp",Sl(t,e))})}var v$="http://localhost",_f=class t extends Cl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Tr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Qu(n,["providerId","signInMethod"]);if(!r||!i)return null;let s=new t(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let n=this.buildRequest();return Ia(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,Ia(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,Ia(e,n)}buildRequest(){let e={requestUri:v$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ma(n)}return e}};var Tl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var If=class extends Tl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Yy=(()=>{class t extends If{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return _f._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();function y$(t,e){return y(this,null,function*(){return KS(t,"POST","/v1/accounts:signUp",Sl(t,e))})}var wa=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return y(this,null,function*(){let o=yield El._fromIdTokenResponse(e,r,i),s=kS(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=kS(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function kS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Oy=class t extends Sn{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function aA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Oy._fromErrorAndOperation(t,o,e,r):o})}function _$(t,e,n=!1){return y(this,null,function*(){let r=yield wl(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return wa._forOperation(t,"link",r)})}function I$(t,e,n=!1){return y(this,null,function*(){let{auth:r}=t,i="reauthenticate";try{let o=yield wl(t,aA(r,i,e,t),n);ve(o.idToken,r,"internal-error");let s=Gy(o.idToken);ve(s,r,"internal-error");let{sub:a}=s;return ve(t.uid===a,r,"user-mismatch"),wa._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Tr(r,"user-mismatch"),o}})}function w$(t,e,n=!1){return y(this,null,function*(){let r="signIn",i=yield aA(t,r,e),o=yield wa._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function E$(t){return y(this,null,function*(){let e=zo(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Sf(t,e,n){return y(this,null,function*(){let r=zo(t),s=yield f$(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",y$).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&E$(t),c}),a=yield wa._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function Af(t,e){return ut(t).setPersistence(e)}function Jy(t,e,n,r){return ut(t).onIdTokenChanged(e,n,r)}function Zy(t,e,n){return ut(t).beforeAuthStateChanged(e,n)}function Xy(t,e,n,r){return ut(t).onAuthStateChanged(e,n,r)}function e_(t){return ut(t).signOut()}var wf="__sak";var Ef=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wf,"1"),this.storage.removeItem(wf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function b$(){let t=lt();return Wy(t)||Df(t)}var C$=1e3,T$=10,D$=(()=>{class t extends Ef{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=b$()&&s$(),this.fallbackToPolling=nA(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);o$()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,T$):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},C$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return y(this,null,function*(){yield di(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return y(this,null,function*(){let r=yield di(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return y(this,null,function*(){yield di(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),cA=D$;var S$=(()=>{class t extends Ef{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),t_=S$;function A$(t){return Promise.all(t.map(e=>y(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var x$=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return y(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(u=>y(this,null,function*(){return u(r.origin,s)})),l=yield A$(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function n_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Fy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=n_("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){let g=h;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Cr(){return window}function R$(t){Cr().location.href=t}function lA(){return typeof Cr().WorkerGlobalScope<"u"&&typeof Cr().importScripts=="function"}function M$(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function N$(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function P$(){return lA()?self:null}var uA="firebaseLocalStorageDb",k$=1,bf="firebaseLocalStorage",dA="fbase_key",Bo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function xf(t,e){return t.transaction([bf],e?"readwrite":"readonly").objectStore(bf)}function O$(){let t=indexedDB.deleteDatabase(uA);return new Bo(t).toPromise()}function Vy(){let t=indexedDB.open(uA,k$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(bf,{keyPath:dA})}catch(i){n(i)}}),t.addEventListener("success",()=>y(this,null,function*(){let r=t.result;r.objectStoreNames.contains(bf)?e(r):(r.close(),yield O$(),e(yield Vy()))}))})}function OS(t,e,n){return y(this,null,function*(){let r=xf(t,!0).put({[dA]:e,value:n});return new Bo(r).toPromise()})}function F$(t,e){return y(this,null,function*(){let n=xf(t,!1).get(e),r=yield new Bo(n).toPromise();return r===void 0?null:r.value})}function FS(t,e){let n=xf(t,!0).delete(e);return new Bo(n).toPromise()}var V$=800,L$=3,j$=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield Vy(),this.db)})}_withRetries(n){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>L$)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return lA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=x$._getInstance(P$()),this.receiver._subscribe("keyChanged",(n,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var n,r;if(this.activeServiceWorker=yield M$(),!this.activeServiceWorker)return;this.sender=new Fy(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||N$()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Vy();return yield OS(n,wf,"1"),yield FS(n,wf),!0}catch{}return!1})}_withPendingWrite(n){return y(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>OS(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return y(this,null,function*(){let r=yield this._withRetries(i=>F$(i,n));return this.localCache[n]=r,r})}_remove(n){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>FS(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return y(this,null,function*(){let n=yield this._withRetries(o=>{let s=xf(o,!1).getAll();return new Bo(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),V$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),hA=j$;var Kte=oA("rcb"),Qte=new $o(3e4,6e4);function fA(t,e){return e?ii(e):(ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Dl=class extends Cl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ia(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ia(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ia(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function U$(t){return w$(t.auth,new Dl(t),t.bypassAuthState)}function $$(t){let{auth:e,user:n}=t;return ve(n,e,"internal-error"),I$(n,new Dl(t),t.bypassAuthState)}function B$(t){return y(this,null,function*(){let{auth:e,user:n}=t;return ve(n,e,"internal-error"),_$(n,new Dl(t),t.bypassAuthState)})}var Cf=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return U$;case"linkViaPopup":case"linkViaRedirect":return B$;case"reauthViaPopup":case"reauthViaRedirect":return $$;default:Tr(this.auth,"internal-error")}}resolve(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var q$=new $o(2e3,1e4);function r_(t,e,n){return y(this,null,function*(){let r=zo(t);$4(t,e,Tl);let i=fA(r,n);return new z$(r,"signInViaPopup",e,i).executeNotNull()})}var z$=(()=>{class t extends Cf{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){return y(this,null,function*(){let n=yield this.execute();return ve(n,this.auth,"internal-error"),n})}onExecution(){return y(this,null,function*(){oi(this.filter.length===1,"Popup operations only handle one event");let n=n_();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,q$.get())};n()}}t.currentPopupAction=null;return t})(),G$="pendingRedirect",uf=new Map,Ly=class t extends Cf{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=uf.get(this.auth._key());if(!e){try{let r=(yield H$(this.resolver,this.auth))?yield di(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}uf.set(this.auth._key(),e)}return this.bypassAuthState||uf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return di(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,di(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function H$(t,e){return y(this,null,function*(){let n=Q$(e),r=K$(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function W$(t,e){uf.set(t._key(),e)}function K$(t){return ii(t._redirectPersistence)}function Q$(t){return lf(G$,t.config.apiKey,t.name)}function Y$(t,e,n=!1){return y(this,null,function*(){let r=zo(t),i=fA(r,e),s=yield new Ly(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var J$=10*60*1e3,jy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Z$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!pA(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(br(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=J$&&this.cachedEventUids.clear(),this.cachedEventUids.has(VS(e))}saveEventToCache(e){this.cachedEventUids.add(VS(e)),this.lastProcessedEventTime=Date.now()}};function VS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pA({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Z$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pA(t);default:return!1}}function X$(n){return y(this,arguments,function*(t,e={}){return qo(t,"GET","/v1/projects",e)})}var eB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tB=/^https?/;function nB(t){return y(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield X$(t);for(let n of e)try{if(rB(n))return}catch{}Tr(t,"unauthorized-domain")})}function rB(t){let e=Sy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!tB.test(n))return!1;if(eB.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var iB=new $o(3e4,6e4);function LS(){let t=Cr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function oB(t){return new Promise((e,n)=>{var r,i,o;function s(){LS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{LS(),n(br(t,"network-request-failed"))},timeout:iB.get()})}if(!((i=(r=Cr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Cr().gapi)===null||o===void 0)&&o.load)s();else{let a=oA("iframefcb");return Cr()[a]=()=>{gapi.load?s():n(br(t,"network-request-failed"))},iA(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw df=null,e})}var df=null;function sB(t){return df=df||oB(t),df}var aB=new $o(5e3,15e3),cB="__/auth/iframe",lB="emulator/auth/iframe",uB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hB(t){let e=t.config;ve(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?qy(e,lB):`https://${t.config.authDomain}/${cB}`,r={apiKey:e.apiKey,appName:t.name,v:qi},i=dB.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${ma(r).slice(1)}`}function fB(t){return y(this,null,function*(){let e=yield sB(t),n=Cr().gapi;return ve(n,t,"internal-error"),e.open({where:document.body,url:hB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uB,dontclear:!0},r=>new Promise((i,o)=>y(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=br(t,"network-request-failed"),a=Cr().setTimeout(()=>{o(s)},aB.get());function c(){Cr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var pB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mB=500,gB=600,vB="_blank",yB="http://localhost",Tf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function _B(t,e,n,r=mB,i=gB){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},pB),{width:r.toString(),height:i.toString(),top:o,left:s}),l=lt().toLowerCase();n&&(a=JS(l)?vB:n),YS(l)&&(e=e||yB,c.scrollbars="yes");let u=Object.entries(c).reduce((g,[v,w])=>`${g}${v}=${w},`,"");if(i$(l)&&a!=="_self")return IB(e||"",a),new Tf(null);let h=window.open(e||"",a,u);ve(h,t,"popup-blocked");try{h.focus()}catch{}return new Tf(h)}function IB(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var wB="__/auth/handler",EB="emulator/auth/handler",bB=encodeURIComponent("fac");function jS(t,e,n,r,i,o){return y(this,null,function*(){ve(t.config.authDomain,t,"auth-domain-config-required"),ve(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:qi,eventId:i};if(e instanceof Tl){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",dS(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,h]of Object.entries(o||{}))s[u]=h}if(e instanceof If){let u=e.getScopes().filter(h=>h!=="");u.length>0&&(s.scopes=u.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield t._getAppCheckToken(),l=c?`#${bB}=${encodeURIComponent(c)}`:"";return`${CB(t)}?${ma(a).slice(1)}${l}`})}function CB({config:t}){return t.emulator?qy(t,EB):`https://${t.authDomain}/${wB}`}var Dy="webStorageSupport",Uy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=t_,this._completeRedirectFn=Y$,this._overrideRedirectResult=W$}_openPopup(e,n,r,i){return y(this,null,function*(){var o;oi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield jS(e,n,r,Sy(),i);return _B(e,s,n_())})}_openRedirect(e,n,r,i){return y(this,null,function*(){yield this._originValidation(e);let o=yield jS(e,n,r,Sy(),i);return R$(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(oi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return y(this,null,function*(){let n=yield fB(e),r=new jy(e);return n.register("authEvent",i=>(ve(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Dy,{type:Dy},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Dy];s!==void 0&&n(!!s),Tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=nB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return nA()||Wy()||Df()}},mA=Uy;var US="@firebase/auth",$S="1.5.1";var $y=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function TB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function DB(t){Bi(new $n("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ve(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rA(t)},l=new Py(r,i,o,c);return p$(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Bi(new $n("auth-internal",e=>{let n=zo(e.getProvider("auth").getImmediate());return(r=>new $y(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),At(US,$S,TB(t)),At(US,$S,"esm2017")}var SB=5*60,AB=ay("authIdTokenMaxAge")||SB,BS=null,xB=t=>e=>y(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>AB)return;let i=n?.token;BS!==i&&(BS=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function i_(t=ga()){let e=vl(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Ky(t,{popupRedirectResolver:mA,persistence:[hA,cA,t_]}),r=ay("authTokenSyncURL");if(r){let o=xB(r);Zy(n,o,()=>o(n.currentUser)),Jy(n,s=>o(s))}let i=iS("auth");return i&&Qy(n,`http://${i}`),n}DB("Browser");var gA="auth",Al=class{constructor(e){return e}},xl=class{constructor(){return _l(gA)}};var o_=new K("angularfire2.auth-instances");function y5(t,e){let n=of(gA,t,e);return n&&new Al(n)}function _5(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Al(r)}}var I5={provide:xl,deps:[[new un,o_]]},w5={provide:Al,useFactory:y5,deps:[[new un,o_],Jn]},E5=(()=>{class t{constructor(){At("angularfire",jo.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Rt({type:t});static \u0275inj=xt({providers:[w5,I5]})}return t})();function vA(t,...e){return{ngModule:E5,providers:[{provide:o_,useFactory:_5(t),multi:!0,deps:[Re,Dt,_a,Uo,[new un,ya],...e]}]}}var Ea=It(i_,!0);var yA=It(Xy,!0);var _A=It(r_,!0);var IA=It(e_,!0);var b5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xn={},B,S_=S_||{},me=b5||self;function qf(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ql(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function C5(t){return Object.prototype.hasOwnProperty.call(t,s_)&&t[s_]||(t[s_]=++T5)}var s_="closure_uid_"+(1e9*Math.random()>>>0),T5=0;function D5(t,e,n){return t.call.apply(t.bind,arguments)}function S5(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Kt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Kt=D5:Kt=S5,Kt.apply(null,arguments)}function Rf(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Ft(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function Gi(){this.s=this.s,this.o=this.o}var A5=0;Gi.prototype.s=!1;Gi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),A5!=0)&&C5(this)};Gi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var PA=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function A_(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function wA(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(qf(r)){let i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function Qt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Qt.prototype.h=function(){this.defaultPrevented=!0};var x5=function(){if(!me.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};me.addEventListener("test",n,e),me.removeEventListener("test",n,e)}catch{}return t}();function Ol(t){return/^[\s\xa0]*$/.test(t)}function zf(){var t=me.navigator;return t&&(t=t.userAgent)?t:""}function Dr(t){return zf().indexOf(t)!=-1}function x_(t){return x_[" "](t),t}x_[" "]=function(){};function R5(t,e){var n=y9;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var M5=Dr("Opera"),Da=Dr("Trident")||Dr("MSIE"),kA=Dr("Edge"),d_=kA||Da,OA=Dr("Gecko")&&!(zf().toLowerCase().indexOf("webkit")!=-1&&!Dr("Edge"))&&!(Dr("Trident")||Dr("MSIE"))&&!Dr("Edge"),N5=zf().toLowerCase().indexOf("webkit")!=-1&&!Dr("Edge");function FA(){var t=me.document;return t?t.documentMode:void 0}var h_;e:{if(Mf="",Nf=function(){var t=zf();if(OA)return/rv:([^\);]+)(\)|;)/.exec(t);if(kA)return/Edge\/([\d\.]+)/.exec(t);if(Da)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(N5)return/WebKit\/(\S+)/.exec(t);if(M5)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Nf&&(Mf=Nf?Nf[1]:""),Da&&(Pf=FA(),Pf!=null&&Pf>parseFloat(Mf))){h_=String(Pf);break e}h_=Mf}var Mf,Nf,Pf,f_;me.document&&Da?(a_=FA(),f_=a_||parseInt(h_,10)||void 0):f_=void 0;var a_,P5=f_;function Fl(t,e){if(Qt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(OA){e:{try{x_(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:k5[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Fl.$.h.call(this)}}Ft(Fl,Qt);var k5={2:"touch",3:"pen",4:"mouse"};Fl.prototype.h=function(){Fl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var zl="closure_listenable_"+(1e6*Math.random()|0),O5=0;function F5(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++O5,this.fa=this.ia=!1}function Gf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function R_(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function V5(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function VA(t){let e={};for(let n in t)e[n]=t[n];return e}var EA="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function LA(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<EA.length;o++)n=EA[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Hf(t){this.src=t,this.g={},this.h=0}Hf.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=m_(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new F5(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function p_(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=PA(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Gf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function m_(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var M_="closure_lm_"+(1e6*Math.random()|0),c_={};function jA(t,e,n,r,i){if(r&&r.once)return $A(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)jA(t,e[o],n,r,i);return null}return n=k_(n),t&&t[zl]?t.O(e,n,ql(r)?!!r.capture:!!r,i):UA(t,e,n,!1,r,i)}function UA(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=ql(i)?!!i.capture:!!i,a=P_(t);if(a||(t[M_]=a=new Hf(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=L5(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)x5||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(qA(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function L5(){function t(n){return e.call(t.src,t.listener,n)}let e=j5;return t}function $A(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)$A(t,e[o],n,r,i);return null}return n=k_(n),t&&t[zl]?t.P(e,n,ql(r)?!!r.capture:!!r,i):UA(t,e,n,!0,r,i)}function BA(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)BA(t,e[o],n,r,i);else r=ql(r)?!!r.capture:!!r,n=k_(n),t&&t[zl]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=m_(o,n,r,i),-1<n&&(Gf(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=P_(t))&&(e=t.g[e.toString()],t=-1,e&&(t=m_(e,n,r,i)),(n=-1<t?e[t]:null)&&N_(n))}function N_(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[zl])p_(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(qA(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=P_(e))?(p_(n,t),n.h==0&&(n.src=null,e[M_]=null)):Gf(t)}}}function qA(t){return t in c_?c_[t]:c_[t]="on"+t}function j5(t,e){if(t.fa)t=!0;else{e=new Fl(e,this);var n=t.listener,r=t.la||t.src;t.ia&&N_(t),t=n.call(r,e)}return t}function P_(t){return t=t[M_],t instanceof Hf?t:null}var l_="__closure_events_fn_"+(1e9*Math.random()>>>0);function k_(t){return typeof t=="function"?t:(t[l_]||(t[l_]=function(e){return t.handleEvent(e)}),t[l_])}function Ot(){Gi.call(this),this.i=new Hf(this),this.S=this,this.J=null}Ft(Ot,Gi);Ot.prototype[zl]=!0;Ot.prototype.removeEventListener=function(t,e,n,r){BA(this,t,e,n,r)};function Bt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Qt(e,t);else if(e instanceof Qt)e.target=e.target||t;else{var i=e;e=new Qt(r,t),LA(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=kf(s,r,!0,e)&&i}if(s=e.g=t,i=kf(s,r,!0,e)&&i,i=kf(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=kf(s,r,!1,e)&&i}Ot.prototype.N=function(){if(Ot.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Gf(n[r]);delete t.g[e],t.h--}}this.J=null};Ot.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Ot.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function kf(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,c=s.la||s.src;s.ia&&p_(t.i,s),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var O_=me.JSON.stringify,g_=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function U5(){var t=F_;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var v_=class{constructor(){this.h=this.g=null}add(e,n){let r=zA.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},zA=new g_(()=>new y_,t=>t.reset()),y_=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function $5(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function B5(t){me.setTimeout(()=>{throw t},0)}var Vl,Ll=!1,F_=new v_,GA=()=>{let t=me.Promise.resolve(void 0);Vl=()=>{t.then(q5)}},q5=()=>{for(var t;t=U5();){try{t.h.call(t.g)}catch(n){B5(n)}var e=zA;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ll=!1};function Wf(t,e){Ot.call(this),this.h=t||1,this.g=e||me,this.j=Kt(this.qb,this),this.l=Date.now()}Ft(Wf,Ot);B=Wf.prototype;B.ga=!1;B.T=null;B.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Bt(this,"tick"),this.ga&&(V_(this),this.start()))}};B.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function V_(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}B.N=function(){Wf.$.N.call(this),V_(this),delete this.g};function L_(t,e,n){if(typeof t=="function")n&&(t=Kt(t,n));else if(t&&typeof t.handleEvent=="function")t=Kt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:me.setTimeout(t,e||0)}function HA(t){t.g=L_(()=>{t.g=null,t.i&&(t.i=!1,HA(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var __=class extends Gi{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:HA(this)}N(){super.N(),this.g&&(me.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function jl(t){Gi.call(this),this.h=t,this.g={}}Ft(jl,Gi);var bA=[];function WA(t,e,n,r){Array.isArray(n)||(n&&(bA[0]=n.toString()),n=bA);for(var i=0;i<n.length;i++){var o=jA(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function KA(t){R_(t.g,function(e,n){this.g.hasOwnProperty(n)&&N_(e)},t),t.g={}}jl.prototype.N=function(){jl.$.N.call(this),KA(this)};jl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Kf(){this.g=!0}Kf.prototype.Ea=function(){this.g=!1};function z5(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");s=2<=h.length&&h[1]=="type"?s+(u+"="+l+"&"):s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function G5(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function Ca(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+W5(t,n)+(r?" "+r:"")})}function H5(t,e){t.info(function(){return"TIMEOUT: "+e})}Kf.prototype.info=function(){};function W5(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return O_(n)}catch{return e}}var Ko={},CA=null;function Qf(){return CA=CA||new Ot}Ko.Ta="serverreachability";function QA(t){Qt.call(this,Ko.Ta,t)}Ft(QA,Qt);function Ul(t){let e=Qf();Bt(e,new QA(e))}Ko.STAT_EVENT="statevent";function YA(t,e){Qt.call(this,Ko.STAT_EVENT,t),this.stat=e}Ft(YA,Qt);function fn(t){let e=Qf();Bt(e,new YA(e,t))}Ko.Ua="timingevent";function JA(t,e){Qt.call(this,Ko.Ua,t),this.size=e}Ft(JA,Qt);function Gl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return me.setTimeout(function(){t()},e)}var Yf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ZA={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function j_(){}j_.prototype.h=null;function TA(t){return t.h||(t.h=t.i())}function XA(){}var Hl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function U_(){Qt.call(this,"d")}Ft(U_,Qt);function $_(){Qt.call(this,"c")}Ft($_,Qt);var I_;function Jf(){}Ft(Jf,j_);Jf.prototype.g=function(){return new XMLHttpRequest};Jf.prototype.i=function(){return{}};I_=new Jf;function Wl(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new jl(this),this.P=K5,t=d_?125:void 0,this.V=new Wf(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ex}function ex(){this.i=null,this.g="",this.h=!1}var K5=45e3,tx={},w_={};B=Wl.prototype;B.setTimeout=function(t){this.P=t};function E_(t,e,n){t.L=1,t.A=Xf(ai(e)),t.u=n,t.S=!0,nx(t,null)}function nx(t,e){t.G=Date.now(),Kl(t),t.B=ai(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),ux(n.i,"t",r),t.o=0,n=t.l.J,t.h=new ex,t.g=Mx(t.l,n?e:null,!t.u),0<t.O&&(t.M=new __(Kt(t.Pa,t,t.g),t.O)),WA(t.U,t.g,"readystatechange",t.nb),e=t.I?VA(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Ul(),z5(t.j,t.v,t.B,t.m,t.W,t.u)}B.nb=function(t){t=t.target;let e=this.M;e&&Sr(t)==3?e.l():this.Pa(t)};B.Pa=function(t){try{if(t==this.g)e:{let u=Sr(this.g);var e=this.g.Ia();let h=this.g.da();if(!(3>u)&&(u!=3||d_||this.g&&(this.h.h||this.g.ja()||xA(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?Ul(3):Ul(2)),Zf(this);var n=this.g.da();this.ca=n;t:if(rx(this)){var r=xA(this.g);t="";var i=r.length,o=Sr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Go(this),kl(this);var s="";break t}this.h.i=new me.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,G5(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ol(a)){var l=a;break t}}l=null}if(n=l)Ca(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,b_(this,n);else{this.i=!1,this.s=3,fn(12),Go(this),kl(this);break e}}this.S?(ix(this,u,s),d_&&this.i&&u==3&&(WA(this.U,this.V,"tick",this.mb),this.V.start())):(Ca(this.j,this.m,s,null),b_(this,s)),u==4&&Go(this),this.i&&!this.J&&(u==4?Sx(this.l,this):(this.i=!1,Kl(this)))}else m9(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,fn(12)):(this.s=0,fn(13)),Go(this),kl(this)}}}catch{}finally{}};function rx(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function ix(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=Q5(t,n),i==w_){e==4&&(t.s=4,fn(14),r=!1),Ca(t.j,t.m,null,"[Incomplete Response]");break}else if(i==tx){t.s=4,fn(15),Ca(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ca(t.j,t.m,i,null),b_(t,i);rx(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,fn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),W_(e),e.M=!0,fn(11))):(Ca(t.j,t.m,n,"[Invalid Chunked Response]"),Go(t),kl(t))}B.mb=function(){if(this.g){var t=Sr(this.g),e=this.g.ja();this.o<e.length&&(Zf(this),ix(this,t,e),this.i&&t!=4&&Kl(this))}};function Q5(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?w_:(n=Number(e.substring(n,r)),isNaN(n)?tx:(r+=1,r+n>e.length?w_:(e=e.slice(r,r+n),t.o=r+n,e)))}B.cancel=function(){this.J=!0,Go(this)};function Kl(t){t.Y=Date.now()+t.P,ox(t,t.P)}function ox(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Gl(Kt(t.lb,t),e)}function Zf(t){t.C&&(me.clearTimeout(t.C),t.C=null)}B.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(H5(this.j,this.B),this.L!=2&&(Ul(),fn(17)),Go(this),this.s=2,kl(this)):ox(this,this.Y-t)};function kl(t){t.l.H==0||t.J||Sx(t.l,t)}function Go(t){Zf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,V_(t.V),KA(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function b_(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||C_(n.i,t))){if(!t.K&&C_(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)jf(n),np(n);else break e;H_(n),fn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Gl(Kt(n.ib,n),6e3));if(1>=fx(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ho(n,11)}else if((t.K||n.g==t)&&jf(n),!Ol(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let h=l[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));let g=l[5];g!=null&&typeof g=="number"&&0<g&&(r=1.5*g,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let v=t.g;if(v){let w=v.g?v.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(w){var o=r.i;o.g||w.indexOf("spdy")==-1&&w.indexOf("quic")==-1&&w.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(B_(o,o.h),o.h=null))}if(r.F){let R=v.g?v.g.getResponseHeader("X-HTTP-Session-Id"):null;R&&(r.Da=R,Ze(r.I,r.F,R))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=Rx(r,r.J?r.pa:null,r.Y),s.K){px(r.i,s);var a=s,c=r.L;c&&a.setTimeout(c),a.C&&(Zf(a),Kl(a)),r.g=s}else Tx(r);0<n.j.length&&rp(n)}else l[0]!="stop"&&l[0]!="close"||Ho(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Ho(n,7):G_(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}Ul(4)}catch{}}function Y5(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(qf(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function J5(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(qf(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function sx(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(qf(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=J5(t),r=Y5(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var ax=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Z5(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Wo(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Wo){this.h=t.h,Vf(this,t.j),this.s=t.s,this.g=t.g,Lf(this,t.m),this.l=t.l;var e=t.i,n=new $l;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),DA(this,n),this.o=t.o}else t&&(e=String(t).match(ax))?(this.h=!1,Vf(this,e[1]||"",!0),this.s=Nl(e[2]||""),this.g=Nl(e[3]||"",!0),Lf(this,e[4]),this.l=Nl(e[5]||"",!0),DA(this,e[6]||"",!0),this.o=Nl(e[7]||"")):(this.h=!1,this.i=new $l(null,this.h))}Wo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Pl(e,SA,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Pl(e,SA,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Pl(n,n.charAt(0)=="/"?t9:e9,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Pl(n,r9)),t.join("")};function ai(t){return new Wo(t)}function Vf(t,e,n){t.j=n?Nl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Lf(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function DA(t,e,n){e instanceof $l?(t.i=e,i9(t.i,t.h)):(n||(e=Pl(e,n9)),t.i=new $l(e,t.h))}function Ze(t,e,n){t.i.set(e,n)}function Xf(t){return Ze(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Nl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Pl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,X5),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function X5(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var SA=/[#\/\?@]/g,e9=/[#\?:]/g,t9=/[#\?]/g,n9=/[#\?@]/g,r9=/#/g;function $l(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Hi(t){t.g||(t.g=new Map,t.h=0,t.i&&Z5(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}B=$l.prototype;B.add=function(t,e){Hi(this),this.i=null,t=Sa(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function cx(t,e){Hi(t),e=Sa(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function lx(t,e){return Hi(t),e=Sa(t,e),t.g.has(e)}B.forEach=function(t,e){Hi(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};B.ta=function(){Hi(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};B.Z=function(t){Hi(this);let e=[];if(typeof t=="string")lx(this,t)&&(e=e.concat(this.g.get(Sa(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};B.set=function(t,e){return Hi(this),this.i=null,t=Sa(this,t),lx(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};B.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function ux(t,e,n){cx(t,e),0<n.length&&(t.i=null,t.g.set(Sa(t,e),A_(n)),t.h+=n.length)}B.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function Sa(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function i9(t,e){e&&!t.j&&(Hi(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(cx(this,r),ux(this,i,n))},t)),t.j=e}var o9=class{constructor(t,e){this.g=t,this.map=e}};function dx(t){this.l=t||s9,me.PerformanceNavigationTiming?(t=me.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(me.g&&me.g.Ka&&me.g.Ka()&&me.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var s9=10;function hx(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function fx(t){return t.h?1:t.g?t.g.size:0}function C_(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function B_(t,e){t.g?t.g.add(e):t.h=e}function px(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}dx.prototype.cancel=function(){if(this.i=mx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function mx(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return A_(t.i)}var a9=class{stringify(t){return me.JSON.stringify(t,void 0)}parse(t){return me.JSON.parse(t,void 0)}};function c9(){this.g=new a9}function l9(t,e,n){let r=n||"";try{sx(t,function(i,o){let s=i;ql(i)&&(s=O_(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function u9(t,e){let n=new Kf;if(me.Image){let r=new Image;r.onload=Rf(Of,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Rf(Of,n,r,"TestLoadImage: error",!1,e),r.onabort=Rf(Of,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Rf(Of,n,r,"TestLoadImage: timeout",!1,e),me.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Of(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ql(t){this.l=t.ec||null,this.j=t.ob||!1}Ft(Ql,j_);Ql.prototype.g=function(){return new ep(this.l,this.j)};Ql.prototype.i=function(t){return function(){return t}}({});function ep(t,e){Ot.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=q_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ft(ep,Ot);var q_=0;B=ep.prototype;B.open=function(t,e){if(this.readyState!=q_)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Bl(this)};B.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||me).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};B.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yl(this)),this.readyState=q_};B.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Bl(this)),this.g&&(this.readyState=3,Bl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof me.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gx(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function gx(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}B.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Yl(this):Bl(this),this.readyState==3&&gx(this)}};B.Za=function(t){this.g&&(this.response=this.responseText=t,Yl(this))};B.Ya=function(t){this.g&&(this.response=t,Yl(this))};B.ka=function(){this.g&&Yl(this)};function Yl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Bl(t)}B.setRequestHeader=function(t,e){this.v.append(t,e)};B.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};B.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Bl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(ep.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var d9=me.JSON.parse;function dt(t){Ot.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=vx,this.L=this.M=!1}Ft(dt,Ot);var vx="",h9=/^https?$/i,f9=["POST","PUT"];B=dt.prototype;B.Oa=function(t){this.M=t};B.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():I_.g(),this.C=this.u?TA(this.u):TA(I_),this.g.onreadystatechange=Kt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){AA(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=me.FormData&&t instanceof me.FormData,!(0<=PA(f9,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ix(this),0<this.B&&((this.L=p9(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Kt(this.ua,this)):this.A=L_(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){AA(this,o)}};function p9(t){return Da&&typeof t.timeout=="number"&&t.ontimeout!==void 0}B.ua=function(){typeof S_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Bt(this,"timeout"),this.abort(8))};function AA(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,yx(t),tp(t)}function yx(t){t.F||(t.F=!0,Bt(t,"complete"),Bt(t,"error"))}B.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Bt(this,"complete"),Bt(this,"abort"),tp(this))};B.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),tp(this,!0)),dt.$.N.call(this)};B.La=function(){this.s||(this.G||this.v||this.l?_x(this):this.kb())};B.kb=function(){_x(this)};function _x(t){if(t.h&&typeof S_<"u"&&(!t.C[1]||Sr(t)!=4||t.da()!=2)){if(t.v&&Sr(t)==4)L_(t.La,0,t);else if(Bt(t,"readystatechange"),Sr(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(ax)[1]||null;!i&&me.self&&me.self.location&&(i=me.self.location.protocol.slice(0,-1)),r=!h9.test(i?i.toLowerCase():"")}n=r}if(n)Bt(t,"complete"),Bt(t,"success");else{t.m=6;try{var o=2<Sr(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",yx(t)}}finally{tp(t)}}}}function tp(t,e){if(t.g){Ix(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Bt(t,"ready");try{n.onreadystatechange=r}catch{}}}function Ix(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(me.clearTimeout(t.A),t.A=null)}B.isActive=function(){return!!this.g};function Sr(t){return t.g?t.g.readyState:0}B.da=function(){try{return 2<Sr(this)?this.g.status:-1}catch{return-1}};B.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};B.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),d9(e)}};function xA(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case vx:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function m9(t){let e={};t=(t.g&&2<=Sr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Ol(t[r]))continue;var n=$5(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[i]||[];e[i]=o,o.push(n)}V5(e,function(r){return r.join(", ")})}B.Ia=function(){return this.m};B.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function wx(t){let e="";return R_(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function z_(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=wx(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ze(t,e,n))}function Rl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ex(t){this.Ga=0,this.j=[],this.l=new Kf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Rl("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Rl("baseRetryDelayMs",5e3,t),this.hb=Rl("retryDelaySeedMs",1e4,t),this.eb=Rl("forwardChannelMaxRetries",2,t),this.xa=Rl("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new dx(t&&t.concurrentRequestLimit),this.Ja=new c9,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}B=Ex.prototype;B.ra=8;B.H=1;function G_(t){if(bx(t),t.H==3){var e=t.W++,n=ai(t.I);if(Ze(n,"SID",t.K),Ze(n,"RID",e),Ze(n,"TYPE","terminate"),Jl(t,n),e=new Wl(t,t.l,e),e.L=2,e.A=Xf(ai(n)),n=!1,me.navigator&&me.navigator.sendBeacon)try{n=me.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&me.Image&&(new Image().src=e.A,n=!0),n||(e.g=Mx(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Kl(e)}xx(t)}function np(t){t.g&&(W_(t),t.g.cancel(),t.g=null)}function bx(t){np(t),t.u&&(me.clearTimeout(t.u),t.u=null),jf(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&me.clearTimeout(t.m),t.m=null)}function rp(t){if(!hx(t.i)&&!t.m){t.m=!0;var e=t.Na;Vl||GA(),Ll||(Vl(),Ll=!0),F_.add(e,t),t.C=0}}function g9(t,e){return fx(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Gl(Kt(t.Na,t,e),Ax(t,t.C)),t.C++,!0)}B.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Wl(this,this.l,t),o=this.s;if(this.U&&(o?(o=VA(o),LA(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Cx(this,i,e),n=ai(this.I),Ze(n,"RID",t),Ze(n,"CVER",22),this.F&&Ze(n,"X-HTTP-Session-Id",this.F),Jl(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(wx(o)))+"&"+e:this.o&&z_(n,this.o,o)),B_(this.i,i),this.bb&&Ze(n,"TYPE","init"),this.P?(Ze(n,"$req",e),Ze(n,"SID","null"),i.aa=!0,E_(i,n,null)):E_(i,n,e),this.H=2}}else this.H==3&&(t?RA(this,t):this.j.length==0||hx(this.i)||RA(this))};function RA(t,e){var n;e?n=e.m:n=t.W++;let r=ai(t.I);Ze(r,"SID",t.K),Ze(r,"RID",n),Ze(r,"AID",t.V),Jl(t,r),t.o&&t.s&&z_(r,t.o,t.s),n=new Wl(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Cx(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),B_(t.i,n),E_(n,r,e)}function Jl(t,e){t.na&&R_(t.na,function(n,r){Ze(e,r,n)}),t.h&&sx({},function(n,r){Ze(e,r,n)})}function Cx(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Kt(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let c=0;c<n;c++){let l=i[c].g,u=i[c].map;if(l-=o,0>l)o=Math.max(0,i[c].g-100),a=!1;else try{l9(u,s,"req"+l+"_")}catch{r&&r(u)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Tx(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Vl||GA(),Ll||(Vl(),Ll=!0),F_.add(e,t),t.A=0}}function H_(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Gl(Kt(t.Ma,t),Ax(t,t.A)),t.A++,!0)}B.Ma=function(){if(this.u=null,Dx(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Gl(Kt(this.jb,this),t)}};B.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,fn(10),np(this),Dx(this))};function W_(t){t.B!=null&&(me.clearTimeout(t.B),t.B=null)}function Dx(t){t.g=new Wl(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=ai(t.wa);Ze(e,"RID","rpc"),Ze(e,"SID",t.K),Ze(e,"AID",t.V),Ze(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ze(e,"TO",t.qa),Ze(e,"TYPE","xmlhttp"),Jl(t,e),t.o&&t.s&&z_(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Xf(ai(e)),n.u=null,n.S=!0,nx(n,t)}B.ib=function(){this.v!=null&&(this.v=null,np(this),H_(this),fn(19))};function jf(t){t.v!=null&&(me.clearTimeout(t.v),t.v=null)}function Sx(t,e){var n=null;if(t.g==e){jf(t),W_(t),t.g=null;var r=2}else if(C_(t.i,e))n=e.F,px(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Qf(),Bt(r,new JA(r,n)),rp(t)}else Tx(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&g9(t,e)||r==2&&H_(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ho(t,5);break;case 4:Ho(t,10);break;case 3:Ho(t,6);break;default:Ho(t,2)}}}function Ax(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ho(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Kt(t.pb,t);n||(n=new Wo("//www.google.com/images/cleardot.gif"),me.location&&me.location.protocol=="http"||Vf(n,"https"),Xf(n)),u9(n.toString(),r)}else fn(2);t.H=0,t.h&&t.h.za(e),xx(t),bx(t)}B.pb=function(t){t?(this.l.info("Successfully pinged google.com"),fn(2)):(this.l.info("Failed to ping google.com"),fn(1))};function xx(t){if(t.H=0,t.ma=[],t.h){let e=mx(t.i);(e.length!=0||t.j.length!=0)&&(wA(t.ma,e),wA(t.ma,t.j),t.i.i.length=0,A_(t.j),t.j.length=0),t.h.ya()}}function Rx(t,e,n){var r=n instanceof Wo?ai(n):new Wo(n);if(r.g!="")e&&(r.g=e+"."+r.g),Lf(r,r.m);else{var i=me.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Wo(null);r&&Vf(o,r),e&&(o.g=e),i&&Lf(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&Ze(r,n,e),Ze(r,"VER",t.ra),Jl(t,r),r}function Mx(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new dt(new Ql({ob:n})):new dt(t.va),e.Oa(t.J),e}B.isActive=function(){return!!this.h&&this.h.isActive(this)};function Nx(){}B=Nx.prototype;B.Ba=function(){};B.Aa=function(){};B.za=function(){};B.ya=function(){};B.isActive=function(){return!0};B.Va=function(){};function Uf(){if(Da&&!(10<=Number(P5)))throw Error("Environmental error: no available transport.")}Uf.prototype.g=function(t,e){return new An(t,e)};function An(t,e){Ot.call(this),this.g=new Ex(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ol(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ol(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Aa(this)}Ft(An,Ot);An.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;fn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Rx(t,null,t.Y),rp(t)};An.prototype.close=function(){G_(this.g)};An.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=O_(t),t=n);e.j.push(new o9(e.fb++,t)),e.H==3&&rp(e)};An.prototype.N=function(){this.g.h=null,delete this.j,G_(this.g),delete this.g,An.$.N.call(this)};function Px(t){U_.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Ft(Px,U_);function kx(){$_.call(this),this.status=1}Ft(kx,$_);function Aa(t){this.g=t}Ft(Aa,Nx);Aa.prototype.Ba=function(){Bt(this.g,"a")};Aa.prototype.Aa=function(t){Bt(this.g,new Px(t))};Aa.prototype.za=function(t){Bt(this.g,new kx)};Aa.prototype.ya=function(){Bt(this.g,"b")};function v9(){this.blockSize=-1}function Zn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ft(Zn,v9);Zn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function u_(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}Zn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)u_(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){u_(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){u_(this,r),i=0;break}}this.h=i,this.i+=e};Zn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function $e(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var y9={};function K_(t){return-128<=t&&128>t?R5(t,function(e){return new $e([e|0],0>e?-1:0)}):new $e([t|0],0>t?-1:0)}function Ar(t){if(isNaN(t)||!isFinite(t))return Ta;if(0>t)return $t(Ar(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=T_;return new $e(e,0)}function Ox(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return $t(Ox(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ar(Math.pow(e,8)),r=Ta,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=Ar(Math.pow(e,o)),r=r.R(o).add(Ar(s))):(r=r.R(n),r=r.add(Ar(s)))}return r}var T_=4294967296,Ta=K_(0),D_=K_(1),MA=K_(16777216);B=$e.prototype;B.ea=function(){if(Bn(this))return-$t(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:T_+r)*e,e*=T_}return t};B.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(si(this))return"0";if(Bn(this))return"-"+$t(this).toString(t);for(var e=Ar(Math.pow(t,6)),n=this,r="";;){var i=Bf(n,e).g;n=$f(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,si(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};B.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function si(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Bn(t){return t.h==-1}B.X=function(t){return t=$f(this,t),Bn(t)?-1:si(t)?0:1};function $t(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new $e(n,~t.h).add(D_)}B.abs=function(){return Bn(this)?$t(this):this};B.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new $e(n,n[n.length-1]&-2147483648?-1:0)};function $f(t,e){return t.add($t(e))}B.R=function(t){if(si(this)||si(t))return Ta;if(Bn(this))return Bn(t)?$t(this).R($t(t)):$t($t(this).R(t));if(Bn(t))return $t(this.R($t(t)));if(0>this.X(MA)&&0>t.X(MA))return Ar(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=s*c,Ff(n,2*r+2*i),n[2*r+2*i+1]+=o*c,Ff(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Ff(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Ff(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new $e(n,0)};function Ff(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ml(t,e){this.g=t,this.h=e}function Bf(t,e){if(si(e))throw Error("division by zero");if(si(t))return new Ml(Ta,Ta);if(Bn(t))return e=Bf($t(t),e),new Ml($t(e.g),$t(e.h));if(Bn(e))return e=Bf(t,$t(e)),new Ml($t(e.g),e.h);if(30<t.g.length){if(Bn(t)||Bn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=D_,r=e;0>=r.X(t);)n=NA(n),r=NA(r);var i=ba(n,1),o=ba(r,1);for(r=ba(r,2),n=ba(n,2);!si(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=ba(r,1),n=ba(n,1)}return e=$f(t,i.R(e)),new Ml(i,e)}for(i=Ta;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=Ar(n),s=o.R(e);Bn(s)||0<s.X(t);)n-=r,o=Ar(n),s=o.R(e);si(o)&&(o=D_),i=i.add(o),t=$f(t,s)}return new Ml(i,t)}B.gb=function(t){return Bf(this,t).h};B.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new $e(n,this.h&t.h)};B.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new $e(n,this.h|t.h)};B.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new $e(n,this.h^t.h)};function NA(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new $e(n,t.h)}function ba(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new $e(i,t.h)}Uf.prototype.createWebChannel=Uf.prototype.g;An.prototype.send=An.prototype.u;An.prototype.open=An.prototype.m;An.prototype.close=An.prototype.close;Yf.NO_ERROR=0;Yf.TIMEOUT=8;Yf.HTTP_ERROR=6;ZA.COMPLETE="complete";XA.EventType=Hl;Hl.OPEN="a";Hl.CLOSE="b";Hl.ERROR="c";Hl.MESSAGE="d";Ot.prototype.listen=Ot.prototype.O;dt.prototype.listenOnce=dt.prototype.P;dt.prototype.getLastError=dt.prototype.Sa;dt.prototype.getLastErrorCode=dt.prototype.Ia;dt.prototype.getStatus=dt.prototype.da;dt.prototype.getResponseJson=dt.prototype.Wa;dt.prototype.getResponseText=dt.prototype.ja;dt.prototype.send=dt.prototype.ha;dt.prototype.setWithCredentials=dt.prototype.Oa;Zn.prototype.digest=Zn.prototype.l;Zn.prototype.reset=Zn.prototype.reset;Zn.prototype.update=Zn.prototype.j;$e.prototype.add=$e.prototype.add;$e.prototype.multiply=$e.prototype.R;$e.prototype.modulo=$e.prototype.gb;$e.prototype.compare=$e.prototype.X;$e.prototype.toNumber=$e.prototype.ea;$e.prototype.toString=$e.prototype.toString;$e.prototype.getBits=$e.prototype.D;$e.fromNumber=Ar;$e.fromString=Ox;var Fx=Xn.createWebChannelTransport=function(){return new Uf},Vx=Xn.getStatEventTarget=function(){return Qf()},ip=Xn.ErrorCode=Yf,Lx=Xn.EventType=ZA,jx=Xn.Event=Ko,Q_=Xn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},One=Xn.FetchXmlHttpFactory=Ql,Zl=Xn.WebChannel=XA,Ux=Xn.XhrIo=dt,$x=Xn.Md5=Zn,Qo=Xn.Integer=$e;var Bx="@firebase/firestore";var Jt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");var Ka="10.7.2";var ts=new Ui("@firebase/firestore");function Xl(){return ts.logLevel}function q(t,...e){if(ts.logLevel<=Se.DEBUG){let n=e.map(jw);ts.debug(`Firestore (${Ka}): ${t}`,...n)}}function kr(t,...e){if(ts.logLevel<=Se.ERROR){let n=e.map(jw);ts.error(`Firestore (${Ka}): ${t}`,...n)}}function ou(t,...e){if(ts.logLevel<=Se.WARN){let n=e.map(jw);ts.warn(`Firestore (${Ka}): ${t}`,...n)}}function jw(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ue(t="Unexpected state"){let e=`FIRESTORE (${Ka}) INTERNAL ASSERTION FAILED: `+t;throw kr(e),new Error(e)}function He(t,e){t||ue()}function we(t,e){return t}var D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends Sn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Rr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var tI=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},nI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jt.UNAUTHENTICATED))}shutdown(){}};var rI=class{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Rr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>y(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Rr)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(He(typeof r.accessToken=="string"),new tI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string"),new Jt(e)}},iI=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},oI=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new iI(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},sI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},aI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,q("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(He(typeof n.token=="string"),this.R=n.token,new sI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function _9(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var lp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=_9(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function Fe(t,e){return t<e?-1:t>e?1:0}function Oa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var ft=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Ie=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new ft(0,0))}static max(){return new t(new ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var up=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(),r===void 0?r=e.length-n:r>e.length-n&&ue(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ot=class t extends up{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new G(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},I9=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Rn=class t extends up{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return I9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new G(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new G(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new G(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new G(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var oe=class t{constructor(e){this.path=e}static fromPath(e){return new t(ot.fromString(e))}static fromName(e){return new t(ot.fromString(e).popFirst(5))}static empty(){return new t(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ot(e.slice()))}};var cI=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};cI.UNKNOWN_ID=-1;function w9(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ie.fromTimestamp(r===1e9?new ft(n+1,0):new ft(n,r));return new ns(i,oe.empty(),e)}function E9(t){return new ns(t.readTime,t.key,-1)}var ns=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Ie.min(),oe.empty(),-1)}static max(){return new t(Ie.max(),oe.empty(),-1)}};function b9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:Fe(t.largestBatchId,e.largestBatchId))}var C9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",lI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function yu(t){return y(this,null,function*(){if(t.code!==D.FAILED_PRECONDITION||t.message!==C9)throw t;q("LocalStore","Unexpectedly lost primary lease")})}var k=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;n(e[l]).next(u=>{s[l]=u,++a,a===o&&r(s)},u=>i(u))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var uI=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Rr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new es(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Uw(r.target.error);this.V.reject(new es(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new es(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(q("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new hI(n)}},dp=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(lt())===12.2&&kr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return q("SimpleDb","Removing database:",e),Yo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Xh())return!1;if(t.C())return!0;let e=lt(),n=t.S(e),r=0<n&&n<10,i=t.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return y(this,null,function*(){return this.db||(q("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new es(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new G(D.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new G(D.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new es(e,s))},i.onupgradeneeded=o=>{q("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{q("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return y(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(e);let a=uI.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),k.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(q("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},dI=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Yo(this.k.delete())}},es=class extends G{constructor(e,n){super(D.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function _u(t){return t.name==="IndexedDbTransactionError"}var hI=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(q("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(q("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Yo(r)}add(e){return q("SimpleDb","ADD",this.store.name,e,e),Yo(this.store.add(e))}get(e){return Yo(this.store.get(e)).next(n=>(n===void 0&&(n=null),q("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return q("SimpleDb","DELETE",this.store.name,e),Yo(this.store.delete(e))}count(){return q("SimpleDb","COUNT",this.store.name),Yo(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new k((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.G(o,(a,c)=>{s.push(c)}).next(()=>s)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new k((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){q("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new k((r,i)=>{n.onerror=o=>{let s=Uw(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){let r=[];return new k((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new dI(a),l=n(a.primaryKey,a.value,c);if(l instanceof k){let u=l.catch(h=>(c.done(),k.reject(h)));r.push(u)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>k.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Yo(t){return new k((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=Uw(r.target.error);n(i)}})}var qx=!1;function Uw(t){let e=dp.S(lt());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new G("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qx||(qx=!0,setTimeout(()=>{throw r},0)),r}}return t}var wR=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Up(t){return t==null}function su(t){return t===0&&1/t==-1/0}function T9(t){return typeof t=="number"&&Number.isInteger(t)&&!su(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var D9=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Wne=[...D9,"documentOverlays"],S9=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],A9=S9,Kne=[...A9,"indexConfiguration","indexState","indexEntries"];function zx(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function cs(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ER(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var pt=class t{constructor(e,n){this.comparator=e,this.root=n||Mr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Na(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Na(this.root,e,this.comparator,!1)}getReverseIterator(){return new Na(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Na(this.root,e,this.comparator,!0)}},Na=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Mr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();let e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}};Mr.EMPTY=null,Mr.RED=!0,Mr.BLACK=!1;Mr.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Mr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Zt=class t{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hp(this.data.getIterator())}getIteratorFrom(e){return new hp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},hp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var qn=class t{constructor(e){this.fields=e,e.sort(Rn.comparator)}static empty(){return new t([])}unionWith(e){let n=new Zt(Rn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oa(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var fp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var pn=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new fp("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};pn.EMPTY_BYTE_STRING=new pn("");var x9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qi(t){if(He(!!t),typeof t=="string"){let e=0,n=x9.exec(t);if(He(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ht(t.seconds),nanos:ht(t.nanos)}}function ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yi(t){return typeof t=="string"?pn.fromBase64String(t):pn.fromUint8Array(t)}function $w(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Bw(t){let e=t.mapValue.fields.__previous_value__;return $w(e)?Bw(e):e}function au(t){let e=Qi(t.mapValue.fields.__local_write_time__.timestampValue);return new ft(e.seconds,e.nanos)}var fI=class{constructor(e,n,r,i,o,s,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},pp=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var op={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function rs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$w(t)?4:bR(t)?9007199254740991:10:ue()}function Or(t,e){if(t===e)return!0;let n=rs(t);if(n!==rs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return au(t).isEqual(au(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Qi(i.timestampValue),a=Qi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Yi(i.bytesValue).isEqual(Yi(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return ht(i.geoPointValue.latitude)===ht(o.geoPointValue.latitude)&&ht(i.geoPointValue.longitude)===ht(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ht(i.integerValue)===ht(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ht(i.doubleValue),a=ht(o.doubleValue);return s===a?su(s)===su(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Oa(t.arrayValue.values||[],e.arrayValue.values||[],Or);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(zx(s)!==zx(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Or(s[c],a[c])))return!1;return!0}(t,e);default:return ue()}}function cu(t,e){return(t.values||[]).find(n=>Or(n,e))!==void 0}function Fa(t,e){if(t===e)return 0;let n=rs(t),r=rs(e);if(n!==r)return Fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=ht(o.integerValue||o.doubleValue),c=ht(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Gx(t.timestampValue,e.timestampValue);case 4:return Gx(au(t),au(e));case 5:return Fe(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Yi(o),c=Yi(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=Fe(a[l],c[l]);if(u!==0)return u}return Fe(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Fe(ht(o.latitude),ht(s.latitude));return a!==0?a:Fe(ht(o.longitude),ht(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=Fa(a[l],c[l]);if(u)return u}return Fe(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===op.mapValue&&s===op.mapValue)return 0;if(o===op.mapValue)return 1;if(s===op.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){let g=Fe(c[h],u[h]);if(g!==0)return g;let v=Fa(a[c[h]],l[u[h]]);if(v!==0)return v}return Fe(c.length,u.length)}(t.mapValue,e.mapValue);default:throw ue()}}function Gx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);let n=Qi(t),r=Qi(e),i=Fe(n.seconds,r.seconds);return i!==0?i:Fe(n.nanos,r.nanos)}function Va(t){return pI(t)}function pI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Qi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Yi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=pI(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${pI(n.fields[s])}`;return i+"}"}(t.mapValue):ue()}function Hx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function mI(t){return!!t&&"integerValue"in t}function qw(t){return!!t&&"arrayValue"in t}function Wx(t){return!!t&&"nullValue"in t}function Kx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ap(t){return!!t&&"mapValue"in t}function tu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return cs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=tu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function bR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var xn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ap(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tu(n)}setAll(e){let n=Rn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=tu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());ap(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Or(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ap(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){cs(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(tu(this.value))}};function CR(t){let e=[];return cs(t.fields,(n,r)=>{let i=new Rn([n]);if(ap(r)){let o=CR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new qn(e)}var er=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,Ie.min(),Ie.min(),Ie.min(),xn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Ie.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Ie.min(),Ie.min(),xn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Ie.min(),Ie.min(),xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var La=class{constructor(e,n){this.position=e,this.inclusive=n}};function Qx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=oe.comparator(oe.fromName(s.referenceValue),n.key):r=Fa(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Yx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Or(t.position[n],e.position[n]))return!1;return!0}var ja=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function R9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var mp=class{},bt=class t extends mp{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new vI(e,n,r):n==="array-contains"?new II(e,r):n==="in"?new wI(e,r):n==="not-in"?new EI(e,r):n==="array-contains-any"?new bI(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new yI(e,r):new _I(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fa(n,this.value)):n!==null&&rs(this.value)===rs(n)&&this.matchesComparison(Fa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},tr=class t extends mp{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return TR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function TR(t){return t.op==="and"}function DR(t){return M9(t)&&TR(t)}function M9(t){for(let e of t.filters)if(e instanceof tr)return!1;return!0}function gI(t){if(t instanceof bt)return t.field.canonicalString()+t.op.toString()+Va(t.value);if(DR(t))return t.filters.map(e=>gI(e)).join(",");{let e=t.filters.map(n=>gI(n)).join(",");return`${t.op}(${e})`}}function SR(t,e){return t instanceof bt?function(r,i){return i instanceof bt&&r.op===i.op&&r.field.isEqual(i.field)&&Or(r.value,i.value)}(t,e):t instanceof tr?function(r,i){return i instanceof tr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&SR(s,i.filters[a]),!0):!1}(t,e):void ue()}function AR(t){return t instanceof bt?function(n){return`${n.field.canonicalString()} ${n.op} ${Va(n.value)}`}(t):t instanceof tr?function(n){return n.op.toString()+" {"+n.getFilters().map(AR).join(" ,")+"}"}(t):"Filter"}var vI=class extends bt{constructor(e,n,r){super(e,n,r),this.key=oe.fromName(r.referenceValue)}matches(e){let n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}},yI=class extends bt{constructor(e,n){super(e,"in",n),this.keys=xR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},_I=class extends bt{constructor(e,n){super(e,"not-in",n),this.keys=xR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function xR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>oe.fromName(r.referenceValue))}var II=class extends bt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return qw(n)&&cu(n.arrayValue,this.value)}},wI=class extends bt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&cu(this.value.arrayValue,n)}},EI=class extends bt{constructor(e,n){super(e,"not-in",n)}matches(e){if(cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!cu(this.value.arrayValue,n)}},bI=class extends bt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!qw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>cu(this.value.arrayValue,r))}};var CI=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function Jx(t,e=null,n=[],r=[],i=null,o=null,s=null){return new CI(t,e,n,r,i,o,s)}function zw(t){let e=we(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>gI(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Up(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Va(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Va(r)).join(",")),e.ce=n}return e.ce}function Gw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!R9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!SR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Yx(t.startAt,e.startAt)&&Yx(t.endAt,e.endAt)}function TI(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var is=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function N9(t,e,n,r,i,o,s,a){return new is(t,e,n,r,i,o,s,a)}function Hw(t){return new is(t)}function Zx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function RR(t){return t.collectionGroup!==null}function nu(t){let e=we(t);if(e.le===null){e.le=[];let n=new Set;for(let o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Zt(Rn.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new ja(o,r))}),n.has(Rn.keyField().canonicalString())||e.le.push(new ja(Rn.keyField(),r))}return e.le}function Nr(t){let e=we(t);return e.he||(e.he=P9(e,nu(t))),e.he}function P9(t,e){if(t.limitType==="F")return Jx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ja(i.field,o)});let n=t.endAt?new La(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new La(t.startAt.position,t.startAt.inclusive):null;return Jx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function DI(t,e){let n=t.filters.concat([e]);return new is(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function SI(t,e,n){return new is(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $p(t,e){return Gw(Nr(t),Nr(e))&&t.limitType===e.limitType}function MR(t){return`${zw(Nr(t))}|lt:${t.limitType}`}function xa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>AR(i)).join(", ")}]`),Up(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Va(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Va(i)).join(",")),`Target(${r})`}(Nr(t))}; limitType=${t.limitType})`}function Bp(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):oe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of nu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=Qx(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,nu(r),i)||r.endAt&&!function(s,a,c){let l=Qx(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,nu(r),i))}(t,e)}function k9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NR(t){return(e,n)=>{let r=!1;for(let i of nu(t)){let o=O9(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function O9(t,e,n){let r=t.field.isKeyField()?oe.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Fa(c,l):ue()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue()}}var Ji=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){cs(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return ER(this.inner)}size(){return this.innerSize}};var F9=new pt(oe.comparator);function ci(){return F9}var PR=new pt(oe.comparator);function eu(...t){let e=PR;for(let n of t)e=e.insert(n.key,n);return e}function kR(t){let e=PR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Jo(){return ru()}function OR(){return ru()}function ru(){return new Ji(t=>t.toString(),(t,e)=>t.isEqual(e))}var V9=new pt(oe.comparator),L9=new Zt(oe.comparator);function Ae(...t){let e=L9;for(let n of t)e=e.add(n);return e}var j9=new Zt(Fe);function U9(){return j9}function FR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:su(e)?"-0":e}}function VR(t){return{integerValue:""+t}}function $9(t,e){return T9(e)?VR(e):FR(t,e)}var Ua=class{constructor(){this._=void 0}};function B9(t,e,n){return t instanceof $a?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&$w(o)&&(o=Bw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof os?jR(t,e):t instanceof ss?UR(t,e):function(i,o){let s=LR(i,o),a=Xx(s)+Xx(i.Ie);return mI(s)&&mI(i.Ie)?VR(a):FR(i.serializer,a)}(t,e)}function q9(t,e,n){return t instanceof os?jR(t,e):t instanceof ss?UR(t,e):n}function LR(t,e){return t instanceof Ba?function(r){return mI(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var $a=class extends Ua{},os=class extends Ua{constructor(e){super(),this.elements=e}};function jR(t,e){let n=$R(e);for(let r of t.elements)n.some(i=>Or(i,r))||n.push(r);return{arrayValue:{values:n}}}var ss=class extends Ua{constructor(e){super(),this.elements=e}};function UR(t,e){let n=$R(e);for(let r of t.elements)n=n.filter(i=>!Or(i,r));return{arrayValue:{values:n}}}var Ba=class extends Ua{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function Xx(t){return ht(t.integerValue||t.doubleValue)}function $R(t){return qw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function z9(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof os&&i instanceof os||r instanceof ss&&i instanceof ss?Oa(r.elements,i.elements,Or):r instanceof Ba&&i instanceof Ba?Or(r.Ie,i.Ie):r instanceof $a&&i instanceof $a}(t.transform,e.transform)}var AI=class{constructor(e,n){this.version=e,this.transformResults=n}},zn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function cp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var qa=class{};function BR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new za(t.key,zn.none()):new as(t.key,t.data,zn.none());{let n=t.data,r=xn.empty(),i=new Zt(Rn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Fr(t.key,r,new qn(i.toArray()),zn.none())}}function G9(t,e,n){t instanceof as?function(i,o,s){let a=i.value.clone(),c=tR(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Fr?function(i,o,s){if(!cp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=tR(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(qR(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function iu(t,e,n,r){return t instanceof as?function(o,s,a,c){if(!cp(o.precondition,s))return a;let l=o.value.clone(),u=nR(o.fieldTransforms,c,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Fr?function(o,s,a,c){if(!cp(o.precondition,s))return a;let l=nR(o.fieldTransforms,c,s),u=s.data;return u.setAll(qR(o)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(o,s,a){return cp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function H9(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=LR(r.transform,i||null);o!=null&&(n===null&&(n=xn.empty()),n.set(r.field,o))}return n||null}function eR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Oa(r,i,(o,s)=>z9(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var as=class extends qa{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Fr=class extends qa{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function qR(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function tR(t,e,n){let r=new Map;He(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,q9(s,a,n[i]))}return r}function nR(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,B9(o,s,e))}return r}var za=class extends qa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},xI=class extends qa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var RI=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&G9(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=iu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=iu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=OR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=BR(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&Oa(this.mutations,e.mutations,(n,r)=>eR(n,r))&&Oa(this.baseMutations,e.baseMutations,(n,r)=>eR(n,r))}},MI=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){He(e.mutations.length===r.length);let i=function(){return V9}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var NI=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var PI=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var wt,Me;function W9(t){switch(t){default:return ue();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function zR(t){if(t===void 0)return kr("GRPC error has no .code"),D.UNKNOWN;switch(t){case wt.OK:return D.OK;case wt.CANCELLED:return D.CANCELLED;case wt.UNKNOWN:return D.UNKNOWN;case wt.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case wt.INTERNAL:return D.INTERNAL;case wt.UNAVAILABLE:return D.UNAVAILABLE;case wt.UNAUTHENTICATED:return D.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case wt.NOT_FOUND:return D.NOT_FOUND;case wt.ALREADY_EXISTS:return D.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return D.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case wt.ABORTED:return D.ABORTED;case wt.OUT_OF_RANGE:return D.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return D.UNIMPLEMENTED;case wt.DATA_LOSS:return D.DATA_LOSS;default:return ue()}}(Me=wt||(wt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";var rR=null;function K9(){return new TextEncoder}var Q9=new Qo([4294967295,4294967295],0);function iR(t){let e=K9().encode(t),n=new $x;return n.update(e),new Uint8Array(n.digest())}function oR(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Qo([n,r],0),new Qo([i,o],0)]}var kI=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zo(`Invalid padding: ${n}`);if(r<0)throw new Zo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zo(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Qo.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Qo.fromNumber(r)));return i.compare(Q9)===1&&(i=new Qo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=iR(e),[r,i]=oR(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let n=iR(e),[r,i]=oR(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Re(s)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Zo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var gp=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,lu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Ie.min(),i,new pt(Fe),ci(),Ae())}},lu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Ae(),Ae(),Ae())}};var Pa=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},vp=class{constructor(e,n){this.targetId=e,this.fe=n}},yp=class{constructor(e,n,r=pn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},_p=class{constructor(){this.ge=0,this.pe=aR(),this.ye=pn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ae(),n=Ae(),r=Ae();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ue()}}),new lu(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=aR()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,He(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},OI=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=ci(),this.Qe=sR(),this.Ke=new pt(Fe)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let o=i.target;if(TI(o))if(r===0){let s=new oe(o.path);this.We(n,s,er.newNoDocument(s,Ie.min()))}else He(r===1);else{let s=this.Ze(n);if(s!==r){let a=this.Xe(e),c=a?this.et(a,e,s):1;if(c!==0){this.He(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}rR?.tt(function(u,h,g,v,w){var R,C,M,X,Te,ce;let Be={localCacheCount:u,existenceFilterCount:h.count,databaseId:g.database,projectId:g.projectId},Ve=h.unchangedNames;return Ve&&(Be.bloomFilter={applied:w===0,hashCount:(R=Ve?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(X=(M=(C=Ve?.bits)===null||C===void 0?void 0:C.bitmap)===null||M===void 0?void 0:M.length)!==null&&X!==void 0?X:0,padding:(ce=(Te=Ve?.bits)===null||Te===void 0?void 0:Te.padding)!==null&&ce!==void 0?ce:0,mightContain:nn=>{var ui;return(ui=v?.mightContain(nn))!==null&&ui!==void 0&&ui}}),Be}(s,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Yi(r).toUint8Array()}catch(c){if(c instanceof fp)return ou("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new kI(s,i,o)}catch(c){return ou(c instanceof Zo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&TI(a.target)){let c=new oe(a.target.path);this.qe.get(c)!==null||this.st(s,c)||this.We(s,c,er.newNoDocument(c,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=Ae();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));let i=new gp(e,n,this.Ke,this.qe,r);return this.qe=ci(),this.Qe=sR(),this.Ke=new pt(Fe),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new _p,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Zt(Fe),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new _p),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function sR(){return new pt(oe.comparator)}function aR(){return new pt(oe.comparator)}var Y9={asc:"ASCENDING",desc:"DESCENDING"},J9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Z9={and:"AND",or:"OR"},FI=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function VI(t,e){return t.useProto3Json||Up(e)?e:{value:e}}function Ip(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function X9(t,e){return Ip(t,e.toTimestamp())}function Pr(t){return He(!!t),Ie.fromTimestamp(function(n){let r=Qi(n);return new ft(r.seconds,r.nanos)}(t))}function Ww(t,e){return LI(t,e).canonicalString()}function LI(t,e){let n=function(i){return new ot(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function HR(t){let e=ot.fromString(t);return He(JR(e)),e}function jI(t,e){return Ww(t.databaseId,e.path)}function Y_(t,e){let n=HR(e);if(n.get(1)!==t.databaseId.projectId)throw new G(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(KR(n))}function WR(t,e){return Ww(t.databaseId,e)}function e6(t){let e=HR(t);return e.length===4?ot.emptyPath():KR(e)}function UI(t){return new ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function KR(t){return He(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function cR(t,e,n){return{name:jI(t,e),fields:n.value.mapValue.fields}}function t6(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,u){return l.useProto3Json?(He(u===void 0||typeof u=="string"),pn.fromBase64String(u||"")):(He(u===void 0||u instanceof Uint8Array),pn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let u=l.code===void 0?D.UNKNOWN:zR(l.code);return new G(u,l.message||"")}(s);n=new yp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Y_(t,r.document.name),o=Pr(r.document.updateTime),s=r.document.createTime?Pr(r.document.createTime):Ie.min(),a=new xn({mapValue:{fields:r.document.fields}}),c=er.newFoundDocument(i,o,s,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Pa(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Y_(t,r.document),o=r.readTime?Pr(r.readTime):Ie.min(),s=er.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Pa([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Y_(t,r.document),o=r.removedTargetIds||[];n=new Pa([],o,i,null)}else{if(!("filter"in e))return ue();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new PI(i,o),a=r.targetId;n=new vp(a,s)}}return n}function n6(t,e){let n;if(e instanceof as)n={update:cR(t,e.key,e.value)};else if(e instanceof za)n={delete:jI(t,e.key)};else if(e instanceof Fr)n={update:cR(t,e.key,e.data),updateMask:d6(e.fieldMask)};else{if(!(e instanceof xI))return ue();n={verify:jI(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof $a)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof os)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ss)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ba)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw ue()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:X9(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ue()}(t,e.precondition)),n}function r6(t,e){return t&&t.length>0?(He(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Pr(i.updateTime):Pr(o);return s.isEqual(Ie.min())&&(s=Pr(o)),new AI(s,i.transformResults||[])}(n,e))):[]}function i6(t,e){return{documents:[WR(t,e.path)]}}function o6(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=WR(t,i);let o=function(l){if(l.length!==0)return YR(tr.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(u=>function(g){return{field:Ra(g.field),direction:c6(g.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=VI(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ut:n,parent:i}}function s6(t){let e=e6(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){He(r===1);let u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];n.where&&(o=function(h){let g=QR(h);return g instanceof tr&&DR(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(h){return h.map(g=>function(w){return new ja(Ma(w.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(h){let g;return g=typeof h=="object"?h.value:h,Up(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(h){let g=!!h.before,v=h.values||[];return new La(v,g)}(n.startAt));let l=null;return n.endAt&&(l=function(h){let g=!h.before,v=h.values||[];return new La(v,g)}(n.endAt)),N9(e,i,s,o,a,"F",c,l)}function a6(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function QR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ma(n.unaryFilter.field);return bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ma(n.unaryFilter.field);return bt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ma(n.unaryFilter.field);return bt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ma(n.unaryFilter.field);return bt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(t):t.fieldFilter!==void 0?function(n){return bt.create(Ma(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return tr.create(n.compositeFilter.filters.map(r=>QR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ue()}}(n.compositeFilter.op))}(t):ue()}function c6(t){return Y9[t]}function l6(t){return J9[t]}function u6(t){return Z9[t]}function Ra(t){return{fieldPath:t.canonicalString()}}function Ma(t){return Rn.fromServerFormat(t.fieldPath)}function YR(t){return t instanceof bt?function(n){if(n.op==="=="){if(Kx(n.value))return{unaryFilter:{field:Ra(n.field),op:"IS_NAN"}};if(Wx(n.value))return{unaryFilter:{field:Ra(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Kx(n.value))return{unaryFilter:{field:Ra(n.field),op:"IS_NOT_NAN"}};if(Wx(n.value))return{unaryFilter:{field:Ra(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ra(n.field),op:l6(n.op),value:n.value}}}(t):t instanceof tr?function(n){let r=n.getFilters().map(i=>YR(i));return r.length===1?r[0]:{compositeFilter:{op:u6(n.op),filters:r}}}(t):ue()}function d6(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function JR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var uu=class t{constructor(e,n,r,i,o=Ie.min(),s=Ie.min(),a=pn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var $I=class{constructor(e){this.ct=e}};function h6(t){let e=s6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?SI(e,e.limit,"L"):e}var wp=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(ht(e.integerValue));else if("doubleValue"in e){let r=ht(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),su(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Yi(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?bR(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ue()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),oe.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};wp.bt=new wp;var BI=class{constructor(){this._n=new qI}addToCollectionParentIndex(e,n){return this._n.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return k.resolve()}deleteFieldIndex(e,n){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,n){return k.resolve()}getDocumentsMatchingTarget(e,n){return k.resolve(null)}getIndexType(e,n){return k.resolve(0)}getFieldIndexes(e,n){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,n){return k.resolve(ns.min())}getMinOffsetFromCollectionGroup(e,n){return k.resolve(ns.min())}updateCollectionGroup(e,n,r){return k.resolve()}updateIndexEntries(e,n){return k.resolve()}},qI=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Zt(ot.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Zt(ot.comparator)).toArray()}};var Yne=new Uint8Array(0);var xr=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};xr.DEFAULT_COLLECTION_PERCENTILE=10,xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xr.DEFAULT=new xr(41943040,xr.DEFAULT_COLLECTION_PERCENTILE,xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xr.DISABLED=new xr(-1,0,0);var du=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Bn(){return new t(-1)}};var zI=class{constructor(){this.changes=new Ji(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,er.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?k.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var GI=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var HI=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&iu(r.mutation,i,qn.empty(),ft.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ae()){let i=Jo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=eu();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Jo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ae()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=ci(),s=ru(),a=function(){return ru()}();return n.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof Fr)?o=o.insert(l.key,l):u!==void 0?(s.set(l.key,u.mutation.getFieldMask()),iu(u.mutation,l,u.mutation.getFieldMask(),ft.now())):s.set(l.key,qn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,u)=>s.set(l,u)),n.forEach((l,u)=>{var h;return a.set(l,new GI(u,(h=s.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){let r=ru(),i=new pt((s,a)=>s-a),o=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let u=r.get(c)||qn.empty();u=a.applyToLocalView(l,u),r.set(c,u);let h=(i.get(a.batchId)||Ae()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,h=OR();u.forEach(g=>{if(!o.has(g)){let v=BR(n.get(g),r.get(g));v!==null&&h.set(g,v),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,h))}return k.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return oe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):RR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):k.resolve(Jo()),a=-1,c=o;return s.next(l=>k.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(u)?k.resolve():this.remoteDocumentCache.getEntry(e,u).next(g=>{c=c.insert(u,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,Ae())).next(u=>({batchId:a,changes:kR(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(r=>{let i=eu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=eu();return this.indexManager.getCollectionParents(e,o).next(a=>k.forEach(a,c=>{let l=function(h,g){return new is(g,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((h,g)=>{s=s.insert(h,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,l)=>{let u=l.getKey();s.get(u)===null&&(s=s.insert(u,er.newInvalidDocument(u)))});let a=eu();return s.forEach((c,l)=>{let u=o.get(c);u!==void 0&&iu(u.mutation,l,qn.empty(),ft.now()),Bp(n,l)&&(a=a.insert(c,l))}),a})}};var WI=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return k.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Pr(i.createTime)}}(n)),k.resolve()}getNamedQuery(e,n){return k.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:h6(i.bundledQuery),readTime:Pr(i.readTime)}}(n)),k.resolve()}};var KI=class{constructor(){this.overlays=new pt(oe.comparator),this.hr=new Map}getOverlay(e,n){return k.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Jo();return k.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),k.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),k.resolve()}getOverlaysForCollection(e,n,r){let i=Jo(),o=n.length+1,s=new oe(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return k.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new pt((l,u)=>l-u),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=o.get(l.largestBatchId);u===null&&(u=Jo(),o=o.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Jo(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return k.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new NI(n,r));let o=this.hr.get(n);o===void 0&&(o=Ae(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}};var hu=class{constructor(){this.Pr=new Zt(Et.Ir),this.Tr=new Zt(Et.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new Et(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Et(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new oe(new ot([])),r=new Et(n,e),i=new Et(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new oe(new ot([])),r=new Et(n,e),i=new Et(n,e+1),o=Ae();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Et(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Et=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return oe.comparator(e.key,n.key)||Fe(e.pr,n.pr)}static Er(e,n){return Fe(e.pr,n.pr)||oe.comparator(e.key,n.key)}};var QI=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Zt(Et.Ir)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new RI(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new Et(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(s)}lookupMutationBatch(e,n){return k.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),o=i<0?0:i;return k.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Et(n,0),i=new Et(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),k.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Zt(Fe);return n.forEach(i=>{let o=new Et(i,0),s=new Et(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),k.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;oe.isDocumentKey(o)||(o=o.child(""));let s=new Et(new oe(o),0),a=new Zt(Fe);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},s),k.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){He(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return k.forEach(n.mutations,i=>{let o=new Et(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new Et(n,0),i=this.wr.firstAfterOrEqual(r);return k.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var YI=class{constructor(e){this.vr=e,this.docs=function(){return new pt(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return k.resolve(r?r.document.mutableCopy():er.newInvalidDocument(n))}getEntries(e,n){let r=ci();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():er.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=ci(),s=n.path,a=new oe(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||b9(E9(u),r)<=0||(i.has(u.key)||Bp(n,u))&&(o=o.insert(u.key,u.mutableCopy()))}return k.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ue()}Fr(e,n){return k.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new JI(this)}getSize(e){return k.resolve(this.size)}},JI=class extends zI{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),k.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var ZI=class{constructor(e){this.persistence=e,this.Mr=new Ji(n=>zw(n),Gw),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.Or=0,this.Nr=new hu,this.targetCount=0,this.Br=du.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),k.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new du(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.qn(n),k.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(o).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return k.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),k.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),k.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),k.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return k.resolve(r)}containsKey(e,n){return k.resolve(this.Nr.containsKey(n))}};var XI=class{constructor(e,n){this.Lr={},this.overlays={},this.kr=new wR(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new ZI(this),this.indexManager=new BI,this.remoteDocumentCache=function(i){return new YI(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new $I(n),this.$r=new WI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new KI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new QI(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);let i=new ew(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return k.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},ew=class extends lI{constructor(e){super(),this.currentSequenceNumber=e}},tw=class t{constructor(e){this.persistence=e,this.zr=new hu,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw ue()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),k.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),k.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Jr,r=>{let i=oe.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,Ie.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return k.or([()=>k.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var nw=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Ae(),i=Ae();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var rw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var iw=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return lS()?8:dp.v(lt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new rw;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Xl()<=Se.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",xa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),k.resolve()):(Xl()<=Se.DEBUG&&q("QueryEngine","Query:",xa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Xl()<=Se.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",xa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nr(n))):k.resolve())}ji(e,n){if(Zx(n))return k.resolve(null);let r=Nr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=SI(n,null,"F"),r=Nr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ae(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,s,c.readTime)?this.ji(e,SI(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,r,i){return Zx(n)||i.isEqual(Ie.min())?k.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,r,i)?k.resolve(null):(Xl()<=Se.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xa(n)),this.es(e,s,n,w9(i,-1)).next(a=>a))})}Zi(e,n){let r=new Zt(NR(e));return n.forEach((i,o)=>{Bp(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return Xl()<=Se.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",xa(n)),this.zi.getDocumentsMatchingQuery(e,n,ns.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var ow=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new pt(Fe),this.rs=new Ji(o=>zw(o),Gw),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HI(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function f6(t,e,n,r){return new ow(t,e,n,r)}function ZR(t,e){return y(this,null,function*(){let n=we(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Ae();for(let l of i){s.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of o){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:s,addedBatchIds:a}))})})})}function p6(t,e){let n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let h=l.batch,g=h.keys(),v=k.resolve();return g.forEach(w=>{v=v.next(()=>u.getEntry(c,w)).next(R=>{let C=l.docVersions.get(w);He(C!==null),R.version.compareTo(C)<0&&(h.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),u.addEntry(R)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ae();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function XR(t){let e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function m6(t,e){let n=we(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((u,h)=>{let g=i.get(h);if(!g)return;a.push(n.Qr.removeMatchingKeys(o,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(o,u.addedDocuments,h)));let v=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?v=v.withResumeToken(pn.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):u.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(u.resumeToken,r)),i=i.insert(h,v),function(R,C,M){return R.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(g,v,u)&&a.push(n.Qr.updateTargetData(o,v))});let c=ci(),l=Ae();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(g6(o,s,e.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!r.isEqual(Ie.min())){let u=n.Qr.getLastRemoteSnapshotVersion(o).next(h=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(u)}return k.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(n.ns=i,o))}function g6(t,e,n){let r=Ae(),i=Ae();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=ci();return n.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ie.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:s,ls:i}})}function v6(t,e){let n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function y6(t,e){let n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,k.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new uu(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function sw(t,e,n){return y(this,null,function*(){let r=we(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!_u(s))throw s;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function lR(t,e,n){let r=we(t),i=Ie.min(),o=Ae();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,u){let h=we(c),g=h.rs.get(u);return g!==void 0?k.resolve(h.ns.get(g)):h.Qr.getTargetData(l,u)}(r,s,Nr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:Ie.min(),n?o:Ae())).next(a=>(_6(r,k9(e),a),{documents:a,hs:o})))}function _6(t,e,n){let r=t.ss.get(e)||Ie.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}var Ep=class{constructor(){this.activeTargetIds=U9()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var aw=class{constructor(){this.no=new Ep,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Ep,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var cw=class{io(e){}shutdown(){}};var bp=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var sp=null;function J_(){return sp===null?sp=function(){return 268435456+Math.round(2147483648*Math.random())}():sp++,"0x"+sp.toString(16)}var I6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var lw=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var Yt="WebChannelConnection",uw=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(n,r,i,o,s){let a=J_(),c=this.bo(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,o,s),this.Co(n,c,l,i).then(u=>(q("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw ou("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",i),u})}vo(n,r,i,o,s,a){return this.So(n,r,i,o,s)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ka}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}bo(n,r){let i=I6[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let o=J_();return new Promise((s,a)=>{let c=new Ux;c.setWithCredentials(!0),c.listenOnce(Lx.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ip.NO_ERROR:let u=c.getResponseJson();q(Yt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(u)),s(u);break;case ip.TIMEOUT:q(Yt,`RPC '${e}' ${o} timed out`),a(new G(D.DEADLINE_EXCEEDED,"Request time out"));break;case ip.HTTP_ERROR:let h=c.getStatus();if(q(Yt,`RPC '${e}' ${o} failed with status:`,h,"response text:",c.getResponseText()),h>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let v=g?.error;if(v&&v.status&&v.message){let w=function(C){let M=C.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(M)>=0?M:D.UNKNOWN}(v.status);a(new G(w,v.message))}else a(new G(D.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new G(D.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{q(Yt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);q(Yt,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",l,r,15)})}Fo(e,n,r){let i=J_(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Fx(),a=Vx(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let u=o.join("");q(Yt,`Creating RPC '${e}' stream ${i}: ${u}`,c);let h=s.createWebChannel(u,c),g=!1,v=!1,w=new lw({lo:C=>{v?q(Yt,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(g||(q(Yt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),g=!0),q(Yt,`RPC '${e}' stream ${i} sending:`,C),h.send(C))},ho:()=>h.close()}),R=(C,M,X)=>{C.listen(M,Te=>{try{X(Te)}catch(ce){setTimeout(()=>{throw ce},0)}})};return R(h,Zl.EventType.OPEN,()=>{v||q(Yt,`RPC '${e}' stream ${i} transport opened.`)}),R(h,Zl.EventType.CLOSE,()=>{v||(v=!0,q(Yt,`RPC '${e}' stream ${i} transport closed`),w.Vo())}),R(h,Zl.EventType.ERROR,C=>{v||(v=!0,ou(Yt,`RPC '${e}' stream ${i} transport errored:`,C),w.Vo(new G(D.UNAVAILABLE,"The operation could not be completed")))}),R(h,Zl.EventType.MESSAGE,C=>{var M;if(!v){let X=C.data[0];He(!!X);let Te=X,ce=Te.error||((M=Te[0])===null||M===void 0?void 0:M.error);if(ce){q(Yt,`RPC '${e}' stream ${i} received error:`,ce);let Be=ce.status,Ve=function(ao){let Pu=wt[ao];if(Pu!==void 0)return zR(Pu)}(Be),nn=ce.message;Ve===void 0&&(Ve=D.INTERNAL,nn="Unknown error status: "+Be+" with message "+ce.message),v=!0,w.Vo(new G(Ve,nn)),h.close()}else q(Yt,`RPC '${e}' stream ${i} received:`,X),w.mo(X)}}),R(a,jx.STAT_EVENT,C=>{C.stat===Q_.PROXY?q(Yt,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===Q_.NOPROXY&&q(Yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.Ro()},0),w}};function Z_(){return typeof document<"u"?document:null}function qp(t){return new FI(t,!0)}var Cp=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var Tp=class{constructor(e,n,r,i,o,s,a,c){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Cp(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return y(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return y(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return y(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(kr(n.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new G(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>y(this,null,function*(){this.state=0,this.start()}))}__(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},dw=class extends Tp{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=t6(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ie.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Ie.min():s.readTime?Pr(s.readTime):Ie.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=UI(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=TI(c)?{documents:i6(o,c)}:{query:o6(o,c).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=GR(o,s.resumeToken);let l=VI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Ie.min())>0){a.readTime=Ip(o,s.snapshotVersion.toTimestamp());let l=VI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=a6(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=UI(this.serializer),n.removeTarget=e,this.t_(n)}},hw=class extends Tp{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(He(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=r6(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.T_(r,n)}return He(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=UI(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>n6(this.serializer,r))};this.t_(n)}};var fw=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new G(D.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,LI(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(D.UNKNOWN,o.toString())})}vo(e,n,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,LI(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(D.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var pw=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(kr(n),this.g_=!1):q("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var mw=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{r.enqueueAndForget(()=>y(this,null,function*(){ls(this)&&(q("RemoteStore","Restarting streams for network reachability change."),yield function(c){return y(this,null,function*(){let l=we(c);l.v_.add(4),yield Iu(l),l.x_.set("Unknown"),l.v_.delete(4),yield zp(l)})}(this))}))}),this.x_=new pw(r,i)}};function zp(t){return y(this,null,function*(){if(ls(t))for(let e of t.F_)yield e(!0)})}function Iu(t){return y(this,null,function*(){for(let e of t.F_)yield e(!1)})}function eM(t,e){let n=we(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),Yw(n)?Qw(n):Qa(n).Jo()&&Kw(n,e))}function tM(t,e){let n=we(t),r=Qa(n);n.C_.delete(e),r.Jo()&&nM(n,e),n.C_.size===0&&(r.Jo()?r.Xo():ls(n)&&n.x_.set("Unknown"))}function Kw(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qa(t).c_(e)}function nM(t,e){t.O_.Oe(e),Qa(t).l_(e)}function Qw(t){t.O_=new OI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Qa(t).start(),t.x_.p_()}function Yw(t){return ls(t)&&!Qa(t).Ho()&&t.C_.size>0}function ls(t){return we(t).v_.size===0}function rM(t){t.O_=void 0}function w6(t){return y(this,null,function*(){t.C_.forEach((e,n)=>{Kw(t,e)})})}function E6(t,e){return y(this,null,function*(){rM(t),Yw(t)?(t.x_.S_(e),Qw(t)):t.x_.set("Unknown")})}function b6(t,e,n){return y(this,null,function*(){if(t.x_.set("Online"),e instanceof yp&&e.state===2&&e.cause)try{yield function(i,o){return y(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Dp(t,r)}else if(e instanceof Pa?t.O_.$e(e):e instanceof vp?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(Ie.min()))try{let r=yield XR(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.O_.it(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=o.C_.get(l);u&&o.C_.set(l,u.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let u=o.C_.get(c);if(!u)return;o.C_.set(c,u.withResumeToken(pn.EMPTY_BYTE_STRING,u.snapshotVersion)),nM(o,c);let h=new uu(u.target,c,l,u.sequenceNumber);Kw(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){q("RemoteStore","Failed to raise snapshot:",r),yield Dp(t,r)}})}function Dp(t,e,n){return y(this,null,function*(){if(!_u(e))throw e;t.v_.add(1),yield Iu(t),t.x_.set("Offline"),n||(n=()=>XR(t.localStore)),t.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){q("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield zp(t)}))})}function iM(t,e){return e().catch(n=>Dp(t,n,e))}function Gp(t){return y(this,null,function*(){let e=we(t),n=Zi(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;C6(e);)try{let i=yield v6(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,T6(e,i)}catch(i){yield Dp(e,i)}oM(e)&&sM(e)})}function C6(t){return ls(t)&&t.D_.length<10}function T6(t,e){t.D_.push(e);let n=Zi(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function oM(t){return ls(t)&&!Zi(t).Ho()&&t.D_.length>0}function sM(t){Zi(t).start()}function D6(t){return y(this,null,function*(){Zi(t).d_()})}function S6(t){return y(this,null,function*(){let e=Zi(t);for(let n of t.D_)e.I_(n.mutations)})}function A6(t,e,n){return y(this,null,function*(){let r=t.D_.shift(),i=MI.from(r,e,n);yield iM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Gp(t)})}function x6(t,e){return y(this,null,function*(){e&&Zi(t).P_&&(yield function(r,i){return y(this,null,function*(){if(function(s){return W9(s)&&s!==D.ABORTED}(i.code)){let o=r.D_.shift();Zi(r).Zo(),yield iM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Gp(r)}})}(t,e)),oM(t)&&sM(t)})}function uR(t,e){return y(this,null,function*(){let n=we(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");let r=ls(n);n.v_.add(3),yield Iu(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield zp(n)})}function R6(t,e){return y(this,null,function*(){let n=we(t);e?(n.v_.delete(2),yield zp(n)):e||(n.v_.add(2),yield Iu(n),n.x_.set("Unknown"))})}function Qa(t){return t.N_||(t.N_=function(n,r,i){let o=we(n);return o.R_(),new dw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:w6.bind(null,t),To:E6.bind(null,t),u_:b6.bind(null,t)}),t.F_.push(e=>y(this,null,function*(){e?(t.N_.Zo(),Yw(t)?Qw(t):t.x_.set("Unknown")):(yield t.N_.stop(),rM(t))}))),t.N_}function Zi(t){return t.B_||(t.B_=function(n,r,i){let o=we(n);return o.R_(),new hw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:D6.bind(null,t),To:x6.bind(null,t),E_:S6.bind(null,t),T_:A6.bind(null,t)}),t.F_.push(e=>y(this,null,function*(){e?(t.B_.Zo(),yield Gp(t)):(yield t.B_.stop(),t.D_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}var gw=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Jw(t,e){if(kr("AsyncQueue",`${e}: ${t}`),_u(t))return new G(D.UNAVAILABLE,`${e}: ${t}`);throw t}var Sp=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||oe.comparator(n.key,r.key):(n,r)=>oe.comparator(n.key,r.key),this.keyedMap=eu(),this.sortedSet=new pt(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Ap=class{constructor(){this.L_=new pt(oe.comparator)}track(e){let n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):ue():this.L_=this.L_.insert(n,e)}k_(){let e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}},Ga=class t{constructor(e,n,r,i,o,s,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Sp.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$p(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var vw=class{constructor(){this.q_=void 0,this.Q_=[]}},yw=class{constructor(){this.queries=new Ji(e=>MR(e),$p),this.onlineState="Unknown",this.K_=new Set}};function M6(t,e){return y(this,null,function*(){let n=we(t),r=e.query,i=!1,o=n.queries.get(r);if(o||(i=!0,o=new vw),i)try{o.q_=yield n.onListen(r)}catch(s){let a=Jw(s,`Initialization of query '${xa(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.Q_.push(e),e.U_(n.onlineState),o.q_&&e.W_(o.q_)&&Zw(n)})}function N6(t,e){return y(this,null,function*(){let n=we(t),r=e.query,i=!1,o=n.queries.get(r);if(o){let s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),i=o.Q_.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function P6(t,e){let n=we(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Q_)a.W_(i)&&(r=!0);s.q_=i}}r&&Zw(n)}function k6(t,e,n){let r=we(t),i=r.queries.get(e);if(i)for(let o of i.Q_)o.onError(n);r.queries.delete(e)}function Zw(t){t.K_.forEach(e=>{e.next()})}var _w=class{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ga(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;let n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=Ga.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}};var xp=class{constructor(e){this.key=e}},Rp=class{constructor(e){this.key=e}},Iw=class{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Ae(),this.mutatedKeys=Ae(),this.ua=NR(e),this.ca=new Sp(this.ua)}get la(){return this.oa}ha(e,n){let r=n?n.Pa:new Ap,i=n?n.ca:this.ca,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{let g=i.get(u),v=Bp(this.query,h)?h:null,w=!!g&&this.mutatedKeys.has(g.key),R=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),C=!1;g&&v?g.data.isEqual(v.data)?w!==R&&(r.track({type:3,doc:v}),C=!0):this.Ia(g,v)||(r.track({type:2,doc:v}),C=!0,(c&&this.ua(v,c)>0||l&&this.ua(v,l)<0)&&(a=!0)):!g&&v?(r.track({type:0,doc:v}),C=!0):g&&!v&&(r.track({type:1,doc:g}),C=!0,(c||l)&&(a=!0)),C&&(v?(s=s.add(v),o=R?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{ca:s,Pa:r,Xi:a,mutatedKeys:o}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;let s=e.Pa.k_();s.sort((u,h)=>function(v,w){let R=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return R(v)-R(w)}(u.type,h.type)||this.ua(u.doc,h.doc)),this.Ta(r),i=i!=null&&i;let a=n&&!i?this.Ea():[],c=this.aa.size===0&&this.current&&!i?1:0,l=c!==this._a;return this._a=c,s.length!==0||l?{snapshot:new Ga(this.query,e.ca,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Ap,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];let e=this.aa;this.aa=Ae(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});let n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new Rp(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new xp(r))}),n}Ra(e){this.oa=e.hs,this.aa=Ae();let n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return Ga.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},ww=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Ew=class{constructor(e){this.key=e,this.ma=!1}},bw=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Ji(a=>MR(a),$p),this.pa=new Map,this.ya=new Set,this.wa=new pt(oe.comparator),this.Sa=new Map,this.ba=new hu,this.Da={},this.Ca=new Map,this.va=du.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function O6(t,e){return y(this,null,function*(){let n=G6(t),r,i,o=n.ga.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{let s=yield y6(n.localStore,Nr(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield F6(n,e,r,a==="current",s.resumeToken),n.isPrimaryClient&&eM(n.remoteStore,s)}return i})}function F6(t,e,n,r,i){return y(this,null,function*(){t.Ma=(h,g,v)=>function(R,C,M,X){return y(this,null,function*(){let Te=C.view.ha(M);Te.Xi&&(Te=yield lR(R.localStore,C.query,!1).then(({documents:nn})=>C.view.ha(nn,Te)));let ce=X&&X.targetChanges.get(C.targetId),Be=X&&X.targetMismatches.get(C.targetId)!=null,Ve=C.view.applyChanges(Te,R.isPrimaryClient,ce,Be);return hR(R,C.targetId,Ve.da),Ve.snapshot})}(t,h,g,v);let o=yield lR(t.localStore,e,!0),s=new Iw(e,o.hs),a=s.ha(o.documents),c=lu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,c);hR(t,n,l.da);let u=new ww(e,n,s);return t.ga.set(e,u),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),l.snapshot})}function V6(t,e){return y(this,null,function*(){let n=we(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(o=>!$p(o,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield sw(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),tM(n.remoteStore,r.targetId),Cw(n,r.targetId)}).catch(yu))):(Cw(n,r.targetId),yield sw(n.localStore,r.targetId,!0))})}function L6(t,e,n){return y(this,null,function*(){let r=H6(t);try{let i=yield function(s,a){let c=we(s),l=ft.now(),u=a.reduce((v,w)=>v.add(w.key),Ae()),h,g;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=ci(),R=Ae();return c.os.getEntries(v,u).next(C=>{w=C,w.forEach((M,X)=>{X.isValidDocument()||(R=R.add(M))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,w)).next(C=>{h=C;let M=[];for(let X of a){let Te=H9(X,h.get(X.key).overlayedDocument);Te!=null&&M.push(new Fr(X.key,Te,CR(Te.value.mapValue),zn.exists(!0)))}return c.mutationQueue.addMutationBatch(v,l,M,a)}).next(C=>{g=C;let M=C.applyToLocalDocumentSet(h,R);return c.documentOverlayCache.saveOverlays(v,C.batchId,M)})}).then(()=>({batchId:g.batchId,changes:kR(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Da[s.currentUser.toKey()];l||(l=new pt(Fe)),l=l.insert(a,c),s.Da[s.currentUser.toKey()]=l}(r,i.batchId,n),yield wu(r,i.changes),yield Gp(r.remoteStore)}catch(i){let o=Jw(i,"Failed to persist write");n.reject(o)}})}function aM(t,e){return y(this,null,function*(){let n=we(t);try{let r=yield m6(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Sa.get(o);s&&(He(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.ma=!0:i.modifiedDocuments.size>0?He(s.ma):i.removedDocuments.size>0&&(He(s.ma),s.ma=!1))}),yield wu(n,r,e)}catch(r){yield yu(r)}})}function dR(t,e,n){let r=we(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ga.forEach((o,s)=>{let a=s.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=we(s);c.onlineState=a;let l=!1;c.queries.forEach((u,h)=>{for(let g of h.Q_)g.U_(a)&&(l=!0)}),l&&Zw(c)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function j6(t,e,n){return y(this,null,function*(){let r=we(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Sa.get(e),o=i&&i.key;if(o){let s=new pt(oe.comparator);s=s.insert(o,er.newNoDocument(o,Ie.min()));let a=Ae().add(o),c=new gp(Ie.min(),new Map,new pt(Fe),s,a);yield aM(r,c),r.wa=r.wa.remove(o),r.Sa.delete(e),Xw(r)}else yield sw(r.localStore,e,!1).then(()=>Cw(r,e,n)).catch(yu)})}function U6(t,e){return y(this,null,function*(){let n=we(t),r=e.batch.batchId;try{let i=yield p6(n.localStore,e);lM(n,r,null),cM(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield wu(n,i)}catch(i){yield yu(i)}})}function $6(t,e,n){return y(this,null,function*(){let r=we(t);try{let i=yield function(s,a){let c=we(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(He(h!==null),u=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,e);lM(r,e,n),cM(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield wu(r,i)}catch(i){yield yu(i)}})}function cM(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function lM(t,e,n){let r=we(t),i=r.Da[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function Cw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||uM(t,r)})}function uM(t,e){t.ya.delete(e.path.canonicalString());let n=t.wa.get(e);n!==null&&(tM(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),Xw(t))}function hR(t,e,n){for(let r of n)r instanceof xp?(t.ba.addReference(r.key,e),B6(t,r)):r instanceof Rp?(q("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||uM(t,r.key)):ue()}function B6(t,e){let n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(q("SyncEngine","New document in limbo: "+n),t.ya.add(r),Xw(t))}function Xw(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){let e=t.ya.values().next().value;t.ya.delete(e);let n=new oe(ot.fromString(e)),r=t.va.next();t.Sa.set(r,new Ew(n)),t.wa=t.wa.insert(n,r),eM(t.remoteStore,new uu(Nr(Hw(n.path)),r,"TargetPurposeLimboResolution",wR._e))}}function wu(t,e,n){return y(this,null,function*(){let r=we(t),i=[],o=[],s=[];r.ga.isEmpty()||(r.ga.forEach((a,c)=>{s.push(r.Ma(c,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);let u=nw.Ki(c.targetId,l);o.push(u)}}))}),yield Promise.all(s),r.fa.u_(i),yield function(c,l){return y(this,null,function*(){let u=we(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>k.forEach(l,g=>k.forEach(g.qi,v=>u.persistence.referenceDelegate.addReference(h,g.targetId,v)).next(()=>k.forEach(g.Qi,v=>u.persistence.referenceDelegate.removeReference(h,g.targetId,v)))))}catch(h){if(!_u(h))throw h;q("LocalStore","Failed to update sequence numbers: "+h)}for(let h of l){let g=h.targetId;if(!h.fromCache){let v=u.ns.get(g),w=v.snapshotVersion,R=v.withLastLimboFreeSnapshotVersion(w);u.ns=u.ns.insert(g,R)}}})}(r.localStore,o))})}function q6(t,e){return y(this,null,function*(){let n=we(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());let r=yield ZR(n.localStore,e);n.currentUser=e,function(o,s){o.Ca.forEach(a=>{a.forEach(c=>{c.reject(new G(D.CANCELLED,s))})}),o.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield wu(n,r.us)}})}function z6(t,e){let n=we(t),r=n.Sa.get(e);if(r&&r.ma)return Ae().add(r.key);{let i=Ae(),o=n.pa.get(e);if(!o)return i;for(let s of o){let a=n.ga.get(s);i=i.unionWith(a.view.la)}return i}}function G6(t){let e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j6.bind(null,e),e.fa.u_=P6.bind(null,e.eventManager),e.fa.xa=k6.bind(null,e.eventManager),e}function H6(t){let e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=U6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$6.bind(null,e),e}var Mp=class{constructor(){this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){this.serializer=qp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return f6(this.persistence,new iw,e.initialUser,this.serializer)}createPersistence(e){return new XI(tw.Hr,this.serializer)}createSharedClientState(e){return new aw}terminate(){return y(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Tw=class{initialize(e,n){return y(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=q6.bind(null,this.syncEngine),yield R6(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new yw}()}createDatastore(e){let n=qp(e.databaseInfo.databaseId),r=function(o){return new uw(o)}(e.databaseInfo);return function(o,s,a,c){return new fw(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new mw(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>dR(this.syncEngine,n,0),function(){return bp.D()?new bp:new cw}())}createSyncEngine(e,n){return function(i,o,s,a,c,l,u){let h=new bw(i,o,s,a,c,l);return u&&(h.Fa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return y(this,null,function*(){var e;yield function(r){return y(this,null,function*(){let i=we(r);q("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield Iu(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Dw=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Sw=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Jt.UNAUTHENTICATED,this.clientId=lp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>y(this,null,function*(){q("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G(D.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Jw(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function X_(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield ZR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function fR(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield K6(t);q("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>uR(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>uR(e.remoteStore,i)),t._onlineComponents=e})}function W6(t){return t.name==="FirebaseError"?t.code===D.FAILED_PRECONDITION||t.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function K6(t){return y(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{yield X_(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!W6(n))throw n;ou("Error using user provided cache. Falling back to memory cache: "+n),yield X_(t,new Mp)}}else q("FirestoreClient","Using default OfflineComponentProvider"),yield X_(t,new Mp);return t._offlineComponents})}function dM(t){return y(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),yield fR(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),yield fR(t,new Tw))),t._onlineComponents})}function Q6(t){return dM(t).then(e=>e.syncEngine)}function pR(t){return y(this,null,function*(){let e=yield dM(t),n=e.eventManager;return n.onListen=O6.bind(null,e.syncEngine),n.onUnlisten=V6.bind(null,e.syncEngine),n})}function hM(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var mR=new Map;function fM(t,e,n){if(!n)throw new G(D.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Y6(t,e,n,r){if(e===!0&&r===!0)throw new G(D.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function gR(t){if(!oe.isDocumentKey(t))throw new G(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vR(t){if(oe.isDocumentKey(t))throw new G(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Hp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue()}function Wi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Hp(t);throw new G(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Np=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Y6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new G(D.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new G(D.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new G(D.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},fu=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Np({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new G(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Np(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new nI;switch(r.type){case"firstParty":return new oI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=mR.get(n);r&&(q("ComponentProvider","Removing Datastore"),mR.delete(n),r.terminate())}(this),Promise.resolve()}};var Ha=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},In=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Ki=class t extends Ha{constructor(e,n,r){super(e,n,Hw(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new In(this.firestore,null,new oe(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function pM(t,e,...n){if(t=ut(t),fM("collection","path",e),t instanceof fu){let r=ot.fromString(e,...n);return vR(r),new Ki(t,null,r)}{if(!(t instanceof In||t instanceof Ki))throw new G(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ot.fromString(e,...n));return vR(r),new Ki(t.firestore,null,r)}}function eE(t,e,...n){if(t=ut(t),arguments.length===1&&(e=lp.newId()),fM("doc","path",e),t instanceof fu){let r=ot.fromString(e,...n);return gR(r),new In(t,null,new oe(r))}{if(!(t instanceof In||t instanceof Ki))throw new G(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ot.fromString(e,...n));return gR(r),new In(t.firestore,t instanceof Ki?t.converter:null,new oe(r))}}var Aw=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Cp(this,"async_queue_retry"),this._u=()=>{let n=Z_();n&&q("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=Z_();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;let n=Z_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});let n=new Rr;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){return y(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!_u(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(e){let n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw kr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);let i=gw.createAndSchedule(this,e,n,r,o=>this.lu(o));return this.nu.push(i),i}au(){this.ru&&ue()}verifyOperationInProgress(){}hu(){return y(this,null,function*(){let e;do e=this.Xa,yield e;while(e!==this.Xa)})}Pu(e){for(let n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){let n=this.nu.indexOf(e);this.nu.splice(n,1)}};function yR(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var li=class extends fu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Aw}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||gM(this),this._firestoreClient.terminate()}};function mM(t,e,n){n||(n="(default)");let r=vl(t,"firestore");if(r.isInitialized(n)){let i=r.getImmediate({identifier:n}),o=r.getOptions(n);if(ji(o,e))return i;throw new G(D.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new G(D.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function tE(t){return t._firestoreClient||gM(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function gM(t){var e,n,r;let i=t._freezeSettings(),o=function(a,c,l,u){return new fI(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,hM(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Sw(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var pu=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(pn.fromBase64String(e))}catch(n){throw new G(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Wa=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var mu=class{constructor(e){this._methodName=e}};var gu=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}};var J6=/^__.*__$/,xw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new as(e,this.data,n,this.fieldTransforms)}},Pp=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function vM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}var Rw=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Op(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(vM(this.du)&&J6.test(e))throw this.pu('Document fields cannot begin and end with "__"')}},Mw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qp(e)}Su(e,n,r,i=!1){return new Rw({du:e,methodName:n,wu:r,path:Rn.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Wp(t){let e=t._freezeSettings(),n=qp(t._databaseId);return new Mw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nE(t,e,n,r,i,o={}){let s=t.Su(o.merge||o.mergeFields?2:0,e,n,i);rE("Data must be an object, but it was:",s,r);let a=yM(r,s),c,l;if(o.merge)c=new qn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let u=[];for(let h of o.mergeFields){let g=Nw(e,h,n);if(!s.contains(g))throw new G(D.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);IM(u,g)||u.push(g)}c=new qn(u),l=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=s.fieldTransforms;return new xw(new xn(a),c,l)}var kp=class t extends mu{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function Z6(t,e,n,r){let i=t.Su(1,e,n);rE("Data must be an object, but it was:",i,r);let o=[],s=xn.empty();cs(r,(c,l)=>{let u=iE(e,c,n);l=ut(l);let h=i.fu(u);if(l instanceof kp)o.push(u);else{let g=Eu(l,h);g!=null&&(o.push(u),s.set(u,g))}});let a=new qn(o);return new Pp(s,a,i.fieldTransforms)}function X6(t,e,n,r,i,o){let s=t.Su(1,e,n),a=[Nw(e,r,n)],c=[i];if(o.length%2!=0)throw new G(D.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(Nw(e,o[g])),c.push(o[g+1]);let l=[],u=xn.empty();for(let g=a.length-1;g>=0;--g)if(!IM(l,a[g])){let v=a[g],w=c[g];w=ut(w);let R=s.fu(v);if(w instanceof kp)l.push(v);else{let C=Eu(w,R);C!=null&&(l.push(v),u.set(v,C))}}let h=new qn(l);return new Pp(u,h,s.fieldTransforms)}function e8(t,e,n,r=!1){return Eu(n,t.Su(r?4:3,e))}function Eu(t,e){if(_M(t=ut(t)))return rE("Unsupported field value:",e,t),yM(t,e);if(t instanceof mu)return function(r,i){if(!vM(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Eu(a,i.gu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=ut(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $9(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ft.fromDate(r);return{timestampValue:Ip(i.serializer,o)}}if(r instanceof ft){let o=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ip(i.serializer,o)}}if(r instanceof gu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pu)return{bytesValue:GR(i.serializer,r._byteString)};if(r instanceof In){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.pu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ww(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${Hp(r)}`)}(t,e)}function yM(t,e){let n={};return ER(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cs(t,(r,i)=>{let o=Eu(i,e.Ru(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function _M(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ft||t instanceof gu||t instanceof pu||t instanceof In||t instanceof mu)}function rE(t,e,n){if(!_M(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Hp(n);throw r==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function Nw(t,e,n){if((e=ut(e))instanceof Wa)return e._internalPath;if(typeof e=="string")return iE(t,e);throw Op("Field path arguments must be of type string or ",t,!1,void 0,n)}var t8=new RegExp("[~\\*/\\[\\]]");function iE(t,e,n){if(e.search(t8)>=0)throw Op(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wa(...e.split("."))._internalPath}catch{throw Op(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Op(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new G(D.INVALID_ARGUMENT,a+t+c)}function IM(t,e){return t.some(n=>n.isEqual(e))}var Fp=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Pw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(oE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Pw=class extends Fp{data(){return super.data()}};function oE(t,e){return typeof e=="string"?iE(t,e):e instanceof Wa?e._internalPath:e._delegate._internalPath}function n8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var vu=class{},kw=class extends vu{};function wM(t,e,...n){let r=[];e instanceof vu&&r.push(e),r=r.concat(n),function(o){let s=o.filter(c=>c instanceof Ow).length,a=o.filter(c=>c instanceof Vp).length;if(s>1||s>0&&a>0)throw new G(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Vp=class t extends kw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return bM(e._query,n),new Ha(e.firestore,e.converter,DI(e._query,n))}_parse(e){let n=Wp(e.firestore);return function(o,s,a,c,l,u,h){let g;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new G(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){IR(h,u);let v=[];for(let w of h)v.push(_R(c,o,w));g={arrayValue:{values:v}}}else g=_R(c,o,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||IR(h,u),g=e8(a,s,h,u==="in"||u==="not-in");return bt.create(l,u,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function EM(t,e,n){let r=e,i=oE("where",t);return Vp._create(i,r,n)}var Ow=class t extends vu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:tr.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)bM(s,c),s=DI(s,c)}(e._query,n),new Ha(e.firestore,e.converter,DI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function _R(t,e,n){if(typeof(n=ut(n))=="string"){if(n==="")throw new G(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RR(e)&&n.indexOf("/")!==-1)throw new G(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(ot.fromString(n));if(!oe.isDocumentKey(r))throw new G(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hx(t,new oe(r))}if(n instanceof In)return Hx(t,n._key);throw new G(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hp(n)}.`)}function IR(t,e){if(!Array.isArray(t)||t.length===0)throw new G(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bM(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Fw=class{convertValue(e,n="none"){switch(rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ue()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return cs(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new gu(ht(e.latitude),ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Bw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(au(e));default:return null}}convertTimestamp(e){let n=Qi(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ot.fromString(e);He(JR(r));let i=new pp(r.get(1),r.get(3)),o=new oe(r.popFirst(5));return i.isEqual(n)||kr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function sE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Xo=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Lp=class extends Fp{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ka(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(oE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},ka=class extends Lp{data(e={}){return super.data(e)}},Vw=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Xo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ka(this._firestore,this._userDataWriter,r.key,r,new Xo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new ka(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new ka(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:r8(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function r8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue()}}var jp=class extends Fw{constructor(e){super(),this.firestore=e}convertBytes(e){return new pu(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,n)}};function CM(t,e,n){t=Wi(t,In);let r=Wi(t.firestore,li),i=sE(t.converter,e,n);return Kp(r,[nE(Wp(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,zn.none())])}function TM(t){return Kp(Wi(t.firestore,li),[new za(t._key,zn.none())])}function DM(t,e){let n=Wi(t.firestore,li),r=eE(t),i=sE(t.converter,e);return Kp(n,[nE(Wp(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,zn.exists(!1))]).then(()=>r)}function aE(t,...e){var n,r,i;t=ut(t);let o={includeMetadataChanges:!1},s=0;typeof e[s]!="object"||yR(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges};if(yR(e[s])){let h=e[s];e[s]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[s+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[s+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,l,u;if(t instanceof In)l=Wi(t.firestore,li),u=Hw(t._key.path),c={next:h=>{e[s]&&e[s](i8(l,t,h))},error:e[s+1],complete:e[s+2]};else{let h=Wi(t,Ha);l=Wi(h.firestore,li),u=h._query;let g=new jp(l);c={next:v=>{e[s]&&e[s](new Vw(l,g,h,v))},error:e[s+1],complete:e[s+2]},n8(t._query)}return function(g,v,w,R){let C=new Dw(R),M=new _w(v,C,w);return g.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return M6(yield pR(g),M)})),()=>{C.La(),g.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return N6(yield pR(g),M)}))}}(tE(l),u,a,c)}function Kp(t,e){return function(r,i){let o=new Rr;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return L6(yield Q6(r),i,o)})),o.promise}(tE(t),e)}function i8(t,e,n){let r=n.docs.get(e._key),i=new jp(t);return new Lp(t,i,e._key,r,new Xo(n.hasPendingWrites,n.fromCache),e.converter)}var Lw=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Wp(e)}set(e,n,r){this._verifyNotCommitted();let i=eI(e,this._firestore),o=sE(i.converter,n,r),s=nE(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,zn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=eI(e,this._firestore),s;return s=typeof(n=ut(n))=="string"||n instanceof Wa?X6(this._dataReader,"WriteBatch.update",o._key,n,r,i):Z6(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,zn.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=eI(e,this._firestore);return this._mutations=this._mutations.concat(new za(n._key,zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(D.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function eI(t,e){if((t=ut(t)).firestore!==e)throw new G(D.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function SM(t){return tE(t=Wi(t,li)),new Lw(t,e=>Kp(t,e))}(function(e,n=!0){(function(i){Ka=i})(qi),Bi(new $n("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new li(new rI(r.getProvider("auth-internal")),new aI(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new G(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pp(l.options.projectId,u)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),At(Bx,"4.4.1",e),At(Bx,"4.4.1","esm2017")})();var Qp=function(){return Qp=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Qp.apply(this,arguments)};var a8={includeMetadataChanges:!1};function cE(t,e){return e===void 0&&(e=a8),new de(function(n){var r=aE(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function AM(t){return cE(t,{includeMetadataChanges:!0})}function xM(t,e){return e===void 0&&(e={}),AM(t).pipe(P(function(n){return lE(n,e)}))}function lE(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Qp(Qp({},r),(n={},n[e.idField]=t.id,n))}function RM(t){return cE(t,{includeMetadataChanges:!0}).pipe(P(function(e){return e.docs}))}function MM(t,e){return e===void 0&&(e={}),RM(t).pipe(P(function(n){return n.map(function(r){return lE(r,e)})}))}var us=class{constructor(e){return e}},NM="firestore",uE=class{constructor(){return _l(NM)}};var dE=new K("angularfire2.firestore-instances");function c8(t,e){let n=of(NM,t,e);return n&&new us(n)}function l8(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new us(r)}}var u8={provide:uE,deps:[[new un,dE]]},d8={provide:us,useFactory:c8,deps:[[new un,dE],Jn]},h8=(()=>{class t{constructor(){At("angularfire",jo.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Rt({type:t});static \u0275inj=xt({providers:[d8,u8]})}return t})();function PM(t,...e){return{ngModule:h8,providers:[{provide:dE,useFactory:l8(t),multi:!0,deps:[Re,Dt,_a,Uo,[new un,xl],[new un,ya],...e]}]}}var Yp=It(MM,!0);var hE=It(xM,!0);var fE=It(DM,!0);var bu=It(pM,!0);var kM=It(TM,!0);var wn=It(eE,!0);var OM=It(mM,!0);var pE=It(wM,!0);var Cu=It(CM,!0);var Xi=It(EM,!0),Jp=It(SM,!0);var qM=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(b(pr),b(_n))},e.\u0275dir=qe({type:e});let t=e;return t})(),cm=(()=>{let e=class e extends qM{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Qn(e)))(o||e)}})(),e.\u0275dir=qe({type:e,features:[Nt]});let t=e;return t})(),Xa=new K("NgValueAccessor");var p8={provide:Xa,useExisting:an(()=>We),multi:!0};function m8(){let t=ei()?ei().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var g8=new K("CompositionEventMode"),We=(()=>{let e=class e extends qM{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!m8())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(b(pr),b(_n),b(g8,8))},e.\u0275dir=qe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&L("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[hn([p8]),Nt]});let t=e;return t})();function eo(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function zM(t){return t!=null&&typeof t.length=="number"}var to=new K("NgValidators"),ec=new K("NgAsyncValidators"),v8=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,N=class{static min(e){return GM(e)}static max(e){return HM(e)}static required(e){return y8(e)}static requiredTrue(e){return _8(e)}static email(e){return I8(e)}static minLength(e){return w8(e)}static maxLength(e){return E8(e)}static pattern(e){return b8(e)}static nullValidator(e){return em(e)}static compose(e){return ZM(e)}static composeAsync(e){return XM(e)}};function GM(t){return e=>{if(eo(e.value)||eo(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function HM(t){return e=>{if(eo(e.value)||eo(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function y8(t){return eo(t.value)?{required:!0}:null}function _8(t){return t.value===!0?null:{required:!0}}function I8(t){return eo(t.value)||v8.test(t.value)?null:{email:!0}}function w8(t){return e=>eo(e.value)||!zM(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function E8(t){return e=>zM(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function b8(t){if(!t)return em;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(eo(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function em(t){return null}function WM(t){return t!=null}function KM(t){return Si(t)?te(t):t}function QM(t){let e={};return t.forEach(n=>{e=n!=null?A(A({},e),n):e}),Object.keys(e).length===0?null:e}function YM(t,e){return e.map(n=>n(t))}function C8(t){return!t.validate}function JM(t){return t.map(e=>C8(e)?e:n=>e.validate(n))}function ZM(t){if(!t)return null;let e=t.filter(WM);return e.length==0?null:function(n){return QM(YM(n,e))}}function yE(t){return t!=null?ZM(JM(t)):null}function XM(t){if(!t)return null;let e=t.filter(WM);return e.length==0?null:function(n){let r=YM(n,e).map(KM);return po(r).pipe(P(QM))}}function _E(t){return t!=null?XM(JM(t)):null}function FM(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function eN(t){return t._rawValidators}function tN(t){return t._rawAsyncValidators}function mE(t){return t?Array.isArray(t)?t:[t]:[]}function tm(t,e){return Array.isArray(t)?t.includes(e):t===e}function VM(t,e){let n=mE(e);return mE(t).forEach(i=>{tm(n,i)||n.push(i)}),n}function LM(t,e){return mE(e).filter(n=>!tm(t,n))}var nm=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=yE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_E(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},En=class extends nm{get formDirective(){return null}get path(){return null}},ds=class extends nm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},rm=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},T8={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Lie=Ne(A({},T8),{"[class.ng-submitted]":"isSubmitted"}),Xe=(()=>{let e=class e extends rm{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(b(ds,2))},e.\u0275dir=qe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&J("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Nt]});let t=e;return t})(),Ke=(()=>{let e=class e extends rm{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(b(En,10))},e.\u0275dir=qe({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&J("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Nt]});let t=e;return t})();var Tu="VALID",Zp="INVALID",Ya="PENDING",Du="DISABLED";function IE(t){return(lm(t)?t.validators:t)||null}function D8(t){return Array.isArray(t)?yE(t):t||null}function wE(t,e){return(lm(e)?e.asyncValidators:t)||null}function S8(t){return Array.isArray(t)?_E(t):t||null}function lm(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function nN(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new ee(1e3,"");if(!r[n])throw new ee(1001,"")}function rN(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new ee(1002,"")})}var Ja=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Tu}get invalid(){return this.status===Zp}get pending(){return this.status==Ya}get disabled(){return this.status===Du}get enabled(){return this.status!==Du}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(VM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(VM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(LM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(LM(e,this._rawAsyncValidators))}hasValidator(e){return tm(this._rawValidators,e)}hasAsyncValidator(e){return tm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ya,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Du,this.errors=null,this._forEachChild(r=>{r.disable(Ne(A({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ne(A({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Tu,this._forEachChild(r=>{r.enable(Ne(A({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ne(A({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tu||this.status===Ya)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Du:Tu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ya,this._hasOwnPendingAsyncValidator=!0;let n=KM(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new nt,this.statusChanges=new nt}_calculateStatus(){return this._allControlsDisabled()?Du:this.errors?Zp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ya)?Ya:this._anyControlsHaveStatus(Zp)?Zp:Tu}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){lm(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=D8(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=S8(this._rawAsyncValidators)}},Za=class extends Ja{constructor(e,n,r){super(IE(n),wE(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){rN(this,!0,e),Object.keys(e).forEach(r=>{nN(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var gE=class extends Za{};var Au=new K("CallSetDisabledState",{providedIn:"root",factory:()=>um}),um="always";function EE(t,e){return[...e.path,t]}function im(t,e,n=um){bE(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),x8(t,e),M8(t,e),R8(t,e),A8(t,e)}function om(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),am(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function sm(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function A8(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function bE(t,e){let n=eN(t);e.validator!==null?t.setValidators(FM(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=tN(t);e.asyncValidator!==null?t.setAsyncValidators(FM(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();sm(e._rawValidators,i),sm(e._rawAsyncValidators,i)}function am(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=eN(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=tN(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return sm(e._rawValidators,r),sm(e._rawAsyncValidators,r),n}function x8(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&iN(t,e)})}function R8(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&iN(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function iN(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function M8(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function oN(t,e){t==null,bE(t,e)}function N8(t,e){return am(t,e)}function sN(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function P8(t){return Object.getPrototypeOf(t.constructor)===cm}function aN(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function cN(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===We?n=o:P8(o)?r=o:i=o}),i||r||n||null}function k8(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var O8={provide:En,useExisting:an(()=>CE)},Su=Promise.resolve(),CE=(()=>{let e=class e extends En{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new nt,this.form=new Za({},yE(r),_E(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Su.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),im(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Su.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Su.then(()=>{let i=this._findContainer(r.path),o=new Za({});oN(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Su.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Su.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,aN(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(b(to,10),b(ec,10),b(Au,8))},e.\u0275dir=qe({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&L("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[rt.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[hn([O8]),Nt]});let t=e;return t})();function jM(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function UM(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Xp=class extends Ja{constructor(e=null,n,r){super(IE(n),wE(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),lm(n)&&(n.nonNullable||n.initialValueIsDefault)&&(UM(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){jM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){jM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){UM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var F8=t=>t instanceof Xp,V8=(()=>{let e=class e extends En{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return EE(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Qn(e)))(o||e)}})(),e.\u0275dir=qe({type:e,features:[Nt]});let t=e;return t})();var et=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=qe({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),L8={provide:Xa,useExisting:an(()=>qt),multi:!0},qt=(()=>{let e=class e extends cm{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Qn(e)))(o||e)}})(),e.\u0275dir=qe({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){i&1&&L("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},features:[hn([L8]),Nt]});let t=e;return t})();var j8=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Rt({type:e}),e.\u0275inj=xt({});let t=e;return t})();var TE=new K("NgModelWithFormControlWarning"),U8={provide:ds,useExisting:an(()=>DE)},DE=(()=>{let e=class e extends ds{set isDisabled(r){}constructor(r,i,o,s,a){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=a,this.update=new nt,this._ngModelWarningSent=!1,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=cN(this,o)}ngOnChanges(r){if(this._isControlChanged(r)){let i=r.form.previousValue;i&&om(i,this,!1),im(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}sN(r,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&om(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_isControlChanged(r){return r.hasOwnProperty("form")}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(b(to,10),b(ec,10),b(Xa,10),b(TE,8),b(Au,8))},e.\u0275dir=qe({type:e,selectors:[["","formControl",""]],inputs:{form:[rt.None,"formControl","form"],isDisabled:[rt.None,"disabled","isDisabled"],model:[rt.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[hn([U8]),Nt,cn]});let t=e;return t})(),$8={provide:En,useExisting:an(()=>Qe)},Qe=(()=>{let e=class e extends En{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new nt,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(am(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return im(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){om(r.control||null,r,!1),k8(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,aN(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,o=this.form.get(r.path);i!==o&&(om(i||null,r),F8(o)&&(im(o,r,this.callSetDisabledState),r.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);oN(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&N8(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){bE(this.form,this),this._oldForm&&am(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(b(to,10),b(ec,10),b(Au,8))},e.\u0275dir=qe({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,o){i&1&&L("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{form:[rt.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[hn([$8]),Nt,cn]});let t=e;return t})(),B8={provide:En,useExisting:an(()=>Vr)},Vr=(()=>{let e=class e extends V8{constructor(r,i,o){super(),this.name=null,this._parent=r,this._setValidators(i),this._setAsyncValidators(o)}_checkParentType(){lN(this._parent)}};e.\u0275fac=function(i){return new(i||e)(b(En,13),b(to,10),b(ec,10))},e.\u0275dir=qe({type:e,selectors:[["","formGroupName",""]],inputs:{name:[rt.None,"formGroupName","name"]},features:[hn([B8]),Nt]});let t=e;return t})(),q8={provide:En,useExisting:an(()=>Lr)},Lr=(()=>{let e=class e extends En{constructor(r,i,o){super(),this.name=null,this._parent=r,this._setValidators(i),this._setAsyncValidators(o)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return EE(this.name==null?this.name:this.name.toString(),this._parent)}_checkParentType(){lN(this._parent)}};e.\u0275fac=function(i){return new(i||e)(b(En,13),b(to,10),b(ec,10))},e.\u0275dir=qe({type:e,selectors:[["","formArrayName",""]],inputs:{name:[rt.None,"formArrayName","name"]},features:[hn([q8]),Nt]});let t=e;return t})();function lN(t){return!(t instanceof Vr)&&!(t instanceof Qe)&&!(t instanceof Lr)}var z8={provide:ds,useExisting:an(()=>st)},st=(()=>{let e=class e extends ds{set isDisabled(r){}constructor(r,i,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new nt,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=cN(this,s)}ngOnChanges(r){this._added||this._setUpControl(),sN(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return EE(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(b(En,13),b(to,10),b(ec,10),b(Xa,10),b(TE,8))},e.\u0275dir=qe({type:e,selectors:[["","formControlName",""]],inputs:{name:[rt.None,"formControlName","name"],isDisabled:[rt.None,"disabled","isDisabled"],model:[rt.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[hn([z8]),Nt,cn]});let t=e;return t})(),G8={provide:Xa,useExisting:an(()=>jr),multi:!0};function uN(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function H8(t){return t.split(":")[0]}var jr=(()=>{let e=class e extends cm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),o=uN(i,r);this.setProperty("value",o)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=H8(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Qn(e)))(o||e)}})(),e.\u0275dir=qe({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&L("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[hn([G8]),Nt]});let t=e;return t})(),no=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(uN(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(b(_n),b(pr),b(jr,9))},e.\u0275dir=qe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),W8={provide:Xa,useExisting:an(()=>dN),multi:!0};function $M(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function K8(t){return t.split(":")[0]}var dN=(()=>{let e=class e extends cm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let o=r.map(s=>this._getOptionId(s));i=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else i=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let o=[],s=i.selectedOptions;if(s!==void 0){let a=s;for(let c=0;c<a.length;c++){let l=a[c],u=this._getOptionValue(l.value);o.push(u)}}else{let a=i.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let u=this._getOptionValue(l.value);o.push(u)}}}this.value=o,r(o)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=K8(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Qn(e)))(o||e)}})(),e.\u0275dir=qe({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&L("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[hn([W8]),Nt]});let t=e;return t})(),ro=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue($M(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue($M(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(b(_n),b(pr),b(dN,9))},e.\u0275dir=qe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();function hN(t){return typeof t=="number"?t:parseFloat(t)}var fN=(()=>{let e=class e{constructor(){this._validator=em}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):em,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=qe({type:e,features:[cn]});let t=e;return t})(),Q8={provide:to,useExisting:an(()=>SE),multi:!0},SE=(()=>{let e=class e extends fN{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=r=>hN(r),this.createValidator=r=>HM(r)}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Qn(e)))(o||e)}})(),e.\u0275dir=qe({type:e,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,o){i&2&&Ks("max",o._enabled?o.max:null)},inputs:{max:"max"},features:[hn([Q8]),Nt]});let t=e;return t})(),Y8={provide:to,useExisting:an(()=>hs),multi:!0},hs=(()=>{let e=class e extends fN{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=r=>hN(r),this.createValidator=r=>GM(r)}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Qn(e)))(o||e)}})(),e.\u0275dir=qe({type:e,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,o){i&2&&Ks("min",o._enabled?o.min:null)},inputs:{min:"min"},features:[hn([Y8]),Nt]});let t=e;return t})();var pN=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Rt({type:e}),e.\u0275inj=xt({imports:[j8]});let t=e;return t})(),vE=class extends Ja{constructor(e,n,r){super(IE(n),wE(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){rN(this,!1,e),e.forEach((r,i)=>{nN(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function BM(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var J8=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let o=this._reduceControls(r),s={};return BM(i)?s=i:i!==null&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new Za(o,s)}record(r,i=null){let o=this._reduceControls(r);return new gE(o,i)}control(r,i,o){let s={};return this.useNonNullable?(BM(i)?s=i:(s.validators=i,s.asyncValidators=o),new Xp(r,Ne(A({},s),{nonNullable:!0}))):new Xp(r,i,o)}array(r,i,o){let s=r.map(a=>this._createControl(a));return new vE(s,i,o)}_reduceControls(r){let i={};return Object.keys(r).forEach(o=>{i[o]=this._createControl(r[o])}),i}_createControl(r){if(r instanceof Xp)return r;if(r instanceof Ja)return r;if(Array.isArray(r)){let i=r[0],o=r.length>1?r[1]:null,s=r.length>2?r[2]:null;return this.control(i,o,s)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ye=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>j(J8).nonNullable,providedIn:"root"});let t=e;return t})();var dm=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Au,useValue:r.callSetDisabledState??um}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Rt({type:e}),e.\u0275inj=xt({imports:[pN]});let t=e;return t})(),Je=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:TE,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:Au,useValue:r.callSetDisabledState??um}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Rt({type:e}),e.\u0275inj=xt({imports:[pN]});let t=e;return t})();var fs=class{};function Z8(t,e){}var X8=t=>({f:t});function eq(t,e){if(t&1&&(d(0,"div",2),F(1,Z8,0,0,"ng-template",3),f()),t&2){let n=e.$implicit,r=E();p(),_("ngTemplateOutlet",n)("ngTemplateOutletContext",jc(2,X8,r.f))}}function tq(t,e){if(t&1&&(d(0,"button",4),Yn(1),f(),Yn(2,1),Yn(3,2)),t&2){let n=E();_("disabled",n.form.invalid)}}var nq=[[["span"]],[["btn"]],"*"],rq=["span","btn","*"],Xt=(()=>{let e=class e{constructor(r){this.fb=r,this.soloLectura=!1,this.formValue=new nt,this.counter=0,this.form=this.fb.group({email:["",[N.required]]})}ngAfterContentInit(){this.counter=0,this.soloLectura&&this.form.disable({emitEvent:!this.soloLectura})}checarSiAlgunoDesactivado(){return Object.keys(this.form.controls).some(r=>!!this.form.controls[r].disable)}ngOnChanges(r){r.soloLectura&&(console.log("On changes triggeado"),r.soloLectura.currentValue?this.form.disable({emitEvent:!1}):this.counter==0||this.checarSiAlgunoDesactivado()||this.form.enable(),this.counter=1)}get f(){return this.form.controls}submit(){this.form.invalid||this.formValue.emit(this.form.value)}reset(){this.form.reset()}};e.\u0275fac=function(i){return new(i||e)(b(Ye))},e.\u0275cmp=se({type:e,selectors:[["app-form"]],contentQueries:function(i,o,s){if(i&1&&$0(s,Ao,4),i&2){let a;Fc(a=Vc())&&(o.sections=a)}},inputs:{form:"form",soloLectura:"soloLectura"},outputs:{formValue:"formValue"},standalone:!0,features:[cn,ae],ngContentSelectors:rq,decls:5,vars:1,consts:[[1,"container-fluid"],[3,"ngSubmit"],[1,"row","g-1"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["type","submit",1,"btn","btn-success","mt-2",3,"disabled"],["class","row g-1"]],template:function(i,o){i&1&&(ph(nq),d(0,"div",0)(1,"form",1),L("ngSubmit",function(){return o.submit()}),at(2,eq,2,4,"div",5,fT),F(4,tq,4,1),f()()),i&2&&(p(2),ct(o.sections),p(2),z(4,o.soloLectura?-1:4))},dependencies:[Je,et,Ke,dm,CE,Ut,$T]});let t=e;return t})();var iq=(t,e)=>e.id;function oq(t,e){if(t&1){let n=ie();d(0,"li",4),L("click",function(){let i=Q(n),o=i.$implicit,s=i.$index,a=E(3);return Y(a.activarElemento(o,s))}),m(1),f()}if(t&2){let n=e.$implicit,r=e.$index,i=E(3);J("active",r===i.indicieActivo),p(),Z(n[i.key])}}function sq(t,e){t&1&&(d(0,"li")(1,"p",5),m(2,"No se encontraron resultados ..."),f()())}function aq(t,e){t&1&&(d(0,"ul",3),at(1,oq,2,3,"li",6,iq,!1,sq,3,0,"li"),f()),t&2&&(p(),ct(e))}function cq(t,e){if(t&1&&(d(0,"form",0),I(1,"input",1),f(),F(2,aq,4,1,"ul",2),$(3,"async")),t&2){let n=E(),r;_("formGroup",n.form),p(2),z(2,(r=W(3,2,n.search$))?2:-1,r)}}var mt=(()=>{let e=class e{constructor(r,i){this.fb=r,this.cd=i,this.key="name",this.elementoActivado=new nt,this.indicieActivo=-1,this.changes$=new le([{}]),this.getRegex=(o="")=>this.changes$.asObservable().pipe(H(1),_t(),je(s=>s[this.key].match(new RegExp(o,"i"))),Pn()),this.search$=this.changes$.asObservable().pipe(V(()=>this.form.get("search")?.valueChanges.pipe(bn(""))??T([])),hc(300),ld((o,s)=>o==s&&o!=""),V(this.getRegex))??T([]),this.data=["cargando"],this.form=this.fb.group({search:["",[N.required]]})}ngOnInit(){}ngOnChanges(r){console.log("typeahead",r.data.currentValue.length,r.data.currentValue),r.data&&this.changes$.next(r.data.currentValue),r.key&&(this.key=r.key.currentValue)}activarElemento(r,i){this.indicieActivo=i,this.elementoActivo=r,this.elementoActivado.emit(r)}};e.\u0275fac=function(i){return new(i||e)(b(Ye),b(gr))},e.\u0275cmp=se({type:e,selectors:[["app-typeahead"]],inputs:{key:"key",data:"data"},outputs:{elementoActivado:"elementoActivado"},standalone:!0,features:[cn,ae],decls:1,vars:1,consts:[[3,"formGroup"],["type","text","placeholder","Buscar","formControlName","search","name","seacrh","id","search",1,"form-control"],["class","list-group list-group-flush overflow-auto","style","max-height:75vh;"],[1,"list-group","list-group-flush","overflow-auto",2,"max-height","75vh"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"text-muted","mt-2","ms-2"],["class","list-group-item list-group-item-action",3,"active"]],template:function(i,o){i&1&&F(0,cq,4,4),i&2&&z(0,o.data?0:-1)},dependencies:[dm,et,We,Xe,Ke,Je,Qe,st,ze]});let t=e;return t})();var tc=class{};function lq(t,e){t&1&&m(0," Este campo es obligatorio ")}function uq(t,e){t&1&&m(0," Este campo debe estar seleccionado ")}function dq(t,e){t&1&&m(0," No cumple el patr\xF3n requerido ")}function hq(t,e){if(t&1&&m(0),t&2){let n=E(2);O(" Limite Minimo de ",n.control==null?null:n.control.errors.min.requiredLength," ")}}function fq(t,e){if(t&1&&m(0),t&2){let n=E(2);O(" Limite Maximo de ",n.control==null?null:n.control.errors.max.requiredLength," ")}}function pq(t,e){if(t&1&&m(0),t&2){let n=E(2);O(" Minimo ",n.control==null?null:n.control.errors.minlength.requiredLength," car\xE1cteres ")}}function mq(t,e){if(t&1&&m(0),t&2){let n=E(2);O(" Maximo ",n.control==null?null:n.control.errors.maxlength.requiredLength," car\xE1cteres ")}}function gq(t,e){if(t&1&&m(0),t&2){let n=E(2);O(" ",n.control==null?null:n.control.errors.custom," ")}}function vq(t,e){if(t&1&&(d(0,"label",2),F(1,lq,1,0)(2,uq,1,0)(3,dq,1,0)(4,hq,1,1)(5,fq,1,1)(6,pq,1,1)(7,mq,1,1)(8,gq,1,1),f()),t&2){let n=E();p(),z(1,n.control!=null&&n.control.errors&&(n.control!=null&&n.control.hasError("required"))?1:n.control!=null&&n.control.errors&&(n.control!=null&&n.control.hasError("requiredTrue"))?2:n.control!=null&&n.control.errors&&(n.control!=null&&n.control.hasError("pattern"))?3:n.control!=null&&n.control.errors&&(n.control!=null&&n.control.hasError("min"))?4:n.control!=null&&n.control.errors&&(n.control!=null&&n.control.hasError("max"))?5:n.control!=null&&n.control.errors&&(n.control!=null&&n.control.hasError("minlength"))?6:n.control!=null&&n.control.errors&&(n.control!=null&&n.control.hasError("maxlength"))?7:n.control!=null&&n.control.errors&&(n.control!=null&&n.control.hasError("custom"))?8:-1)}}function yq(t,e){t&1&&Yn(0,5)}var _q=[[["span"]],[["input"]],[["select"]],[["textarea"]],"*",[["label"]]],Iq=["span","input","select","textarea","*","label"],gt=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=se({type:e,selectors:[["app-form-input"]],inputs:{control:"control"},standalone:!0,features:[ae],ngContentSelectors:Iq,decls:9,vars:1,consts:[[1,"input-group","mt-2"],[1,"form-floating"],["for","name"]],template:function(i,o){i&1&&(ph(_q),d(0,"div",0),Yn(1),d(2,"div",1),Yn(3,1),Yn(4,2),Yn(5,3),F(6,vq,9,1,"label",2)(7,yq,1,0),f(),Yn(8,4,["[select]","[spanend]"]),f()),i&2&&(p(6),z(6,o.control!=null&&o.control.touched&&(o.control!=null&&o.control.invalid)?6:7))}});let t=e;return t})();var hm=class{};var tt=(()=>{let e=class e{constructor(r){this.firestore=r,this.rutaApi="usuario",this.rutaFranquiciaApi="franquiciasDatos",console.log(this.rutaApi),this.coleccion=bu(this.firestore,this.rutaApi)}get firestoreInstancia(){return this.firestore}get rutaFranquicia(){return this.rutaFranquiciaApi}setRuta(r,i){return this.rutaApi=r,this.coleccion=i?bu(this.firestore,this.rutaFranquiciaApi,i,this.rutaApi):bu(this.firestore,this.rutaApi),this}get ruta(){return this.coleccion}get obtenerNuevoLote(){return Jp(this.firestore)}executeBatch(r,i){var o=Jp(this.firestore);let s=[];return i.forEach((a,c)=>{this.setRuta(a.ruta,r);let h=a.doc,{id:l}=h,u=Vt(h,["id"]);o.set(u(this.coleccion,l),A({},u)),(c==i.length-1||c%450==0)&&(s.push(new Promise(()=>o.commit())),o=Jp(this.firestore))}),po([...s])}crear(r,i,o){var s;return i&&o?(console.log("add franquicia datos"),this.docRef=wn(this.firestore,this.rutaFranquiciaApi,o,this.rutaApi,i),s=te(Cu(this.docRef,A({},r)))):o?(this.coleccion=bu(this.firestore,this.rutaFranquiciaApi,o,this.rutaApi),s=te(fE(this.coleccion,A({},r)))):i?(this.docRef=wn(this.firestore,this.rutaApi,i),s=te(Cu(this.docRef,A({},r)))):s=te(fE(this.coleccion,A({},r))),s.pipe(P(a=>a?.id?a.id:a))}obtenerEstado(r){return hE(wn(this.firestore,this.rutaFranquiciaApi,r)).pipe(H(1))}actualizarEstado(r,i){return te(Cu(wn(this.firestore,this.rutaFranquiciaApi,r),A({},i)))}actualizar(r,i,o){return this.docRef=wn(this.coleccion,r),te(Cu(this.docRef,i,{merge:!0})).pipe(H(1),S({complete:()=>console.log("Crud Operation Complete"),error:console.error}))}eliminar(r){return console.log(this.coleccion,r),te(kM(wn(this.coleccion,r))).pipe(Gt(),S(i=>console.log("crud delete ran",i)))}obtenerPorId(r){return hE(wn(this.firestore,this.rutaApi,r),{idField:"id"}).pipe(H(1),S({complete:()=>console.log("Crud Operation Complete")}))}obtenerPorCampo(r,i){return Yp(pE(this.coleccion,Xi(r,"==",i)),{idField:"id",serverTimestamps:"estimate"})}obtenerPorQuery(r){return Yp(pE(this.coleccion,...r),{idField:"id",serverTimestamps:"estimate"})}obtenerTodos(r,i){var o=r&&i?this.obtenerPorCampo(r,i):Yp(this.coleccion,{idField:"id",serverTimestamps:"estimate"});return o.pipe(H(1),S(()=>console.log("firebase")),S({complete:()=>console.log("Crud Operation Complete")}))}};e.\u0275fac=function(i){return new(i||e)(x(us))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})();var fm=class{};var nc=(()=>{let e=class e{constructor(r){this.crud=r,this.comboSub$=new le([new tc]),this.combos$=this.comboSub$?.asObservable(),this.rutaCombos="combos"}crearCombo(r){let s=r,{id:i}=s,o=Vt(s,["id"]);return this.crud.setRuta(this.rutaCombos).crear(o).pipe(S({next:a=>{let c=this.comboSub$?.value??[];r.id=a,c.push(r),this.comboSub$?.next(c)}}))}eliminarCombo(r){return this.crud.setRuta(this.rutaCombos).eliminar(r).pipe(S({next:()=>{var i=this.comboSub$.getValue();let o=i.findIndex(s=>s.id===r);i.splice(o,1),this.comboSub$.next(i)}}))}obtenerCombo(){return this.combos$.pipe(V((r,i)=>r[0]&&r[0].id?T(r):this.crud.setRuta(this.rutaCombos).obtenerTodos())).pipe(H(1),S(r=>this.comboSub$?.next(r)))}actualizarProducto(r){let s=r,{id:i}=s,o=Vt(s,["id"]);return this.crud.setRuta(this.rutaCombos).actualizar(i??"",o).pipe(S({next:()=>{var a=this.comboSub$.getValue();let c=a.findIndex(l=>l.id===r.id);a.splice(c,1),a.push(r),this.comboSub$.next(a)}}))}};e.\u0275fac=function(i){return new(i||e)(x(tt))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Gn=(()=>{let e=class e{constructor(r,i){this.crud=r,this.combos=i,this.productosSub$=new le([new fs]),this.productos$=this.productosSub$?.asObservable(),this.ruta="productos",this.rutaJarabe="jarabes"}crearProducto(r){return this.crud.setRuta(this.ruta).crear(r).pipe(S({next:i=>{let o=this.productosSub$?.value??[];r.id=i,o.push(r),this.productosSub$?.next(o)}}))}obtenerProductos(){return this.productos$.pipe(V((r,i)=>r[0].id?this.productosSub$.asObservable().pipe(P(o=>o.slice())):this.crud.setRuta(this.ruta).obtenerTodos().pipe(V(o=>o?(this.productosSub$.next(o),this.productosSub$.asObservable()):[]))),H(1))}crearJarabe(r){this.crud.setRuta(this.rutaJarabe);var i=wn(this.crud.ruta);return r.cantidadPorReceta=+(r.cantidadPorReceta??0),r.ingredientesBase?.push({id:i.id,cantidad:-(r.cantidadPorReceta??0)}),console.log("jarabe",i.id),this.crud.crear(r,i.id).pipe(H(1),P(()=>i.id))}actualizarJarabe(r){let s=r,{id:i}=s,o=Vt(s,["id"]);return this.crud.setRuta(this.rutaJarabe).actualizar(i??"",o)}obtenerJarabes(){return this.crud.setRuta(this.rutaJarabe).obtenerTodos()}actualizarProducto(r){return this.crud.setRuta(this.ruta).actualizar(r.id??"",r).pipe(S({next:()=>{var i=this.productosSub$.getValue();let o=i.findIndex(s=>s.id===r.id);i.splice(o,1),i.push(r),this.productosSub$.next(i)}}))}eliminarProducto(r,i){i?this.crud.setRuta(this.rutaJarabe):this.crud.setRuta(this.ruta);let o=this.crud.eliminar(r).pipe(S({complete:()=>{if(console.log("Eliminando Producto",r),i)return;var s=this.productosSub$.getValue();let a=s.findIndex(c=>c.id===r);s.splice(a,1),this.productosSub$.next(s),console.log(s)}}));return o}};e.\u0275fac=function(i){return new(i||e)(x(tt),x(nc))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var en=(()=>{let e=class e{constructor(r,i){this.crud=r,this.productoS=i,this.ingredientesMap$=new le(new Map),this.ingredientesSub$=new le([new fm]),this.ingredientes$=this.ingredientesSub$?.asObservable(),this.ruta="ingredientes"}get obtenerIngredientesMap$(){return this.ingredientesMap$.asObservable().pipe(H(1),V(r=>r.size!=0?T(r):this.obtenerIngredientes().pipe(V(i=>(this.ingredientesMap$.next(new Map(i.map(o=>[o.id??"",o]))),this.ingredientesMap$.asObservable().pipe(H(1)))))))}crearIngrediente(r,i){return console.log("crear ingred",i),this.crud.setRuta(this.ruta).crear(r,i).pipe(S({next:o=>{let s=this.ingredientesSub$?.value??[];r.id=o,s.push(r),this.ingredientesSub$?.next(s)}}))}obtenerIngredientes(){return this.ingredientes$.pipe(V((r,i)=>r[0].id?this.ingredientesSub$.asObservable().pipe(P(o=>o.slice())):this.crud.setRuta(this.ruta).obtenerTodos().pipe(S({next:o=>{o&&o[0]&&o[0].id&&this.ingredientesSub$.next(o)}}))))}actualizarIngrediente(r){return this.crud.setRuta(this.ruta).actualizar(r.id??"",r).pipe(S({next:()=>{var i=this.ingredientesSub$.getValue();let o=i.findIndex(s=>s.id===r.id);i.splice(o,1),i.push(r),this.ingredientesSub$.next(i)}}))}eliminarIngrediente(r){return this.productoS.obtenerProductos().pipe(P(i=>{var o=i.flatMap(s=>s.ingredientesBase?.concat(s.ingredientesAgregables??[]));return console.log(o),o}),Gt(),S(console.log),V(i=>{var o=i?.find(s=>s?.id==r)!=null;return o?zt(()=>new Error("El ingrediente esta en uso en otros productos. No es posible eliminar")):this.crud.setRuta(this.ruta).eliminar(r).pipe(Gt(),S(()=>{console.log("Eliminando completo",r);var s=this.ingredientesSub$.getValue();let a=s.findIndex(c=>c.id===r);s.splice(a,1),this.ingredientesSub$.next(s)}))}))}};e.\u0275fac=function(i){return new(i||e)(x(tt),x(Gn))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ur=(()=>{let e=class e{constructor(r,i){this.crud=r,this.ingredientes=i,this.inventarioSub$=new le([new hm]),this.inventariosMap$=new le(new Map),this.franquiciaId="",this.inventarios$=this.inventarioSub$?.asObservable(),this.ruta="inventarios"}set setFranquiciaId(r){this.franquiciaId=r}setRuta(r){r?this.crud.setRuta(this.ruta):this.crud.setRuta(this.ruta,this.franquiciaId)}get inventariosJoinIngredientes$(){return po([this.hashMapInventarios$.pipe(H(1)),this.ingredientes.obtenerIngredientesMap$.pipe(H(1))]).pipe(V(([r,i])=>te(Array.from(new Set(Array.from(r.keys()).concat(Array.from(i.keys()))))).pipe(xe(o=>r.has(o)&&i.has(o)?(console.info("Assigned"),T(Object.assign(A({},r.get(o)),i.get(o)))):i.has(o)?(console.info("Inv added"),this.crearInventario(o).pipe(P(s=>Object.assign(A({},i.get(o)),s)))):(console.info("Inv deleted"),this.eliminarInventario(o).pipe(P(s=>{})))),je(o=>!!o),Pn())))}get inventarioConIngredientes$(){return this.ingredientes.obtenerIngredientes().pipe(H(1),_t(),kn(r=>r.id?this.hashMapInventarios$.pipe(P(i=>A({id:r.id,nombre:r.nombre,unidad:r.unidadConsumo,unidadInsumo:r.unidadInsumo},i.get(r.id??"")))):T(null)),je(r=>!!r),xe(r=>r?.disponible!=null?T(r):this.crearInventario(r?.id??"").pipe(P(i=>A({nombre:r?.nombre,unidad:r?.unidad},i)))),Pn())}crearInventario(r){var i={minResurtir:20,minPermitible:10,disponible:0};return this.crud.setRuta(this.ruta).crear(i,r,this.franquiciaId).pipe(P(()=>A({id:r},i)),S(o=>{console.info("Iventory created");let s=this.inventarioSub$.getValue();s.push(i),this.inventarioSub$.next(s);let a=this.inventariosMap$.getValue();a.set(r,i),this.inventariosMap$.next(a)}))}obtenerInventario(){return this.inventarios$.pipe(V((r,i)=>r&&r[0].id?T(r):this.crud.setRuta(this.ruta,this.franquiciaId).obtenerTodos().pipe(S(o=>{o&&o[0]&&this.inventarioSub$.next(o)}))))}get hashMapInventarios$(){return this.inventariosMap$.asObservable().pipe(H(1),V(r=>r.size!=0?T(r).pipe(S(()=>console.log("From BSubject"))):this.obtenerInventario().pipe(S(()=>console.log("from Firebase")),V(i=>(i.length!=0&&this.inventariosMap$.next(new Map(i.map(o=>[o.id??"",o]))),this.inventariosMap$.asObservable())),H(1))),S({complete:()=>{console.log("complete map")},next:r=>console.log(r)}))}actualizarInventario(r,i){r.resurtir=(r.minResurtir??10)>=(r.disponible??0);let a=r,{id:o}=a,s=Vt(a,["id"]);return o?this.crud.setRuta(this.ruta,i).actualizar(o,s).pipe(S({next:()=>{var c=this.inventarioSub$.getValue();console.log(c);let l=c.findIndex(h=>h.id===r.id);c.splice(l,1),c.push(r),this.inventarioSub$.next(c);let u=this.inventariosMap$.getValue();u.set(o,s),this.inventariosMap$.next(u)}})):T()}actualizarInventarioPorLote(r){r.resurtir=(r.minResurtir??10)>=(r.disponible??0);let c=r,{id:i}=c,o=Vt(c,["id"]);var s=this.inventarioSub$.getValue();let a=s.findIndex(l=>l.id===r.id);if(s.splice(a,1),s.push(r),this.inventarioSub$.next(s),i){let l=this.inventariosMap$.getValue();l.set(i,o),this.inventariosMap$.next(l)}}eliminarInventario(r){return this.crud.setRuta(this.ruta,this.franquiciaId).eliminar(r).pipe(S({next:()=>{var i=this.inventarioSub$.getValue();let o=i.findIndex(a=>a.id===r);i.splice(o,1),this.inventarioSub$.next(i);let s=this.inventariosMap$.getValue();s.delete(r),this.inventariosMap$.next(s)}}))}};e.\u0275fac=function(i){return new(i||e)(x(tt),x(en))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ic=(()=>{let e=class e{constructor(r){this.crud=r,this.franquiciaId="",this.ruta="/balances",this.rutaEgresos="/tickets"}set setFranquiciaId(r){this.franquiciaId=r}crearRegistroBlance(r,i){return i?this.crud.setRuta(this.ruta,this.franquiciaId).crear({nombre:r,cantidad:i,timestamp:new Date}):T()}crearRegistroEgreso(r,i){return i?this.crud.setRuta(this.rutaEgresos,this.franquiciaId).crear({nombre:r,cantidad:i,timestamp:new Date().toLocaleString()}):T()}obtenerRegistrosBalances(){var r=new Date;return r.setHours(0,0,0,0),this.crud.setRuta(this.ruta,this.franquiciaId).obtenerPorQuery([Xi("timestamp",">=",r)])}obtenerRegistrosEgresos(){var r=new Date;return r.setHours(0,0,0,0),this.crud.setRuta(this.rutaEgresos,this.franquiciaId).obtenerPorCampo("ftimestamp",ft.fromDate(r)).pipe(H(1))}};e.\u0275fac=function(i){return new(i||e)(x(tt))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var oo=(()=>{let e=class e{constructor(r,i,o,s,a){this.inventarios=r,this.ingredientes=i,this.router=o,this.crud=s,this.balance=a,this.franquiciaId="",this.hashMapIngredientes=new Map,this.validezOrdenSub$=new le(!0),this.productosEnCaja=[],this.ordenVenta={},this.estadoCaja={estado:!0,balanceInicial:0,ingreso:0}}set setFranquiciaId(r){this.inventarios.setFranquiciaId=r,this.franquiciaId=r}get mapIngredientes(){return this.hashMapIngredientes}setHashMapIngredientes(r,i){if(r){if(this.hashMapIngredientes.size>350){alert("No es posible agregar mas productos o ingredientes a esta orden, Favor de agregar este producto o ingrediente en una nueva orden");return}r.forEach(o=>this.setIngrediente=o),console.log([...this.hashMapIngredientes.entries()]),this.validezOrdenSub$.getValue()||i||(this.removeHashMapIngredientes=r)}}set setIngrediente(r){if(!(r.id&&r.cantidad))return;if(this.hashMapIngredientes.size>350){alert("No es posible agregar mas productos o ingredientes a esta orden, Favor de agregar este producto o ingrediente en una nueva orden");return}let i=this.hashMapIngredientes.get(r.id),o=i===void 0?r.cantidad:r.cantidad+i,s=this.inventarios.inventariosMap$.getValue().get(r.id),a=(s?.disponible??0)-o;console.log(a,s?.disponible,o,s?.minPermitible,s),this.hashMapIngredientes.set(r.id,o),a<=(s?.minPermitible??10)&&(alert(`Ingredientes Insuficientes: Falta ${this.ingredientes.ingredientesMap$.getValue().get(r.id)?.nombre}`),this.validezOrdenSub$.next(!1))}set removeIngrediente(r){if(!r.id)return;var i=this.hashMapIngredientes.get(r.id);let o=(i??0)-(r.cantidad??0);o>0?this.hashMapIngredientes.set(r.id,o):this.hashMapIngredientes.delete(r.id)}set removeHashMapIngredientes(r){r&&(r?.forEach(i=>this.removeIngrediente=i),console.log([...this.hashMapIngredientes.entries()]))}set setEstadoCaja(r){this.estadoCaja.estado=r}get EstadoCaja(){return this.estadoCaja}get validezOrden$(){return this.validezOrdenSub$.asObservable().pipe()}get initInventarios$(){return this.inventarios.inventariosJoinIngredientes$.pipe(fc())}inventarioLotes$(r){let i=[];var o="";this.inventarios.setRuta();let s=this.crud.obtenerNuevoLote;return te(Array.from(this.hashMapIngredientes.keys())).pipe(xe(a=>this.inventarios.hashMapInventarios$.pipe(P(c=>A({id:a},c.get(a))))),S(a=>{if(!(a&&a.id&&a.disponible!=null))return;a.disponible-=this.hashMapIngredientes.get(a.id)??0,a.resurtir=(a.minResurtir??10)>=(a.disponible??0);let u=a,{id:c}=u,l=Vt(u,["id"]);s.set(wn(this.crud.ruta,c),A({},l)),i.push(a)}),Pn(),V(a=>r?te(a):this.estadoTurno().pipe(S(c=>c.ingreso=(this.ordenVenta.total??0)+(c.ingreso??0)))),V(a=>{this.crud.setRuta("tickets",this.franquiciaId);let c=wn(this.crud.ruta);return o=c.id,this.ordenVenta.id=o,s.set(c,this.crearOrden()),s.set(wn(this.crud.firestoreInstancia,this.crud.rutaFranquicia,this.franquiciaId),a),te(s.commit())}),S({complete:()=>{i.forEach(a=>this.inventarios.actualizarInventarioPorLote(a))}}))}get actualizarInventariosPorLote$(){return te(this.hashMapIngredientes.keys()).pipe(V(r=>this.inventarios.hashMapInventarios$.pipe(P(i=>A({id:r},i.get(r))),V(i=>i!=null&&i.id!=null?T(i):zt(()=>new Error("Inventario corrupto. Cancelando la operacion..."))),S(i=>{console.log("e"),i&&i.id&&i.disponible&&(i.disponible-=this.hashMapIngredientes.get(i.id)??0)}))),P(r=>({ruta:"inventarios",doc:r})),S(console.log),Pn(),V(r=>this.crud.executeBatch(this.franquiciaId,r)))}get actualizarInventarios$(){return this.inventarioLotes$}resetearHashmapIngredientes(){this.hashMapIngredientes=new Map}comenzarTurno(r){return this.crud.actualizarEstado(this.franquiciaId,{estado:!0,balanceInicial:r})}terminarTurno(){return this.crud.obtenerEstado(this.franquiciaId).pipe(S(r=>{this.estadoCaja=A({},r),this.estadoCaja.estado=!1}),S(()=>console.log(this.estadoCaja)),V(()=>this.crud.actualizarEstado(this.franquiciaId,{estado:!1,balanceInicial:0,ingreso:0})))}estadoTurno(){return this.crud.obtenerEstado(this.franquiciaId)}actualizarIngreso(){return this.estadoTurno().pipe(V(r=>(r.ingreso=this.ordenVenta.total+(r.ingreso??0),this.crud.actualizarEstado(this.franquiciaId,r))))}crearOrden(){let r=A({},this.ordenVenta);r.productos=this.ordenVenta.productos?.map(o=>({id:o.id,subTotal:o.subTotal}));var i=new Date;return i.setHours(0,0,0,0),this.crud.setRuta("tickets",this.franquiciaId),A({ftimestamp:ft.fromDate(i),timestamp:new Date().toLocaleString()},r)}crearTicketTerminoTurno(){var r=new Date;r.setHours(0,0,0,0);var i={productos:[]};return i.productos.push({id:"balanceInicial",subTotal:this.EstadoCaja.balanceInicial}),i.productos.push({id:"ingresos",subTotal:this.EstadoCaja.ingreso}),this.crud.setRuta("tickets",this.franquiciaId).crear(A({ftimestamp:ft.fromDate(r),timestamp:new Date().toLocaleString()},i))}comprometerOrden(){return this.inventarioLotes$()}};e.\u0275fac=function(i){return new(i||e)(x(Ur),x(en),x(yt),x(tt),x(ic))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wq(t,e){t&1&&(d(0,"th",18),m(1,"#"),f(),d(2,"th",18),m(3,"Producto"),f(),d(4,"th",18),m(5,"Precio"),f(),d(6,"th",18),m(7,"Descuento"),f(),d(8,"th",18),m(9,"SubTotal"),f())}function Eq(t,e){t&1&&(I(0,"th",18),d(1,"th",18),m(2,"Saldo Inicial"),f(),d(3,"th",18),m(4,"Ingreso"),f(),I(5,"th",18),d(6,"th",18),m(7,"Egreso"),f())}var bq=(t,e)=>e.id;function Cq(t,e){if(t&1&&(d(0,"tr",19)(1,"td",20)(2,"small",5),m(3),f()(),d(4,"td")(5,"small",21),m(6),f()(),d(7,"td")(8,"small",5),m(9),$(10,"currency"),f()(),d(11,"td")(12,"small",5),m(13),f()(),d(14,"td")(15,"small",5),m(16),$(17,"currency"),f()()()),t&2){let n=e.$implicit,r=e.$index,i;p(3),O(" ",r+1," "),p(3),O(" ",n.nombre," "),p(3),O(" ",Pt(10,5,n.precio,"MXN","symbol-narrow","2.2-2")," "),p(4),O(" ",(i=n.descuento)!==null&&i!==void 0?i:0," % "),p(3),O(" ",Pt(17,10,n.subTotal,"MXN","symbol-narrow","2.2-2")," ")}}function Tq(t,e){if(t&1&&at(0,Cq,18,15,"tr",22,bq),t&2){let n=E();ct(n.productosEnCaja)}}function Dq(t,e){if(t&1&&(d(0,"tr",19)(1,"td",20)(2,"small",5),m(3," 1 "),f()(),d(4,"td")(5,"small",21),m(6),$(7,"currency"),f()(),d(8,"td",23)(9,"small",5),m(10),$(11,"currency"),f()(),d(12,"td",24)(13,"small",5),m(14),$(15,"currency"),f()()()),t&2){let n=E(),r,i;p(6),O(" ",Pt(7,3,n.estadoCaja.balanceInicial,"MXN","symbol-narrow","2.2-2")," "),p(4),O(" ",Pt(11,8,(r=n.estadoCaja.ingreso)!==null&&r!==void 0?r:0,"MXN","symbol-narrow","2.2-2")," "),p(4),O(" ",Pt(15,13,(i=n.estadoCaja.egreso)!==null&&i!==void 0?i:0,"MXN","symbol-narrow","2.2-2")," ")}}function Sq(t,e){if(t&1&&(m(0),$(1,"currency")),t&2){let n=E();O(" ",Pt(1,1,n.total,"MXN","symbol-narrow","3.2-2")," ")}}function Aq(t,e){if(t&1&&(m(0),$(1,"currency")),t&2){let n=E(),r;O(" ",Pt(1,1,((r=n.estadoCaja.balanceInicial)!==null&&r!==void 0?r:0)+((r=n.estadoCaja.ingreso)!==null&&r!==void 0?r:0)-((r=n.estadoCaja.egreso)!==null&&r!==void 0?r:0),"MXN","symbol-narrow","3.2-2")," ")}}function xq(t,e){if(t&1&&(d(0,"app-form-input",25),I(1,"textarea",26),d(2,"label",27),m(3),f()(),d(4,"app-form-input",25),I(5,"textarea",28),d(6,"label",27),m(7,"Justificacion"),f()()),t&2){let n=E();_("control",void 0),p(3),O("Firma Autorizaci\xF3n Condonaci\xF3n: ",n.tipo,""),p(),_("control",void 0),p(),_("value",n.justiciacion)}}var oc=(()=>{let e=class e{set OrdenId(r){console.log("setter ",r),this.ordenId=r}set EstadoCaja(r){console.log("setter",r),this.estadoCaja=r}constructor(r,i,o){this.caja=r,this.router=i,this.route=o,this.ordenId="",this.productosEnCaja=[],this.total=0,this.tipo=void 0,this.justiciacion=void 0,this.estadoCaja={estado:!0,balanceInicial:0,ingreso:0},this.productosEnCaja=this.caja.ordenVenta.productos??[],this.total=this.caja.ordenVenta.total??0,console.log(this.total,this.caja.ordenVenta,this.caja.ordenVenta.total)}ngOnInit(){this.tipo=this.caja.ordenVenta.tipoCondonacion,this.justiciacion=this.caja.ordenVenta.justificacion,zr(window,"beforeprint").pipe(V(()=>zr(window,"afterprint")),V(()=>te(this.router.navigate(["../ventas"],{relativeTo:this.route})))).subscribe()}};e.\u0275fac=function(i){return new(i||e)(b(oo),b(yt),b(Ir))},e.\u0275cmp=se({type:e,selectors:[["app-imprimir"]],inputs:{OrdenId:"OrdenId",EstadoCaja:"EstadoCaja"},standalone:!0,features:[ae],decls:37,vars:5,consts:[[1,"container-fluid","print"],[1,"table","table-dark","align-middle","caption-top"],[1,"lead","text-center"],[1,"table-secondary"],["colspan","4"],[1,"font-monospace"],["colspan","5",1,"text-center"],[1,"container","fixed-bottom"],[1,"d-flex","bg-dark","flex-wrap","justify-content-between","align-items-center","py-2","my-3","border-top"],[1,"col-md-4","d-flex","align-items-center"],["src","assets/icons/icon-72x72.png","alt","Logo","width","30","height","24",1,"d-inline-block","align-text-top"],[1,"mb-2","mb-md-0","text-body-secondary"],[1,"nav","col-md-4","justify-content-end","list-inline","list-unstyled","d-flex"],[1,"ms-3","list-inline-item"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-instagram"],["d","M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.9 3.9 0 0 0-1.417.923A3.9 3.9 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.9 3.9 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.9 3.9 0 0 0-.923-1.417A3.9 3.9 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599s.453.546.598.92c.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.5 2.5 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.5 2.5 0 0 1-.92-.598 2.5 2.5 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233s.008-2.388.046-3.231c.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92s.546-.453.92-.598c.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92m-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217m0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334"],[1,"mx-2"],[1,"fs-6","fw-light"],["scope","col",1,"font-monospace"],[1,"table-group-divider","my-2"],["scope","row"],[1,"font-monospace","text-uppercase"],["class","table-group-divider my-2"],["colspan",""],["colspan","2"],[3,"control"],["id","Firma","type","text","placeholder","Firma",1,"form-control",2,"height","15vh"],["for","Firma"],["id","Firma","type","text","placeholder","Firma",1,"form-control",2,"height","15vh",3,"value"]],template:function(i,o){i&1&&(d(0,"div",0)(1,"table",1)(2,"caption",2),m(3,"Cafe Juan Valdez"),f(),d(4,"thead",3)(5,"tr"),F(6,wq,10,0)(7,Eq,8,0),f()(),d(8,"tbody"),F(9,Tq,2,0)(10,Dq,16,18),f(),d(11,"tfoot")(12,"tr")(13,"td",4)(14,"small",5),m(15," Total "),f()(),d(16,"td")(17,"span",5),F(18,Sq,2,6)(19,Aq,2,6),f()()(),d(20,"tr")(21,"td",6),m(22),f()()()(),F(23,xq,8,4),d(24,"div",7)(25,"footer",8)(26,"div",9),I(27,"img",10),d(28,"span",11),m(29,"\xA9 2024 Cafe Juan Valdez, Inc"),f()(),d(30,"ul",12)(31,"li",13),fe(),d(32,"svg",14),I(33,"path",15),f(),De(),d(34,"span",16)(35,"small",17),m(36,"@JuanValdez"),f()()()()()()()),i&2&&(p(6),z(6,o.estadoCaja.estado?6:7),p(3),z(9,o.estadoCaja.estado?9:10),p(9),z(18,o.estadoCaja.estado?18:19),p(4),Z(o.ordenId),p(),z(23,o.tipo?23:-1))},dependencies:[Ni,gt],styles:["@media screen{.print[_ngcontent-%COMP%]{display:none}}@media print{.print[_ngcontent-%COMP%]{display:block}button[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]{page-break-inside:auto}app-form-input[_ngcontent-%COMP%]{page-break-inside:auto}}"]});let t=e;return t})();var sc=class{};var ac=(()=>{let e=class e{constructor(r){this.crud=r,this.usuariosSub$=new le([new sc]),this.firebaseConfig={apiKey:"AIzaSyDCyZIHdlBrxc7_7ZPgIYRz_U45y_Q1rDc",authDomain:"shopcaferesp.firebaseapp.com",projectId:"shopcaferesp",storageBucket:"shopcaferesp.appspot.com",messagingSenderId:"871789942990",appId:"1:871789942990:web:4030dad53a0d85c94e989f"},this.usuarios$=this.usuariosSub$?.asObservable(),this.ruta="usuario",this.crud.setRuta("usuario")}crearUsuarioIniApp(r){return y(this,null,function*(){let i=yl(this.firebaseConfig,"Secundaria"),o=Ea(i);return yield Sf(o,r,crypto.randomUUID())})}crearUsuario(r){if(!r.email)return T("");let i=o=>this.crud.crear(o).pipe(S({next:s=>{let a=this.usuariosSub$?.getValue()??[];console.log(a),o.id=s,a.push(o),this.usuariosSub$?.next(a),console.log(a,this.usuariosSub$.getValue())}}));return te(this.crearUsuarioIniApp(r.email)).pipe(H(1),P(o=>(console.log(o.user),r.uid=o.user.uid,r)),V(o=>o.uid?i(o):zt(()=>new Error("Error al generar UID. Intente de nuevo..."))),ke(o=>T("")))}obtenerUsuarios(){return this.usuarios$.pipe(V((r,i)=>r[0].id?this.usuariosSub$.asObservable():this.crud.setRuta(this.ruta).obtenerTodos().pipe(S({next:o=>{console.log(o),this.usuariosSub$.next(o)}}))))}obtenerUsuarioPorUid(r){return this.crud.setRuta(this.ruta).obtenerTodos("uid",r).pipe(S({complete:()=>console.log("Get uid Complete")}))}obtenerUsuariosPorFranquicia(r){return this.usuarios$.pipe(V((i,o)=>i[0].id&&i[0].franquiciaId==r?this.usuariosSub$.asObservable():this.crud.setRuta(this.ruta).obtenerTodos("franquiciaId",r).pipe(S({next:s=>{s.length!=0&&(this.usuariosSub$.next(s),console.log(s,this.usuariosSub$.getValue()))}}))))}actualizarUsuario(r){return this.crud.actualizar(r.id??"",r).pipe(S({next:()=>{var i=this.usuariosSub$.getValue();let o=i.findIndex(s=>s.id===r.id);i.splice(o,1),i.push(r),this.usuariosSub$.next(i)}}))}eliminarUsuario(r){return this.crud.eliminar(r).pipe(S({next:()=>{var i=this.usuariosSub$.getValue();let o=i.findIndex(s=>s.id===r);console.log(o),i.splice(o,1),console.log(i),this.usuariosSub$.next(i),console.log(this.usuariosSub$.getValue())}}))}obtenerManagerAutorizado(r,i,o){return this.crud.setRuta(this.ruta).obtenerPorQuery([Xi("email","==",r),Xi("contrase\xF1a","==",i),Xi("franquiciaId","==",o)]).pipe(H(1))}};e.\u0275fac=function(i){return new(i||e)(x(tt))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Rq=["modal"];function Mq(t,e){if(t&1&&m(0),t&2){let n=E(2);O(": ",n.authMessage,"")}}function Nq(t,e){if(t&1){let n=ie();d(0,"div",32),fe(),d(1,"svg",33),I(2,"path",34),f(),De(),d(3,"span"),m(4),F(5,Mq,1,1),f(),d(6,"button",35),L("click",function(){Q(n);let i=E();return Y(i.limpiarValidacionActualizarForm())}),f()()}if(t&2){let n=E();p(4),O(" ","Orden Invalida"," "),p(),z(5,n.authMessage?5:-1)}}function Pq(t,e){if(t&1){let n=ie();d(0,"div",7)(1,"div",11)(2,"h5",12),m(3,"Autorizacion de Descuentos - Gerente"),f(),I(4,"button",13),f(),d(5,"div",14)(6,"form",15)(7,"app-form-input",16),I(8,"input",36),d(9,"label",37),m(10,"Correo"),f()(),d(11,"app-form-input",16),I(12,"input",38),d(13,"label",39),m(14,"contrase\xF1a"),f()()()(),d(15,"div",24)(16,"button",25),m(17,"Regresar"),f(),d(18,"button",40),L("click",function(){Q(n);let i=E();return Y(i.autorizarDescuento())}),m(19,"Continuar"),f()()()}if(t&2){let n=E(),r,i,o,s;p(6),_("formGroup",n.formGerente),p(),_("control",(r=n.formGerente.get("email"))!==null&&r!==void 0?r:void 0),p(),J("is-invalid",((i=n.formGerente.get("email"))==null?null:i.touched)&&((i=n.formGerente.get("email"))==null?null:i.invalid)),p(3),_("control",(o=n.formGerente.get("contrase\xF1a"))!==null&&o!==void 0?o:void 0),p(),J("is-invalid",((s=n.formGerente.get("contrase\xF1a"))==null?null:s.touched)&&((s=n.formGerente.get("contrase\xF1a"))==null?null:s.invalid)),p(6),_("disabled",n.formGerente.invalid)}}function kq(t,e){if(t&1&&m(0),t&2){let n=E(2);O(" ",n.authMessage,"")}}var Oq=()=>["../preparacion"];function Fq(t,e){if(t&1){let n=ie();d(0,"div",41),fe(),d(1,"svg",42),I(2,"path",43),f(),De(),d(3,"span"),F(4,kq,1,1),m(5,": Desea continuar? "),f(),I(6,"button",13)(7,"hr",44),d(8,"button",45),L("click",function(){Q(n);let i=E();return Y(i.crear())}),m(9,"Continuar"),f()()}if(t&2){let n=E();p(4),z(4,n.authMessage?4:-1),p(4),_("routerLink",it(2,Oq))}}function Vq(t,e){if(t&1){let n=ie();d(0,"app-typeahead",51),L("elementoActivado",function(i){Q(n);let o=E(2);return Y(o.productoSeleccionado(i))}),f()}t&2&&_("data",e)}function Lq(t,e){t&1&&m(0," Cargando ... ")}function jq(t,e){if(t&1&&(d(0,"label",52),m(1),I(2,"hr"),f()),t&2){let n=E(2);p(),O(" ",n.error," ... ")}}function Uq(t,e){if(t&1){let n=ie();d(0,"div",46)(1,"input",47,48),L("change",function(){Q(n);let i=Js(2),o=E();return Y(o.adminCombos(i.checked))}),f(),d(3,"label",49),m(4,"Mostrar Combos"),f()(),F(5,Vq,1,1,"app-typeahead",50),$(6,"async"),F(7,Lq,1,0)(8,jq,3,1)}if(t&2){let n=E(),r;p(5),z(5,(r=W(6,1,n.productos$))?5:n.error?8:7,r)}}function $q(t,e){t&1&&(d(0,"div",53),fe(),d(1,"svg",33),I(2,"path",34),f(),De(),d(3,"span"),m(4," Advertencia: El periodo de este combo ya termino. "),f()())}function Bq(t,e){if(t&1){let n=ie();d(0,"div",54)(1,"div",55)(2,"div",7)(3,"div",11)(4,"h5",12),m(5,"Comienzo de Turno"),f()(),d(6,"div",14)(7,"form",15)(8,"app-form-input",16),I(9,"input",56),d(10,"label",57),m(11,"Saldo Inicial"),f()()()(),d(12,"div",58)(13,"button",40),L("click",function(){Q(n);let i=E();return Y(i.comenzarTurno())}),m(14,"Comenzar"),f()()()()()}if(t&2){let n=E(),r,i;p(7),_("formGroup",n.formInicioTurno),p(),_("control",(r=n.formInicioTurno.get("balanceInicial"))!==null&&r!==void 0?r:void 0),p(),J("is-invalid",((i=n.formInicioTurno.get("balanceInicial"))==null?null:i.touched)&&((i=n.formInicioTurno.get("balanceInicial"))==null?null:i.invalid)),p(4),_("disabled",n.formInicioTurno.invalid)}}var qq=(t,e)=>e.value;function zq(t,e){if(t&1){let n=ie();d(0,"tr",70)(1,"th",71)(2,"button",72),L("click",function(){let o=Q(n).$index,s=E(2);return Y(s.removerProducto(o))}),f()(),d(3,"th",73),m(4),f(),d(5,"th",71)(6,"span",74),m(7),f()(),d(8,"td")(9,"span",75),m(10),$(11,"currency"),f()(),d(12,"td")(13,"app-form-input",16),I(14,"input",76),d(15,"label",77),m(16,"Descuento"),f()()(),d(17,"td")(18,"span",75),m(19),$(20,"currency"),f()()()}if(t&2){let n=e.$implicit,r=e.$index,i,o,s,a,c;_("formGroupName",r),p(4),O(" ",r+1," "),p(3),O(" ",(i=n.get("nombre"))==null?null:i.value," "),p(3),Z(Pt(11,9,(o=n.get("precio"))==null?null:o.value,"MXN","symbol-narrow","2.2-2")),p(3),_("control",(s=n.get("descuento"))!==null&&s!==void 0?s:void 0),p(),J("is-invalid",((a=n.get("descuento"))==null?null:a.touched)&&((a=n.get("descuento"))==null?null:a.invalid)),_("id","descuento"+r),p(5),Z(Pt(20,14,(c=n.get("subTotal"))==null?null:c.value,"MXN","symbol-narrow","2.2-2"))}}function Gq(t,e){if(t&1&&(d(0,"div",54)(1,"div",59)(2,"table",60)(3,"thead",61)(4,"tr"),I(5,"th",62),d(6,"th",62),m(7,"#"),f(),d(8,"th",62),m(9,"Producto"),f(),d(10,"th",62),m(11,"Precio"),f(),d(12,"th",62),m(13,"Descuento"),f(),d(14,"th",62),m(15,"SubTotal"),f()()(),d(16,"tbody",63),at(17,zq,21,19,"tr",78,qq),f(),d(19,"tfoot",64)(20,"tr")(21,"th",65),m(22," Total "),f(),d(23,"th"),m(24),$(25,"currency"),f()()()()(),d(26,"button",66),m(27," Condonar"),f(),d(28,"button",67),fe(),d(29,"svg",68),I(30,"path",69),f()()()),t&2){let n=E();p(2),_("formGroup",n.form),p(15),ct(n.descuentos.controls),p(7),O(" ",Pt(25,3,n.total==null?null:n.total.value,"MXN","symbol-narrow","3.2-2")," "),p(2),_("disabled",n.esCombo||n.contadorCombosEnCaja>0)}}var mN=(()=>{let e=class e{constructor(r,i,o,s,a){this.fb=r,this.pService=i,this.caja=o,this.comboService=s,this.usuario=a,this.id="",this.productoSub$=new le(T([])),this.productos$=this.productoSub$.asObservable().pipe(V(c=>c),S(c=>{this.esCombo?this.combos=c:this.productos=c})),this.productosEnCaja=[],this.form=this.fb.group({total:[0,[N.required,N.min(0)]],descuentos:this.fb.array([],N.required)}),this.formInicioTurno=this.fb.group({balanceInicial:["",[N.required,N.min(0)]]}),this.formGerente=this.fb.group({email:["",[N.required,N.email]],contrase\u00F1a:["",[N.required]]}),this.formCondo=this.fb.group({condonacion:["",N.required],justificacion:["",N.required]}),this.onDestroy$=new Pe,this.productos=[],this.combos=[],this.esCombo=!1,this.contadorCombosEnCaja=0,this.ticketCondonado=!1,this.advertenciaFecha=!1,this.authGerente=!1,this.authMessage=void 0,this.error=void 0,this.inicioTurno=!0,this.estadoCaja={estado:!0,balanceInicial:0,ingreso:0}}ngOnInit(){this.caja.setFranquiciaId=this.id,this.caja.estadoTurno().subscribe(r=>this.inicioTurno=!r.estado),console.log("Inicio TUrno",this.inicioTurno),this.caja.resetearHashmapIngredientes(),this.productoSub$.next(this.pService.obtenerProductos().pipe(mc(this.caja.initInventarios$),ke(r=>(this.error="Error de Conexi\xF3n, Intente Recargar",[]))).pipe(S(console.log)))}get formStatus$(){return this.caja.validezOrden$.pipe(P(r=>r&&!this.form.invalid))}get total(){return this.form.get("total")}get descuentos(){return this.form.get("descuentos")}comenzarTurno(){let r=this.formInicioTurno.value;this.caja.comenzarTurno(r.balanceInicial).subscribe({complete:()=>this.inicioTurno=!1})}terminarTurno(){this.caja.terminarTurno().pipe(S(()=>this.estadoCaja=this.caja.EstadoCaja),V(()=>this.caja.crearTicketTerminoTurno()),Ds(30)).subscribe({complete:()=>{this.inicioTurno=!0,window.print()}}),this.formInicioTurno.reset()}calcularSubTotal(r){if(r.precio==null)return r;let i=r??Ne(A({},new fs),{subTotal:0});Object.assign(i,r),i.descuento=0;var o=r.precio*(1-(r.descuento??0)/100);return i.subTotal=this.esCombo?r.precio:Math.round((o+Number.EPSILON)*100/100),console.log(o,o+Number.EPSILON,Math.round((o+Number.EPSILON)*100)/100,i.subTotal),i}agregarDescuento(r){var i=this.fb.group({id:[r.id],esCombo:[this.esCombo],nombre:[r.nombre],precio:[r.precio],descuento:[{value:0,disabled:this.esCombo},[N.min(0),N.max(100)]],subTotal:[r.precio]});return this.esCombo||i.get("descuento")?.valueChanges.pipe(ir(this.onDestroy$),V(o=>T(o)),S(()=>this.authGerente=!this.ticketCondonado),bn(-1),hc(200),S(o=>this.total?.patchValue(this.total.value-(o==-1?0:i.get("subTotal")?.value??r.precio??0))),S(o=>{o==null&&i.get("descuento")?.patchValue(0)}),P(o=>o==-1?0:o),S(o=>{var s=(r.precio??0)*(1-(o??0)/100);console.log(s),i.get("subTotal")?.patchValue(Math.round(s*100)/100)}),S(()=>{this.ticketCondonado||this.total?.patchValue(this.total.value+i.get("subTotal")?.value)}),S(o=>this.authGerente=!(o==0||o==-1))).subscribe(),i}removerProducto(r){if(!(!this.descuentos.at(r).value||this.ticketCondonado)){if(this.descuentos.at(r).get("esCombo")?.value){console.log("Removing Combo");let{id:i}=this.descuentos.at(r).value??Ne(A({},new tc),{subTotal:0});this.removerCombo(i??"",r)}else{let{id:i}=this.descuentos.at(r).value??Ne(A({},new fs),{subTotal:0}),o=this.productos.find(s=>s.id==i);if(!o)return;this.caja.removeHashMapIngredientes=o.ingredientesBase??[],this.total?.patchValue(this.total?.value-this.descuentos.at(r).get("subTotal")?.value),this.productosEnCaja.splice(r,1)}this.descuentos.removeAt(r)}}productoSeleccionado(r){if(this.ticketCondonado||this.inicioTurno)return;this.advertenciaFecha=!1;var i=[];let o=r;if(this.esCombo){if(this.advertenciaFecha=new Date(o.fechaFin??"")<new Date,this.advertenciaFecha)return;i=this.comboSeleccionado(o)}else this.caja.setHashMapIngredientes(r.ingredientesBase??[]);this.caja.validezOrdenSub$.getValue()?this.esCombo?(this.descuentos.push(this.agregarDescuento(o)),this.total?.patchValue(this.total.value+o.precio),this.productosEnCaja=this.productosEnCaja.concat(i)):(this.productosEnCaja.push(this.calcularSubTotal(r)),this.descuentos.push(this.agregarDescuento(r))):(this.total?.setErrors({required:!0}),this.caja.validezOrdenSub$.next(!0))}empujarProductoCaja(r){this.caja.validezOrdenSub$.getValue()?(this.esCombo||this.descuentos.push(this.agregarDescuento(r)),this.productosEnCaja.push(this.calcularSubTotal(r))):(this.total?.setErrors({required:!0}),this.caja.validezOrdenSub$.next(!0))}comboSeleccionado(r){console.log(r);var i=[];return this.contadorCombosEnCaja+=1,r.promocion?.forEach(o=>{var s=this.productos.find(a=>a.id==o.id)??{};console.log("Producto combo",s,this.productos),this.caja.setHashMapIngredientes(s?.ingredientesBase??[],!0),i.push(s)}),this.caja.validezOrdenSub$.getValue()||(r.promocion?.forEach(o=>{var s=this.productos.find(a=>a.id==o.id)??{};console.log("Producto combo",s,this.productos),this.caja.removeHashMapIngredientes=s?.ingredientesBase??[]}),i=[],this.contadorCombosEnCaja-=1),i}removerCombo(r,i){let o=this.combos.find(s=>s.id==r);!o||this.ticketCondonado||(o.promocion?.forEach(s=>{var a=this.productosEnCaja.findIndex(l=>l.id==s.id)??{},c=this.productos.find(l=>l.id==s.id)??{};this.caja.removeHashMapIngredientes=c.ingredientesBase??[],this.productosEnCaja.splice(a,1)}),this.total?.patchValue(this.total?.value-(o.precio??0)),this.contadorCombosEnCaja-=1)}aplicarCondo(){this.formCondo.invalid||(this.ticketCondonado=!0,this.descuentos.controls.forEach(r=>r.patchValue({descuento:100,subTotal:r.get("precio")?.value})))}adminCombos(r){this.esCombo=r,r?this.productoSub$.next(this.comboService.obtenerCombo()):this.productoSub$.next(this.pService.obtenerProductos())}autorizarDescuento(){if(console.log("AUTORIZACION"),this.formGerente.invalid)return;let r=this.formGerente.value;this.usuario.obtenerManagerAutorizado(r.email,r.contrase\u00F1a,this.id).pipe(H(1),P(i=>i[0]!=null),S(()=>this.authGerente=!1)).subscribe(i=>{i?(this.crear(),this.authMessage="Autorizacion Exitosa",this.formCondo.reset(),this.ticketCondonado=!1):(this.form.get("total")?.setErrors({required:!0}),this.formCondo.reset(),this.authMessage="Credenciales incorrectas. Intente de nuevo",this.ticketCondonado=!1)})}limpiarValidacionActualizarForm(){this.form.clearValidators(),this.form.updateValueAndValidity()}crear(){let r=this.form.value;this.formCondo.invalid||(this.caja.ordenVenta.tipoCondonacion=this.formCondo.get("condonacion")?.value,this.caja.ordenVenta.justificacion=this.formCondo.get("justificacion")?.value),this.caja.ordenVenta.total=this.total?.value,this.caja.ordenVenta.productos=r.descuentos,this.caja.productosEnCaja=this.productosEnCaja,console.log(this.productosEnCaja)}ngOnDestroy(){this.onDestroy$.next(!0),this.onDestroy$.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)(b(Ye),b(Gn),b(oo),b(nc),b(ac))},e.\u0275cmp=se({type:e,selectors:[["app-venta"]],viewQuery:function(i,o){if(i&1&&yT(Rq,5),i&2){let s;Fc(s=Vc())&&(o.modal=s.first)}},inputs:{id:"id"},standalone:!0,features:[ae],decls:51,vars:16,consts:[["id","caja",1,"mt-3","container-fluid"],[1,"d-flex","justify-content-between"],[1,"text-muted"],[1,"btn","btn-outline-danger",3,"disabled","click"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],["modal",""],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],["class","mb-0 alert alert-danger alert-dismissible  align-items-center fade show","role","alert"],["id","condonacion","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],["condonacion",""],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"formGroup"],[3,"control"],["formControlName","condonacion","id","condonacion","type","text","placeholder","condonacion",1,"form-control"],["value",""],["value","INFLUENCER"],["value","EMPLEADO"],["for","condonacion"],["formControlName","justificacion","id","justificacion","type","text","placeholder","justificacion",1,"form-control",2,"height","20vh"],["for","justificacion"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],[1,"row"],[3,"classList"],["class","mx-3 my-2 alert alert-danger alert-dismissible  align-items-center fade show","role","alert"],["class","container-fluid"],["OrdenId","Corte de Caja",3,"EstadoCaja"],["role","alert",1,"mb-0","alert","alert-danger","alert-dismissible","align-items-center","fade","show"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-exclamation-triangle-fill","flex-shrink-0","me-2"],["d","M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],["formControlName","email","id","email","type","email","placeholder","email",1,"form-control"],["for","email"],["formControlName","contrase\xF1a","id","contrase\xF1a","type","password","placeholder","contrase\xF1a",1,"form-control"],["for","contrase\xF1a"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["role","alert",1,"mb-0","alert","alert-primary","alert-dismissible","align-items-center","fade","show"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-info-circle-fill","flex-shrink-0","me-2"],["d","M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2"],[1,"mt-2"],["data-bs-dismiss","modal",1,"btn","btn-success",3,"routerLink","click"],[1,"form-check","form-switch","mb-1"],["type","checkbox","role","switch","id","flexSwitchCheckDefault",1,"form-check-input",3,"change"],["combo",""],["for","flexSwitchCheckDefault",1,"form-check-label"],["key","nombre",3,"data"],["key","nombre",3,"data","elementoActivado"],["for","",1,""],["role","alert",1,"mx-3","my-2","alert","alert-danger","alert-dismissible","align-items-center","fade","show"],[1,"container-fluid"],[1,"mx-3","modal-dialog","modal-dialog-centered"],["formControlName","balanceInicial","id","balanceInicial","type","number","placeholder","balanceInicial",1,"form-control"],["for","balanceInicial"],[1,"modal-footer","mt-2"],[1,"overflow-auto",2,"height","35vw","width","100%"],[1,"table",3,"formGroup"],[1,"sticky-top","table-secondary"],["scope","col"],["formArrayName","descuentos",1,"table-group-divider"],[1,"table-group-divider","sticky-bottom","table-secondary","overflow-hidden"],["colspan","5"],["data-bs-toggle","modal","data-bs-target","#condonacion",1,"btn","btn-primary","mt-3",3,"disabled"],["data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn","btn-outline-success","float-end","mt-3","me-3"],["xmlns","http://www.w3.org/2000/svg","width","2rem","height","2rem","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-right"],["fill-rule","evenodd","d","M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"],[1,"align-middle",3,"formGroupName"],[1,"align-middle"],["type","button","aria-label","Close",1,"btn-close","align-middle",2,"width","10%",3,"click"],["scope","row",1,"align-middle"],[1,"input-group-text","muted"],[1,"input-group-text"],["formControlName","descuento","type","number","placeholder","descuento",1,"form-control",3,"id"],["for","descuento"],["class","align-middle",3,"formGroupName"]],template:function(i,o){if(i&1&&(d(0,"div",0)(1,"div",1)(2,"h2",2),m(3,"Caja"),f(),d(4,"button",3),L("click",function(){return o.terminarTurno()}),m(5,"Terminar Turno"),f()(),I(6,"hr"),d(7,"div",4,5)(9,"div",6)(10,"div",7),F(11,Nq,7,2,"div",8)(12,Pq,20,8)(13,Fq,10,3),f()()(),d(14,"div",9,10)(16,"div",6)(17,"div",7)(18,"div",11)(19,"h5",12),m(20,"Condonacion del Ticket"),f(),I(21,"button",13),f(),d(22,"div",14)(23,"form",15)(24,"app-form-input",16)(25,"select",17)(26,"option",18),m(27,"NINGUNO"),f(),d(28,"option",19),m(29,"INFLUENCER"),f(),d(30,"option",20),m(31,"EMPLEADO"),f()(),d(32,"label",21),m(33,"Condonacion"),f()(),d(34,"app-form-input",16),I(35,"textarea",22),d(36,"label",23),m(37,"Justificacion"),f()()()(),d(38,"div",24)(39,"button",25),m(40,"Regresar"),f(),d(41,"button",26),L("click",function(){return o.aplicarCondo()}),m(42,"Save changes"),f()()()()(),d(43,"div",27)(44,"div",28),F(45,Uq,9,3),f(),d(46,"div",28),F(47,$q,5,0,"div",29)(48,Bq,15,5,"div",30)(49,Gq,31,8),f()()(),I(50,"app-imprimir",31)),i&2){let s,a,c,l;p(4),_("disabled",o.inicioTurno),p(7),z(11,o.form.invalid?11:o.authGerente?12:13),p(12),_("formGroup",o.formCondo),p(),_("control",(s=o.form.get("condonacion"))!==null&&s!==void 0?s:void 0),p(),J("is-invalid",((a=o.form.get("condonacion"))==null?null:a.touched)&&((a=o.form.get("condonacion"))==null?null:a.invalid)),p(9),_("control",(c=o.form.get("justificacion"))!==null&&c!==void 0?c:void 0),p(),J("is-invalid",((l=o.form.get("justificacion"))==null?null:l.touched)&&((l=o.form.get("justificacion"))==null?null:l.invalid)),p(6),_("disabled",o.formCondo.invalid||o.productosEnCaja.length==0),p(3),_("classList",o.inicioTurno?"col-1":"col-3"),p(),z(45,o.inicioTurno?-1:45),p(),_("classList",o.inicioTurno?"col-11":"col-9"),p(),z(47,o.advertenciaFecha?47:-1),p(),z(48,o.inicioTurno?48:49),p(2),_("EstadoCaja",o.estadoCaja)}},dependencies:[Je,et,no,ro,We,qt,jr,Xe,Ke,Qe,st,Vr,Lr,mt,ze,Ut,Ni,gt,Un,oc],styles:["@media print{#caja[_ngcontent-%COMP%]{display:none}}"]});let t=e;return t})();function Hq(t,e){t&1&&(d(0,"div",17),fe(),d(1,"svg",18),I(2,"path",19),f(),De(),d(3,"span"),m(4),f(),I(5,"button",20),f()),t&2&&(p(4),O(" ","Orden Invalida"," "))}function Wq(t,e){if(t&1){let n=ie();d(0,"div",21),fe(),d(1,"svg",22),I(2,"path",23),f(),De(),d(3,"span"),m(4," Desea crear este combo? "),f(),I(5,"button",20)(6,"hr",24),d(7,"button",25),L("click",function(){Q(n);let i=E();return Y(i.crear())}),m(8,"Continuar"),f()()}}function Kq(t,e){if(t&1){let n=ie();d(0,"app-typeahead",26),L("elementoActivado",function(i){Q(n);let o=E();return Y(o.productoSeleccionado(i))}),f()}t&2&&_("data",e)}function Qq(t,e){t&1&&m(0," Cargando ... ")}function Yq(t,e){if(t&1&&(d(0,"label",27),m(1),I(2,"hr"),f()),t&2){let n=E();p(),O(" ",n.error," ... ")}}var Jq=(t,e)=>e.value;function Zq(t,e){t&1&&(d(0,"div",17),fe(),d(1,"svg",18),I(2,"path",19),f(),De(),d(3,"span"),m(4," Advertencia: El periodo de este combo ya termino. Se recomienda su eliminaci\xF3n. "),f()())}function Xq(t,e){if(t&1){let n=ie();d(0,"tr",50)(1,"th")(2,"button",51),L("click",function(){let o=Q(n).$index,s=E(2);return Y(s.removerProductoPromo(o))}),f()(),d(3,"th",52),m(4),f(),d(5,"th")(6,"span",1),m(7),f()(),d(8,"td")(9,"span",45),m(10),f()(),d(11,"td")(12,"app-form-input",31),I(13,"input",53),d(14,"label",54),m(15,"Descuento"),f()()(),d(16,"td")(17,"span",45),m(18),f()()()}if(t&2){let n=e.$implicit,r=e.$index,i,o,s,a,c;_("formGroupName",r),p(4),O(" ",r+1," "),p(3),O(" ",(i=n.get("nombre"))==null?null:i.value," "),p(3),Z((o=n.get("precio"))==null?null:o.value),p(2),_("control",(s=n==null?null:n.get("descuento"))!==null&&s!==void 0?s:void 0),p(),J("is-invalid",((a=n.get("descuento"))==null?null:a.touched)&&((a=n.get("descuento"))==null?null:a.invalid)),_("id","descuento"+r),p(5),Z((c=n.get("subTotal"))==null?null:c.value)}}function ez(t,e){if(t&1){let n=ie();d(0,"button",55),L("click",function(){Q(n);let i=E(2);return Y(i.adminCombos())}),m(1," Administrar Combos "),f()}if(t&2){let n=E(2);_("disabled",n.cargando)}}function tz(t,e){if(t&1){let n=ie();d(0,"button",56),L("click",function(){Q(n);let i=E(2);return Y(i.eliminar())}),m(1," Eliminar "),f()}if(t&2){let n=E(2);_("disabled",n.cargando)}}function nz(t,e){if(t&1){let n=ie();d(0,"div",28),F(1,Zq,5,0,"div",10),d(2,"form",29)(3,"div",11)(4,"div",30)(5,"app-form-input",31),I(6,"input",32),d(7,"label",33),m(8,"Nombre"),f()()(),d(9,"div",30)(10,"app-form-input",31),I(11,"input",34),d(12,"label",35),m(13,"Fecha Inicio"),f()()(),d(14,"div",30)(15,"app-form-input",31),I(16,"input",36),d(17,"label",37),m(18,"Fecha Termino"),f()()()()(),d(19,"div",38)(20,"table",39)(21,"thead",40)(22,"tr"),I(23,"th",41),d(24,"th",41),m(25,"#"),f(),d(26,"th",41),m(27,"Producto"),f(),d(28,"th",41),m(29,"Precio"),f(),d(30,"th",41),m(31,"Descuento"),f(),d(32,"th",41),m(33,"SubTotal"),f()()(),d(34,"tbody",42),at(35,Xq,19,9,"tr",57,Jq),f(),d(37,"tfoot",43)(38,"tr")(39,"th",44),m(40," Total "),f(),d(41,"th")(42,"app-form-input",31)(43,"span",45),m(44,"$"),f(),I(45,"input",46),d(46,"label",47),m(47,"Total"),f()()()()()()(),d(48,"button",48),L("click",function(){Q(n);let i=E();return Y(i.marcarFormTocado())}),m(49),f(),F(50,ez,2,1,"button",49)(51,tz,2,1),f()}if(t&2){let n=E(),r,i,o,s,a,c,l,u;p(),z(1,n.advertenciaFecha?1:-1),p(),_("formGroup",n.form),p(3),_("control",(r=n.form.get("nombre"))!==null&&r!==void 0?r:void 0),p(),J("is-invalid",((i=n.form.get("nombre"))==null?null:i.touched)&&((i=n.form.get("nombre"))==null?null:i.invalid)),p(4),_("control",(o=n.form.get("fechaInicio"))!==null&&o!==void 0?o:void 0),p(),J("is-invalid",((s=n.form.get("fechaInicio"))==null?null:s.touched)&&((s=n.form.get("fechaInicio"))==null?null:s.invalid)),p(4),_("control",(a=n.form.get("fechaFin"))!==null&&a!==void 0?a:void 0),p(),J("is-invalid",((c=n.form.get("fechaFin"))==null?null:c.touched)&&((c=n.form.get("fechaFin"))==null?null:c.invalid)),p(4),_("formGroup",n.form),p(15),ct(n.promocion.controls),p(7),_("control",(l=n.form.get("precio"))!==null&&l!==void 0?l:void 0),p(3),J("is-invalid",((u=n.form.get("precio"))==null?null:u.touched)&&((u=n.form.get("precio"))==null?null:u.invalid)),p(3),_("disabled",n.cargando),p(),O(" ",n.nuevo?"Crear":"Actualizar"," "),p(),z(50,n.nuevo?50:51)}}function rz(t,e){if(t&1&&(d(0,"div",58),fe(),d(1,"svg",59),I(2,"path",60),f(),De(),d(3,"span"),m(4),f()()),t&2){let n=E();p(4),O(" ",n.message," ")}}var gN=(()=>{let e=class e{constructor(r,i,o){this.fb=r,this.pService=i,this.eventoService=o,this.destroy$=new Pe,this.combo=[],this.productoSub$=new le(T([])),this.productos$=this.productoSub$.asObservable().pipe(V(s=>s)),this.combos$=T([]),this.error=void 0,this.message=void 0,this.nuevo=!1,this.advertenciaFecha=!1,this.cargando=!1,this.form=this.fb.group({id:[""],nombre:[,N.required],fechaInicio:[this.toISOLocal(new Date),N.required],fechaFin:[this.toISOLocal(new Date),N.required],promocion:this.fb.array([]),precio:[0,[N.required,N.min(1)]]})}toISOLocal(r){var i=new Date(r-r.getTimezoneOffset()*6e4);return i.setSeconds(0,0),i.toISOString().slice(0,-1)}ngOnInit(){this.combos$=this.eventoService.obtenerCombo().pipe(S(console.log),ke(r=>(this.error="Error de Conexi\xF3n",[]))),this.productoSub$.next(this.combos$)}get promocion(){return this.form.get("promocion")}agregarProductoPromo(r){return this.fb.group({id:[r.id],nombre:[r.nombre],precio:[r.precio],descuento:[{value:0,disabled:!0},[N.min(1),N.max(100)]],subTotal:[r.precio]})}removerProductoPromo(r){this.promocion.removeAt(r)}productoSeleccionado(r){this.nuevo||this.reset(),this.producto=r;let i=this.promocion?.value;if(!(!this.nuevo&&i.findIndex(o=>o.id===r.id)!=-1))if(this.nuevo)this.promocion.push(this.agregarProductoPromo(r));else{let o=r;this.advertenciaFecha=new Date(o.fechaFin??"")<new Date,this.form.patchValue(o),console.log("Combo Selected",o),o.promocion?.forEach(s=>this.promocion.push(this.agregarProductoPromo(s)))}}eliminar(){this.producto&&this.eventoService.eliminarCombo(this.producto.id??"").subscribe({complete:()=>{this.producto=void 0,this.message="El producto fue Eliminado"},error:()=>{this.message="Error de conexion. Intente de nuevo",this.cargando=!1}})}adminCombos(){this.reset(),this.productoSub$.next(this.combos$)}reset(){this.producto=void 0,this.message=void 0,this.promocion.controls=[],this.form.reset(),this.nuevo=!1,this.advertenciaFecha=!1}nuevoCombo(){this.reset(),this.nuevo=!0,this.productoSub$.next(this.pService.obtenerProductos())}marcarFormTocado(){this.form.markAllAsTouched()}crear(){if(this.cargando)return;this.cargando=!0;let r=this.form.value;console.log(r),this.nuevo?this.eventoService.crearCombo(r).subscribe({complete:()=>{this.message="El combo fue Creado",this.reset(),this.adminCombos(),this.cargando=!1},error:()=>{this.message="Error de conexion. Intente de nuevo",this.cargando=!1}}):this.eventoService.actualizarProducto(r).subscribe({complete:()=>this.message="El combo fue Actualizado",error:()=>{this.message="Error de conexion. Intente de nuevo",this.cargando=!1}})}ngOnDestroy(){this.destroy$.next(void 0),this.destroy$.complete()}};e.\u0275fac=function(i){return new(i||e)(b(Ye),b(Gn),b(nc))},e.\u0275cmp=se({type:e,selectors:[["app-eventos"]],standalone:!0,features:[ae],decls:23,vars:6,consts:[[1,"mt-3","container-fluid"],[1,"text-muted"],[1,"position-fixed","me-5","mb-4",2,"bottom","5rem","right","7rem"],[1,"z-3","btn","btn-lg","bg-primary","float-end","position-absolute","float-end","rounded-circle",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","2rem","height","3rem","fill","white","viewBox","0 0 16 16",1,"bi","bi-plus"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],["modal",""],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],["class","mb-0 alert alert-danger alert-dismissible  align-items-center fade show","role","alert"],[1,"row"],[1,"col-3"],["key","nombre",3,"data"],[1,"col-9"],["class","container-fluid"],["class","mb-0 alert alert-success alert-dismissible  align-items-center fade show","role","alert"],["role","alert",1,"mb-0","alert","alert-danger","alert-dismissible","align-items-center","fade","show"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-exclamation-triangle-fill","flex-shrink-0","me-2"],["d","M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["role","alert",1,"mb-0","alert","alert-primary","alert-dismissible","align-items-center","fade","show"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-info-circle-fill","flex-shrink-0","me-2"],["d","M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2"],[1,"mt-2"],["data-bs-dismiss","modal",1,"btn","btn-success",3,"click"],["key","nombre",3,"data","elementoActivado"],["for","",1,""],[1,"container-fluid"],[1,"mb-2",3,"formGroup"],[1,"col-4"],[3,"control"],["formControlName","nombre","id","nombre","type","text","placeholder","nombre",1,"form-control"],["for","nombre"],["formControlName","fechaInicio","id","fechaInicio","type","datetime-local","placeholder","fechaInicio",1,"form-control"],["for","fechaInicio"],["formControlName","fechaFin","id","fechaFin","type","datetime-local","placeholder","fechaFin",1,"form-control"],["for","fechaFin"],[1,"overflow-auto",2,"height","26vw","width","100%"],[1,"table",3,"formGroup"],[1,"sticky-top","table-secondary"],["scope","col"],["formArrayName","promocion",1,"table-group-divider"],[1,"table-group-divider","sticky-bottom","table-secondary","overflow-hidden"],["colspan","5"],[1,"input-group-text"],["formControlName","precio","id","precio","type","number","placeholder","precio",1,"form-control"],["for","precio"],["data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn","btn-outline-success","mt-1","me-3",3,"disabled","click"],["class","btn btn-outline-secondary mt-1 me-3",3,"disabled"],[1,"align-bottom",3,"formGroupName"],["type","button","aria-label","Close",1,"btn-close","align-middle",3,"click"],["scope","row"],["formControlName","descuento","type","number","placeholder","descuento",1,"form-control",3,"id"],["for","descuento"],[1,"btn","btn-outline-secondary","mt-1","me-3",3,"disabled","click"],[1,"btn","btn-outline-danger","mt-1","me-3",3,"disabled","click"],["class","align-bottom",3,"formGroupName"],["role","alert",1,"mb-0","alert","alert-success","alert-dismissible","align-items-center","fade","show"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-check-circle-fill","flex-shrink-0","me-2"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"]],template:function(i,o){if(i&1&&(d(0,"div",0)(1,"h2",1),m(2,"Combos"),f(),I(3,"hr"),d(4,"div",2)(5,"button",3),L("click",function(){return o.nuevoCombo()}),fe(),d(6,"svg",4),I(7,"path",5),f()()(),De(),d(8,"div",6,7)(10,"div",8)(11,"div",9),F(12,Hq,6,1,"div",10)(13,Wq,9,0),f()()(),d(14,"div",11)(15,"div",12),F(16,Kq,1,1,"app-typeahead",13),$(17,"async"),F(18,Qq,1,0)(19,Yq,3,1),f(),d(20,"div",14),F(21,nz,52,18,"div",15)(22,rz,5,1,"div",16),f()()()),i&2){let s;p(12),z(12,o.form.invalid?12:13),p(4),z(16,(s=W(17,4,o.productos$))?16:o.error?19:18,s),p(5),z(21,o.producto||o.nuevo?21:-1),p(),z(22,o.message?22:-1)}},dependencies:[ze,mt,gt,Je,et,We,qt,Xe,Ke,Qe,st,Vr,Lr]});let t=e;return t})();var vN=(()=>{let e=class e{constructor(r,i){this.crud=r,this.sanitizer=i}obtenerTickets(){return this.crud.setRuta("productos").obtenerTodos().pipe(H(1))}ticketsCSV(){return this.obtenerTickets().pipe(S(r=>this.downloadFile(r)),S({complete:()=>console.log("CSV COMPLETE")}))}downloadFile(r,i="tickets_"+new Date().toDateString()){let o=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),s=this.ConvertToCSV(r),a=new Blob([s],{type:"text/json"}),c=document.createElement("a"),l=URL.createObjectURL(a);navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1&&c.setAttribute("target","_blank"),c.setAttribute("href",l),c.setAttribute("download",i+".csv"),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c)}ConvertToCSV(r){return JSON.stringify(r)}};e.\u0275fac=function(i){return new(i||e)(x(tt),x(mv))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var oz=(t,e)=>e.id;function sz(t,e){if(t&1&&(d(0,"tr")(1,"th",8),m(2),f(),d(3,"th",9)(4,"span",10),m(5),f()(),d(6,"td")(7,"div",11)(8,"span",12),m(9),f(),d(10,"span",12),m(11),f()()(),d(12,"td")(13,"span",10),m(14),f()(),d(15,"td")(16,"span",10),m(17),f()(),d(18,"td")(19,"span",13),m(20),f()()()),t&2){let n=E(),r=n.$index,i=n.$implicit;p(2),O(" ",r+1," "),p(3),O(" ",i.nombre," "),p(4),O(" ",i.disponible," "),p(2),O(" ",i.unidadConsumo," "),p(3),O(" ",i.minPermitible," "),p(3),O(" ",i.minResurtir," "),p(3),O(" ",i.resurtir?"\u274C":"\u2705"," ")}}function az(t,e){if(t&1&&F(0,sz,21,7,"tr"),t&2){let n=e.$implicit;z(0,n?0:-1)}}var yN=(()=>{let e=class e{constructor(r,i,o){this.inventarios=r,this.ingredientes=i,this.tickets=o,this.id="",this.inventario=void 0,this.message=void 0}ngOnInit(){this.inventarios.setFranquiciaId=this.id,this.inventarios$=this.inventarios.inventariosJoinIngredientes$.pipe(ke(r=>(this.message="Error de conexion. Intente de nuevo",T([]))))}eliminar(r){if(r.nombre){alert("Inventario en uso, no es posible elimnarlo.");return}this.inventarios.eliminarInventario(r.id).subscribe({complete:()=>alert("Inventario Eliminado")})}descargarCSV(){this.jsonRef=this.tickets.ticketsCSV().subscribe()}};e.\u0275fac=function(i){return new(i||e)(b(Ur),b(en),b(vN))},e.\u0275cmp=se({type:e,selectors:[["app-inventario"]],inputs:{id:"id"},standalone:!0,features:[ae],decls:26,vars:2,consts:[[1,"mt-3","container-fluid"],[1,"d-inline"],[1,"text-muted"],[1,"overflow-auto",2,"height","40vw","width","100%"],[1,"table"],[1,"sticky-top","table-secondary"],["scope","col"],[1,"table-group-divider"],["scope","row",1,"align-middle"],[1,"align-middle"],[1,"text-muted","align-middle"],[1,"input-group","input-group-sm","align-middle"],[1,"input-group-text"],[1,"h5","align-middle"]],template:function(i,o){i&1&&(d(0,"div",0)(1,"div",1)(2,"h2",2),m(3,"Inventario"),f()(),I(4,"hr"),d(5,"div",3)(6,"table",4)(7,"thead",5)(8,"tr")(9,"th",6),m(10,"#"),f(),d(11,"th",6),m(12,"Ingrediente"),f(),d(13,"th",6),m(14,"En Inventario"),f(),d(15,"th",6),m(16,"Min Permitible"),f(),d(17,"th",6),m(18,"Min Resurtir"),f(),d(19,"th",6),m(20,"Resurtir"),f()()(),Qs(21),d(22,"tbody",7),at(23,az,1,1,null,null,oz),$(25,"async"),f(),Ys(),f()()()),i&2&&(p(23),ct(W(25,0,o.inventarios$)))},dependencies:[ze]});let t=e;return t})();function cz(t,e){if(t&1){let n=ie();d(0,"app-typeahead",7),L("elementoActivado",function(i){Q(n);let o=E();return Y(o.productoSeleccionado(i))}),f()}t&2&&_("data",e)}function lz(t,e){t&1&&m(0," Cargando ... ")}function uz(t,e){if(t&1&&(d(0,"label",8),m(1),I(2,"hr"),f()),t&2){let n=E();p(),O(" ",n.error," ... ")}}function dz(t,e){if(t&1&&(d(0,"app-form-input",11),I(1,"textarea",12),d(2,"label",13),m(3,"Receta"),f()()),t&2){let n=e.f;_("control",n.receta),p(),J("is-invalid",n.receta.touched&&n.receta.invalid)}}function hz(t,e){if(t&1&&(d(0,"form",6)(1,"app-form",9),F(2,dz,4,3,"ng-template",null,10,Ue),f()()),t&2){let n=E();_("formGroup",n.form),p(),_("form",n.form)("soloLectura",!0)}}var _N=(()=>{let e=class e{constructor(r,i,o){this.fb=r,this.pService=i,this.ingredientes=o,this.ingredientesProdutcto$=T([]),this.error=void 0,this.message=void 0,this.nuevoProducto=!1,this.ingrediente=!1,this.form=this.fb.group({receta:["",[N.required]]})}ngOnInit(){this.ingredientesProdutcto$=this.pService.obtenerProductos().pipe(ke(r=>(this.error="Error de Conexi\xF3n",[])))}productoSeleccionado(r){this.producto=r,this.form.get("receta")?.patchValue(this.producto.receta)}};e.\u0275fac=function(i){return new(i||e)(b(Ye),b(Gn),b(en))},e.\u0275cmp=se({type:e,selectors:[["app-recetas"]],standalone:!0,features:[ae],decls:12,vars:4,consts:[[1,"mt-3","container-fluid"],[1,"text-muted"],[1,"row"],[1,"col-3"],["key","nombre",3,"data"],[1,"col-9"],[3,"formGroup"],["key","nombre",3,"data","elementoActivado"],["for","",1,""],[3,"form","soloLectura"],["inputTpt",""],[3,"control"],["formControlName","receta","id","receta","type","text","placeholder","receta",1,"form-control",2,"height","20vh"],["for","receta"]],template:function(i,o){if(i&1&&(d(0,"div",0)(1,"h2",1),m(2,"Recetas"),f(),I(3,"hr"),d(4,"div",2)(5,"div",3),F(6,cz,1,1,"app-typeahead",4),$(7,"async"),F(8,lz,1,0)(9,uz,3,1),f(),d(10,"div",5),F(11,hz,4,3,"form",6),f()()()),i&2){let s;p(6),z(6,(s=W(7,2,o.ingredientesProdutcto$))?6:o.error?9:8,s),p(5),z(11,o.producto?11:-1)}},dependencies:[Je,et,We,Xe,Ke,Qe,st,gt,mt,ze,Ut,Xt]});let t=e;return t})();var tn=(()=>{let e=class e{constructor(r,i,o,s){this.router=r,this.authFire=i,this.usuarios=o,this.crud=s,this.i=0,this.authStatusSub=new le(null),this.currentUser$=this.authStatusSub.asObservable().pipe(V(a=>(this.i++,this.userChanged=a,console.log(this.i,a),a?.uid?(a.uid==this.currentUser?.uid&&T(this.currentUser),this.usuarios.obtenerUsuarioPorUid(a.uid)):T(void 0))),V(a=>a&&a[0]?T(a[0]):this.userChanged?.uid?Ts(te(this.userChanged.delete())).pipe(P(()=>{})):T(void 0)),Vm(1),je(a=>!this.intentoInicioSesion||!!a),S(a=>{this.currentUser=a,this.intentoInicioSesion=!1})),this.currentUser=void 0,this.userChanged={},this.intentoInicioSesion=!1,this.sesionIniciada$=this.currentUser$.pipe(P(a=>!a)),this.uid$=this.currentUser$.pipe(P(a=>a?.id)),this.franquicia$=this.currentUser$.pipe(P(a=>a?.franquiciaId)),this.esAdmin$=this.currentUser$.pipe(P(a=>!(a&&a.rol=="ADMIN"))),this.esCajero$=this.currentUser$.pipe(P(a=>!!a&&a.rol=="CAJERO")),this.esGerente$=this.currentUser$.pipe(P(a=>!!a&&a.rol=="GERENTE")),this.esBarista$=this.currentUser$.pipe(P(a=>!!a&&a.rol=="BARISTA")),console.log(i.name),this.auth=Ea(i),yA(this.auth,a=>{a?(this.authStatusSub.next(a),console.log("User is logged in")):(this.currentUser=void 0,this.authStatusSub.next(null),console.log("User is logged out"))})}iniciarConGoogle(){return this.intentoInicioSesion=!0,te(Af(this.auth,bl)).pipe(H(1),V(()=>_A(this.auth,new Yy)),P(r=>r.user),S({complete:()=>console.log("Login Completed")}))}cerrarSesion(){return y(this,null,function*(){yield IA(this.auth).then(()=>this.router.navigate(["/login"]))})}};e.\u0275fac=function(i){return new(i||e)(x(yt),x(Jn),x(ac),x(tt))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function fz(t,e){if(t&1){let n=ie();d(0,"app-typeahead",12),L("elementoActivado",function(i){Q(n);let o=E();return Y(o.usuarioSeleccionado(i))}),f()}t&2&&_("data",e)}function pz(t,e){t&1&&m(0," Cargando ... ")}function mz(t,e){if(t&1&&(d(0,"label",13),m(1),I(2,"hr"),f()),t&2){let n=E();p(),O(" ",n.error," ... ")}}function gz(t,e){if(t&1&&(d(0,"div",6)(1,"div",17)(2,"app-form-input",18),I(3,"input",19),d(4,"label",20),m(5," Nombre"),f()()(),d(6,"div",17)(7,"app-form-input",18)(8,"select",21)(9,"option",22),$(10,"async"),m(11,"ADMIN"),f(),d(12,"option",22),$(13,"async"),m(14,"GERENTE"),f(),d(15,"option",23),m(16,"CAJERO"),f(),d(17,"option",24),m(18,"BARISTA"),f()(),d(19,"label",25),m(20,"ROL"),f()()()()),t&2){let n=e.f,r=E(2);p(2),_("control",n.nombre),p(),J("is-invalid",n.nombre.touched&&n.nombre.invalid),p(4),_("control",n.rol),p(),J("is-invalid",n.rol.touched&&n.rol.invalid),p(),_("value","ADMIN")("disabled",!W(10,12,r.isAdmin$)),p(3),_("value","GERENTE")("disabled",!W(13,14,r.isAdmin$)),p(3),_("value","CAJERO"),p(2),_("value","BARISTA")}}function vz(t,e){if(t&1&&(d(0,"app-form-input",18),I(1,"input",26),d(2,"label",27),m(3,"Email"),f()()),t&2){let n=e.f;_("control",n.email),p(),J("is-invalid",n.email.touched&&n.email.invalid)}}function yz(t,e){if(t&1&&(d(0,"app-form-input",18),I(1,"input",28),d(2,"label",29),m(3,"Contrase\xF1a"),f()()),t&2){let n=e.f;_("control",n.contrase\u00F1a),p(),J("is-invalid",n.contrase\u00F1a.touched&&n.contrase\u00F1a.invalid)}}function _z(t,e){if(t&1){let n=ie();d(0,"form",10)(1,"app-form",14),L("formValue",function(i){Q(n);let o=E();return Y(o.crear(i))}),F(2,gz,21,16,"ng-template",null,15,Ue)(4,vz,4,3,"ng-template",null,15,Ue)(6,yz,4,3,"ng-template",null,15,Ue),d(8,"span"),m(9),f(),d(10,"button",16),L("click",function(){Q(n);let i=E();return Y(i.eliminar())}),m(11,"Eliminar"),f()()()}if(t&2){let n=E();_("formGroup",n.form),p(),_("soloLectura",n.cargando)("form",n.form),p(8),Z(n.nuevoUsuario?"Crear":"Actualizar"),p(),_("disabled",n.nuevoUsuario)}}function Iz(t,e){if(t&1&&(d(0,"div",30),fe(),d(1,"svg",31),I(2,"path",32),f(),De(),d(3,"span"),m(4),f(),I(5,"button",33),f()),t&2){let n=E();p(4),O(" ",n.message," ")}}var IN=(()=>{let e=class e{constructor(r,i,o){this.usuarios=r,this.auth=i,this.fb=o,this.id="",this.uIdUsuario="",this.esGerente=!1,this.esAdmin=!1,this.usuario=new sc,this.isAdmin$=this.auth.esAdmin$,this.form=this.fb.group({nombre:["",[N.required]],rol:["CAJERO",[N.required]],email:["",[N.required,N.email]],contrase\u00F1a:[{value:"",disabled:!0},[N.required]]}),this.message=void 0,this.error=void 0,this.nuevoUsuario=!1,this.cargando=!1}ngOnInit(){this.form.disable(),this.auth.uid$.pipe(H(1)).subscribe(r=>this.uIdUsuario=r),this.auth.esGerente$.pipe(H(1)).subscribe(r=>this.esGerente=r),this.auth.esAdmin$.pipe(H(1)).subscribe(r=>this.esAdmin=r),this.usuarios$=this.usuarios.obtenerUsuariosPorFranquicia(this.id).pipe(S(console.log),ke(r=>(this.error="Error de Conexion...",T([]))))}usuarioSeleccionado(r){this.form.reset(),this.usuario=r,this.nuevoUsuario=!1,this.message=void 0,this.form.get("email")?.disable(),this.form.get("nombre")?.disable(),this.form.get("contrase\xF1a")?.disable(),this.form.get("rol")?.enable(),(this.usuario?.uid==this.uIdUsuario&&this.esGerente||this.esAdmin)&&this.form.get("contrase\xF1a")?.enable(),this.form.patchValue(r)}crearUsuario(){this.form.get("nombre")?.enable(),this.form.get("email")?.enable(),this.nuevoUsuario=!0,this.message=void 0,this.usuario=void 0,this.form.reset()}crear(r){this.cargando||(this.usuario?(Object.assign(this.usuario,r),this.usuarios.actualizarUsuario(this.usuario).subscribe({complete:()=>{this.message="El usuario fue Actualizado",this.usuario=void 0},error:()=>{this.cargando=!1,this.message="Error de conexion. Intente de nuevo"}})):(r.franquiciaId=this.id,this.usuarios.crearUsuario(r).subscribe({complete:()=>{this.message="El usuario fue Creado",this.nuevoUsuario=!1},error:()=>{this.cargando=!1,this.message="Error de conexion. Intente de nuevo",alert("Error inesperado. intente de nuevo.")}})))}eliminar(){!this.usuario||this.cargando||this.usuarios.eliminarUsuario(this.usuario.id??"").subscribe({complete:()=>{this.message="El usuario fue eliminado",this.usuario=void 0},error:()=>{this.cargando=!1,this.message="Error de conexion. Intente de nuevo"}})}};e.\u0275fac=function(i){return new(i||e)(b(ac),b(tn),b(Ye))},e.\u0275cmp=se({type:e,selectors:[["app-usuarios"]],inputs:{id:"id"},standalone:!0,features:[hn([]),ae],decls:17,vars:5,consts:[[1,"mt-3","container-fluid"],[1,"text-muted"],[1,"position-fixed","me-5","mb-5",2,"bottom","5rem","right","7rem"],[1,"btn","btn-lg","bg-primary","float-end","position-absolute","float-end","rounded-circle",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","2rem","height","3rem","fill","white","viewBox","0 0 16 16",1,"bi","bi-plus"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"],[1,"row"],[1,"col-5"],["key","nombre",3,"data"],[1,"col-7"],[3,"formGroup"],["class","alert alert-success alert-dismissible d-flex align-items-center fade show","role","alert"],["key","nombre",3,"data","elementoActivado"],["for","",1,""],[3,"soloLectura","form","formValue"],["inputTpt",""],["type","button",1,"btn","btn-danger","ms-2","mt-2",3,"disabled","click"],[1,"col"],[3,"control"],["formControlName","nombre","id","nombre","type","text","aria-label","nombre","placeholder","Nombre",1,"form-control"],["for","nombre"],["formControlName","rol","id","rol","aria-label","rol","type","text","placeholder","Rol",1,"form-control"],[3,"value","disabled"],["selected","",3,"value"],[3,"value"],["for","rol"],["formControlName","email","id","email","type","text","placeholder","Email",1,"form-control"],["for","email"],["formControlName","contrase\xF1a","id","contrase\xF1a","type","password","placeholder","contrase\xF1a",1,"form-control"],["for","contrase\xF1a"],["role","alert",1,"alert","alert-success","alert-dismissible","d-flex","align-items-center","fade","show"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-check-circle-fill","flex-shrink-0","me-2"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"]],template:function(i,o){if(i&1&&(d(0,"div",0)(1,"h2",1),m(2,"Usuarios"),f(),I(3,"hr"),d(4,"div",2)(5,"button",3),L("click",function(){return o.crearUsuario()}),fe(),d(6,"svg",4),I(7,"path",5),f()()(),De(),d(8,"div",6)(9,"div",7),F(10,fz,1,1,"app-typeahead",8),$(11,"async"),F(12,pz,1,0)(13,mz,3,1),f(),d(14,"div",9),F(15,_z,12,5,"form",10)(16,Iz,6,1,"div",11),f()()()),i&2){let s;p(10),z(10,(s=W(11,3,o.usuarios$))?10:o.error?13:12,s),p(5),z(15,o.usuario!=null&&o.usuario.rol||o.nuevoUsuario?15:-1),p(),z(16,o.message?16:-1)}},dependencies:[ze,mt,Xt,gt,Je,et,no,ro,We,jr,Xe,Ke,Qe,st]});let t=e;return t})();var so=(t,e)=>{let n=j(tn),r=j(yt);return console.log("Func"),console.log(t.url[0].path),n.esAdmin$.pipe(V(i=>i?T(!0):n.franquicia$.pipe(S(console.log),P(o=>(console.log("Franquicias",o),r.createUrlTree(["franquicias",o]))))))};var wz=()=>["/admin"],wN=(()=>{let e=class e{constructor(r){this.auth=r,this.spinnerHidden=!0}iniciarConGoogle(){this.spinnerHidden=!1,this.auth.iniciarConGoogle().subscribe(()=>this.spinnerHidden=!0)}};e.\u0275fac=function(i){return new(i||e)(b(tn))},e.\u0275cmp=se({type:e,selectors:[["app-login"]],standalone:!0,features:[ae],decls:10,vars:2,consts:[[1,"container","my-5",2,"max-width","60vh"],[1,"text-muted","ms-3","mb-3"],[1,"row"],[1,"btn","btn-outline-danger",3,"routerLink","click"],["xmlns","http://www.w3.org/2000/svg","width","1.7rem","height","1.5rem","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-google"],["d","M15.545 6.558a9.4 9.4 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.7 7.7 0 0 1 5.352 2.082l-2.284 2.284A4.35 4.35 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.8 4.8 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.7 3.7 0 0 0 1.599-2.431H8v-3.08z"]],template:function(i,o){i&1&&(d(0,"div",0)(1,"h3",1),m(2,"Restaurante Cafe Juan Vald\xE9z"),f(),I(3,"hr"),d(4,"div",2)(5,"button",3),L("click",function(){return o.iniciarConGoogle()}),d(6,"span"),fe(),d(7,"svg",4),I(8,"path",5),f(),m(9," INICIO CON GOOGLE "),f()()()()),i&2&&(p(5),_("routerLink",it(1,wz)))},dependencies:[Un]});let t=e;return t})();var mm=class{};var EN=(()=>{let e=class e{constructor(r,i,o){this.crud=r,this.ingredientes=i,this.inventarios=o,this.franquiciasSub$=new le([{}]),this.franquicias$=this.franquiciasSub$?.asObservable(),this.ruta="franquicia",this.crud.setRuta("franquicia")}crearfranquicia(r){var i;return this.crud.crear(r).pipe(S({next:o=>{let s=this.franquiciasSub$?.value??[];r.id=o,this.inventarios.setFranquiciaId=o,s.push(r),this.franquiciasSub$?.next(s)}}),S(o=>i=o),V(()=>this.inventarios.inventariosJoinIngredientes$))}obtenerfranquicias(){return this.franquicias$.pipe(V((r,i)=>r[0].id?this.franquiciasSub$.asObservable():this.crud.setRuta(this.ruta).obtenerTodos().pipe(S({next:o=>{this.franquiciasSub$.next(o)}}))))}actualizarfranquicia(r){return this.crud.setRuta(this.ruta).actualizar(r.id??"",r).pipe(S({next:()=>{var i=this.franquiciasSub$.getValue();let o=i.findIndex(s=>s.id===r.id);i.splice(o,1),i.push(r),this.franquiciasSub$.next(i)}}))}eliminarfranquicia(r){return this.inventarios.setFranquiciaId=r,this.crud.eliminar(r).pipe(V(()=>this.inventarios.obtenerInventario()),_t(),xe(i=>this.inventarios.eliminarInventario(i.id??"")),S({next:()=>{var i=this.franquiciasSub$.getValue();let o=i.findIndex(s=>s.id===r);i.splice(o,1),this.franquiciasSub$.next(i)}}))}};e.\u0275fac=function(i){return new(i||e)(x(tt),x(en),x(Ur))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function bz(t,e){if(t&1){let n=ie();d(0,"app-typeahead",12),L("elementoActivado",function(i){Q(n);let o=E();return Y(o.franquiciaSeleccionada(i))}),f()}t&2&&_("data",e)}function Cz(t,e){t&1&&m(0," Cargando ... ")}function Tz(t,e){if(t&1&&(d(0,"label",13),m(1),I(2,"hr"),f()),t&2){let n=E();p(),O(" ",n.error," ... ")}}function Dz(t,e){if(t&1&&(d(0,"app-form-input",19),I(1,"input",20),d(2,"label",21),m(3," Nombre"),f()()),t&2){let n=e.f;_("control",n.nombre),p(),J("is-invalid",n.nombre.touched&&n.nombre.invalid)}}function Sz(t,e){if(t&1&&(d(0,"div",22)(1,"app-form-input",19),I(2,"input",23),d(3,"label",24),m(4," Codigo Postal"),f()()(),d(5,"div",25)(6,"app-form-input",19),I(7,"input",26),d(8,"label",27),m(9,"Direccion"),f()()()),t&2){let n=e.f;p(),_("control",n.codigoPostal),p(),J("is-invalid",n.codigoPostal.touched&&n.codigoPostal.invalid),p(4),_("control",n.direccion),p(),J("is-invalid",n.direccion.touched&&n.direccion.invalid)}}function Az(t,e){if(t&1&&(d(0,"div",28)(1,"app-form-input",19),I(2,"input",29),d(3,"label",30),m(4," Email"),f()()(),d(5,"div",28)(6,"app-form-input",19),I(7,"input",31),d(8,"label",32),m(9,"Telefono"),f()()()),t&2){let n=e.f;p(),_("control",n.email),p(),J("is-invalid",n.email.touched&&n.email.invalid),p(4),_("control",n.tel),p(),J("is-invalid",n.tel.touched&&n.tel.invalid)}}var xz=t=>["/franquicias",t],Rz=t=>["/franquicias",t,"surtir"];function Mz(t,e){if(t&1){let n=ie();d(0,"form",10)(1,"app-form",14),L("formValue",function(i){Q(n);let o=E();return Y(o.crear(i))}),F(2,Dz,4,3,"ng-template",null,15,Ue)(4,Sz,10,6,"ng-template",null,15,Ue)(6,Az,10,6,"ng-template",null,15,Ue),d(8,"span"),m(9),f(),d(10,"button",16),L("click",function(){Q(n);let i=E();return Y(i.eliminar())}),m(11,"Eliminar"),f(),d(12,"button",17),m(13,"Administrar"),f(),d(14,"button",18),m(15,"Surtir"),f()()()}if(t&2){let n=E();_("formGroup",n.form),p(),_("form",n.form),p(8),Z(n.nuevafranquicia?"Crear":"Actualizar"),p(),_("disabled",n.nuevafranquicia),p(2),_("disabled",n.nuevafranquicia)("routerLink",jc(8,xz,n.franquicia==null?null:n.franquicia.id)),p(2),_("disabled",n.nuevafranquicia)("routerLink",jc(10,Rz,(n.franquicia==null?null:n.franquicia.id)+"_Almacen"))}}function Nz(t,e){if(t&1&&(d(0,"div",33),fe(),d(1,"svg",34),I(2,"path",35),f(),De(),d(3,"span"),m(4),f(),I(5,"button",36),f()),t&2){let n=E();p(4),O(" ",n.message," ")}}var bN=(()=>{let e=class e{constructor(r,i,o,s){this.franquicias=r,this.auth=i,this.router=o,this.fb=s,this.franquicia=new mm,this.isAdmin$=this.auth.esAdmin$,this.form=this.fb.group({nombre:["",[N.required,N.maxLength(30)]],direccion:["",[N.required]],codigoPostal:["",[N.required]],email:["",[N.required,N.email]],tel:["",[N.required,N.pattern(/[()0-9]{4} [0-9]{4} [0-9]{4}/)]]}),this.message=void 0,this.error=void 0,this.nuevafranquicia=!1}ngOnInit(){this.franquicias$=this.franquicias.obtenerfranquicias().pipe(ke(r=>(this.error="Error de Conexion...",T([]))))}franquiciaSeleccionada(r){this.nuevafranquicia=!1,this.franquicia=r,this.message=void 0,this.form.patchValue(r)}crearFranquicia(){this.nuevafranquicia=!0,this.franquicia=void 0,this.form.reset()}crear(r){this.franquicia?(Object.assign(this.franquicia,r),this.franquicias.actualizarfranquicia(this.franquicia).subscribe({complete:()=>{this.message="El franquicia fue Actualizada",this.franquicia=void 0}})):this.franquicias.crearfranquicia(r).subscribe({complete:()=>{this.message="El franquicia fue Creada"},next:i=>this.franquicia?this.franquicia.id=i:this.franquicia=void 0})}eliminar(){this.franquicia&&this.franquicias.eliminarfranquicia(this.franquicia.id??"").subscribe({complete:()=>this.message="El franquicia fue eliminada"})}};e.\u0275fac=function(i){return new(i||e)(b(EN),b(tn),b(yt),b(Ye))},e.\u0275cmp=se({type:e,selectors:[["app-franquicias"]],standalone:!0,features:[ae],decls:17,vars:5,consts:[[1,"mt-3","container-fluid"],[1,"text-muted"],[1,"position-fixed","me-5","mb-5",2,"bottom","5rem","right","7rem"],[1,"btn","btn-lg","bg-primary","float-end","position-absolute","float-end","rounded-circle",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","2rem","height","3rem","fill","white","viewBox","0 0 16 16",1,"bi","bi-plus"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"],[1,"row"],[1,"col-5"],["key","nombre",3,"data"],[1,"col-7"],[3,"formGroup"],["class","alert alert-success alert-dismissible d-flex align-items-center fade show","role","alert"],["key","nombre",3,"data","elementoActivado"],["for","",1,""],[3,"form","formValue"],["inputTpt",""],["type","button",1,"btn","btn-danger","mx-2","mt-2",3,"disabled","click"],["type","button",1,"d-inblock","btn","btn-primary","mt-2","me-2",3,"disabled","routerLink"],["type","button",1,"d-inblock","btn","btn-secondary","mt-2",3,"disabled","routerLink"],[3,"control"],["formControlName","nombre","id","nombre","type","text","aria-label","nombre","placeholder","Nombre",1,"form-control"],["for","nombre"],[1,"col-4"],["formControlName","codigoPostal","id","codigoPostal","type","number","min","10000","max","99999","step","1","aria-label","codigoPostal","placeholder","codigoPostal",1,"form-control"],["for","codigoPostal"],[1,"col-8"],["formControlName","direccion","id","direccion","aria-label","direccion","type","text","placeholder","direccion",1,"form-control","flex-grow"],["for","direccion"],[1,"col"],["formControlName","email","id","email","type","email","min","10000","max","99999","step","1","aria-label","email","placeholder","email",1,"form-control"],["for","email"],["formControlName","tel","id","tel","aria-label","tel","type","tel","placeholder","tel",1,"form-control"],["for","tel"],["role","alert",1,"alert","alert-success","alert-dismissible","d-flex","align-items-center","fade","show"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-check-circle-fill","flex-shrink-0","me-2"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"]],template:function(i,o){if(i&1&&(d(0,"div",0)(1,"h2",1),m(2,"Franquicias"),f(),I(3,"hr"),d(4,"div",2)(5,"button",3),L("click",function(){return o.crearFranquicia()}),fe(),d(6,"svg",4),I(7,"path",5),f()()(),De(),d(8,"div",6)(9,"div",7),F(10,bz,1,1,"app-typeahead",8),$(11,"async"),F(12,Cz,1,0)(13,Tz,3,1),f(),d(14,"div",9),F(15,Mz,16,12,"form",10)(16,Nz,6,1,"div",11),f()()()),i&2){let s;p(10),z(10,(s=W(11,3,o.franquicias$))?10:o.error?13:12,s),p(5),z(15,o.franquicia!=null&&o.franquicia.id||o.nuevafranquicia?15:-1),p(),z(16,o.message?16:-1)}},dependencies:[ze,mt,Xt,eS,Un,Je,et,We,qt,Xe,Ke,hs,SE,Qe,st,gt]});let t=e;return t})();var CN=(t,e)=>{let n=j(yt),r=j(tn),i=n.parseUrl("franquicias");return i.queryParams.intentUrl=e.url,r.sesionIniciada$.pipe(V(o=>o?T(!0):te(r.cerrarSesion()).pipe(P(()=>n.parseUrl("/login")))))};var Pz=()=>["inventarios"],kz=()=>["balances"],Oz=()=>["insumos"],Fz=()=>["insumosOpciones"],Vz=()=>["usuarios"],Lz=()=>["produccion"];function jz(t,e){t&1&&(d(0,"li",8)(1,"a",18),m(2),$(3,"uppercase"),f()(),d(4,"li",8)(5,"a",18),m(6),$(7,"uppercase"),f()(),d(8,"li",19)(9,"a",20),m(10),$(11,"uppercase"),f(),d(12,"ul",21)(13,"li")(14,"a",22),m(15,"Capturar Pedidos"),f()(),d(16,"li"),I(17,"hr",23),f(),d(18,"li")(19,"a",24),m(20,"Opciones Insumos"),f()()()(),d(21,"li",8)(22,"a",25),m(23),$(24,"uppercase"),f()(),d(25,"li",8)(26,"a",26),m(27),$(28,"uppercase"),f()()),t&2&&(p(),_("routerLink",it(21,Pz)),p(),O(" ",W(3,11,"Inventarios"),""),p(3),_("routerLink",it(22,kz)),p(),O(" ",W(7,13,"ingresos/egresos"),""),p(4),O(" ",W(11,15,"insumos")," "),p(4),_("routerLink",it(23,Oz)),p(5),_("routerLink",it(24,Fz)),p(3),_("routerLink",it(25,Vz)),p(),Z(W(24,17,"usuarios")),p(3),_("routerLink",it(26,Lz)),p(),Z(W(28,19,"produccion")))}var Uz=()=>["/admin"];function $z(t,e){t&1&&(d(0,"li",8)(1,"a",27),m(2),$(3,"uppercase"),f()()),t&2&&(p(),_("routerLink",it(4,Uz)),p(),Z(W(3,2,"franquicias")))}var Bz=()=>["ventas"],qz=()=>["recetas"],TN=(()=>{let e=class e{constructor(r){this.auth=r,this.sesionIniciada$=this.auth.sesionIniciada$,this.isAdmin$=this.auth.esAdmin$,this.esGerente$=this.auth.esGerente$,this.franquicia$=this.auth.franquicia$}cerrarSession(){this.auth.cerrarSesion()}};e.\u0275fac=function(i){return new(i||e)(b(tn))},e.\u0275cmp=se({type:e,selectors:[["app-navbar"]],standalone:!0,features:[ae],decls:29,vars:18,consts:[[1,"navbar","navbar-expand-lg","bg-light"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["src","assets/icons/icon-72x72.png","alt","Logo","width","30","height","24",1,"d-inline-block","align-text-top"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLinkActive","active",1,"nav-link","active",3,"routerLink"],["routerLinkActive","recetas",1,"nav-link",3,"routerLink"],["class","nav-item"],[1,"d-flex","float-end"],[1,"navbar-nav"],[1,"nav-link",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-box-arrow-right"],["fill-rule","evenodd","d","M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0z"],["fill-rule","evenodd","d","M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708z"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],[1,"nav-item","dropdown"],["role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"dropdown-menu"],["routerLinkActive","insumos",1,"dropdown-item",3,"routerLink"],[1,"dropdown-divider"],["routerLinkActive","insumosOpciones",1,"dropdown-item",3,"routerLink"],["routerLinkActive","usuarios",1,"nav-link",3,"routerLink"],["routerLinkActive","produccion",1,"nav-link",3,"routerLink"],["routerLinkActive","franquicias",1,"nav-link",3,"routerLink"]],template:function(i,o){i&1&&(d(0,"nav",0)(1,"div",1)(2,"a",2),I(3,"img",3),m(4," CAFE "),f(),d(5,"button",4),I(6,"span",5),f(),d(7,"div",6)(8,"ul",7)(9,"li",8)(10,"a",9),m(11),$(12,"uppercase"),f()(),F(13,jz,29,27),$(14,"async"),$(15,"async"),d(16,"li",8)(17,"a",10),m(18),$(19,"uppercase"),f()(),F(20,$z,4,5,"li",11),$(21,"async"),f(),d(22,"div",12)(23,"ul",13)(24,"li",8)(25,"a",14),L("click",function(){return o.cerrarSession()}),fe(),d(26,"svg",15),I(27,"path",16)(28,"path",17),f()()()()()()()()),i&2&&(p(10),_("routerLink",it(16,Bz)),p(),Z(W(12,6,"caja")),p(2),z(13,W(14,8,o.esGerente$)||W(15,10,o.isAdmin$)?13:-1),p(4),_("routerLink",it(17,qz)),p(),Z(W(19,12,"Recetas")),p(2),z(20,W(21,14,o.isAdmin$)?20:-1))},dependencies:[Un,Mi,ze],styles:["@media print{app-navbar[_ngcontent-%COMP%]{display:none!important;transition:none}}"]});let t=e;return t})();var DN=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=se({type:e,selectors:[["app-home"]],standalone:!0,features:[ae],decls:2,vars:0,template:function(i,o){i&1&&I(0,"app-navbar")(1,"router-outlet")},dependencies:[TN,Oo],styles:["@media print{app-navbar[_ngcontent-%COMP%]{display:none!important}}"]});let t=e;return t})();var ps=(t,e)=>{let n=j(tn);return n.esAdmin$.pipe(V(r=>r?T(!0):n.esGerente$))};function zz(t,e){if(t&1){let n=ie();d(0,"app-typeahead",12),L("elementoActivado",function(i){Q(n);let o=E();return Y(o.ingredienteSeleccionado(i))}),f()}t&2&&_("data",e)}function Gz(t,e){t&1&&m(0," Cargando ... ")}function Hz(t,e){if(t&1&&(d(0,"label",13),m(1),I(2,"hr"),f()),t&2){let n=E();p(),O(" ",n.error," ... ")}}function Wz(t,e){if(t&1&&(d(0,"app-form-input",17),I(1,"input",18),d(2,"label",19),m(3," Nombre"),f()()),t&2){let n=e.f;_("control",n.nombre),p(),J("is-invalid",n.nombre.touched&&n.nombre.invalid)}}function Kz(t,e){if(t&1&&(d(0,"div",20)(1,"app-form-input",17)(2,"select",21)(3,"option",22),m(4),$(5,"uppercase"),f(),d(6,"option",22),m(7),$(8,"uppercase"),f()(),d(9,"label",23),m(10," Es Topping?"),f()()()),t&2){let n=e.f;p(),_("control",n.topping),p(),J("is-invalid",n.topping.touched&&n.topping.invalid),p(),_("value",!0),p(),Z(W(5,7,"si")),p(2),_("value",!1),p(),Z(W(8,9,"no"))}}function Qz(t,e){if(t&1&&(d(0,"div",20)(1,"app-form-input",17)(2,"select",24)(3,"option",25),m(4),$(5,"uppercase"),f(),d(6,"option",26),m(7),$(8,"uppercase"),f(),d(9,"option",27),m(10),$(11,"uppercase"),f(),d(12,"option",28),m(13),$(14,"uppercase"),f()(),d(15,"label",29),m(16," Unidad de Consumo"),f()()(),d(17,"div",20)(18,"app-form-input",17)(19,"select",30)(20,"option",31),m(21),$(22,"uppercase"),f(),d(23,"option",22),m(24),$(25,"uppercase"),f(),d(26,"option",22),m(27),$(28,"uppercase"),f(),d(29,"option",22),m(30),$(31,"uppercase"),f(),d(32,"option",22),m(33),$(34,"uppercase"),f(),d(35,"option",22),m(36),$(37,"uppercase"),f()(),d(38,"label",32),m(39," Unidad de Insumo"),f()()()),t&2){let n=e.f;p(),_("control",n.unidadConsumo),p(),J("is-invalid",n.unidadConsumo.touched&&n.unidadConsumo.invalid),p(2),Z(W(5,22,"mililitros")),p(3),Z(W(8,24,"gramos")),p(3),Z(W(11,26,"centimetros")),p(3),Z(W(14,28,"piezas")),p(5),_("control",n.unidadInsumo),p(),J("is-invalid",n.unidadInsumo.touched&&n.unidadInsumo.invalid),p(),_("value","litros"),p(),Z(W(22,30,"litros")),p(2),_("value","metros cubicos"),p(),Z(W(25,32,"metros cubicos")),p(2),_("value","kilos"),p(),Z(W(28,34,"kilos")),p(2),_("value","toneladas"),p(),Z(W(31,36,"toneladas")),p(2),_("value","metros"),p(),Z(W(34,38,"metros")),p(2),_("value","piezas"),p(),Z(W(37,40,"piezas"))}}function Yz(t,e){if(t&1&&(d(0,"div",20)(1,"app-form-input",17),I(2,"input",33),d(3,"label",34),m(4," Cantidad por Topping"),f()()(),d(5,"div",20)(6,"app-form-input",17),I(7,"input",35),d(8,"label",36),m(9," Precio Topping"),f()()()),t&2){let n=e.f;p(),_("control",n.cantidadTopping),p(),J("is-invalid",n.cantidadTopping.touched&&n.cantidadTopping.invalid),p(4),_("control",n.precioTopping),p(),J("is-invalid",n.precioTopping.touched&&n.precioTopping.invalid)}}function Jz(t,e){if(t&1){let n=ie();d(0,"form",10)(1,"app-form",14),L("formValue",function(i){Q(n);let o=E();return Y(o.crear(i))}),F(2,Wz,4,3,"ng-template",null,15,Ue)(4,Kz,11,11,"ng-template",null,15,Ue)(6,Qz,40,42,"ng-template",null,15,Ue)(8,Yz,10,6,"ng-template",null,15,Ue),d(10,"span"),m(11),f(),d(12,"button",16),L("click",function(){Q(n);let i=E();return Y(i.eliminar())}),m(13,"Eliminar"),f()()()}if(t&2){let n=E();_("formGroup",n.form),p(),_("soloLectura",n.cargando)("form",n.form),p(10),Z(n.nuevoIngrediente?"Crear":"Actualizar"),p(),_("disabled",n.nuevoIngrediente)}}function Zz(t,e){if(t&1&&(d(0,"div",37),fe(),d(1,"svg",38),I(2,"path",39),f(),De(),d(3,"span"),m(4),f(),I(5,"button",40),f()),t&2){let n=E();_("ngClass",n.alertColor===!0?"alert-success":"alert-danger"),p(4),O(" ",n.message," ")}}var SN=(()=>{let e=class e{constructor(r,i,o){this.ingredientes=r,this.fb=i,this.cd=o,this.ingrediente=void 0,this.onDestroy$=new Pe,this.form=this.fb.group({nombre:["",[N.required]],unidadConsumo:["mililitros",[N.required]],unidadInsumo:["litros",[N.required]],topping:[!1,[N.required]],cantidadTopping:[{value:0,disabled:!0},[N.required]],precioTopping:[{value:10,disabled:!0},[N.required]]}),this.message=void 0,this.error=void 0,this.nuevoIngrediente=!1,this.cargando=!1,this.alertColor=!0}ngOnInit(){this.Ingredientes$=this.ingredientes.obtenerIngredientes().pipe(ke(r=>(this.error="Error de Conexion...",T([])))),this.form.get("topping")?.valueChanges.pipe(ir(this.onDestroy$),bn("false"),S(r=>{r=="true"||r===!0?(this.form.get("cantidadTopping")?.enable(),this.form.get("precioTopping")?.enable()):(this.form.get("cantidadTopping")?.disable(),this.form.get("precioTopping")?.disable())})).subscribe()}ingredienteSeleccionado(r){console.log(r),this.nuevoIngrediente=!1,this.resetEstado(),this.ingrediente=r,this.form.patchValue(r)}crearIngrediente(){this.nuevoIngrediente=!0,this.resetEstado()}resetEstado(){this.ingrediente=void 0,this.message=void 0,this.error=void 0,this.form.reset(),this.form.get("cantidadTopping")?.disable(),this.form.get("precioTopping")?.disable()}crear(r){this.cargando||(r.topping=r.topping=="true",this.cargando=!0,this.ingrediente?(Object.assign(this.ingrediente,r),this.ingredientes.actualizarIngrediente(this.ingrediente).subscribe({complete:()=>{this.message="El Ingrediente fue Actualizado",this.cargando=!1,this.ingrediente=void 0},error:()=>{this.cargando=!1,this.message="Error de conexion. Intente de nuevo"}})):this.ingredientes.crearIngrediente(r).subscribe({complete:()=>{this.message="El Ingrediente fue Creado",this.nuevoIngrediente=!1,this.ingrediente=void 0,this.cargando=!1},error:()=>{this.message="Error de conexion. Intente de nuevo",this.cargando=!1}}))}eliminar(){!this.ingrediente||this.cargando||(this.cargando=!0,this.ingredientes.eliminarIngrediente(this.ingrediente.id??"").subscribe({complete:()=>{this.message="El Ingrediente fue Eliminado",this.alertColor=!0,this.nuevoIngrediente=!1,this.ingrediente=void 0,this.cargando=!1,console.log("completed")},error:r=>{this.cargando=!1,this.alertColor=!1,this.message=r.message}}))}ngOnDestroy(){this.onDestroy$.next(!0),this.onDestroy$.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)(b(en),b(Ye),b(gr))},e.\u0275cmp=se({type:e,selectors:[["app-ingredientes"]],standalone:!0,features:[ae],decls:17,vars:5,consts:[[1,"mt-3","container-fluid"],[1,"text-muted"],[1,"position-fixed","me-5","mb-5",2,"bottom","5rem","right","7rem"],[1,"btn","btn-lg","bg-primary","float-end","position-absolute","float-end","rounded-circle",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","2rem","height","3rem","fill","white","viewBox","0 0 16 16",1,"bi","bi-plus"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"],[1,"row"],[1,"col-5"],["key","nombre",3,"data"],[1,"col-7"],[3,"formGroup"],["class","alert alert-dismissible d-flex align-items-center fade show","role","alert",3,"ngClass"],["key","nombre",3,"data","elementoActivado"],["for","",1,""],[3,"soloLectura","form","formValue"],["inputTpt",""],["type","button",1,"btn","btn-danger","ms-2","mt-2",3,"disabled","click"],[3,"control"],["formControlName","nombre","id","nombre","type","text","aria-label","nombre","placeholder","Nombre",1,"form-control"],["for","nombre"],[1,"col"],["formControlName","topping","id","topping","aria-label","topping","placeholder","topping",1,"form-control"],[3,"value"],["for","topping"],["formControlName","unidadConsumo","id","unidadConsumo","aria-label","unidadConsumo","placeholder","unidadConsumo",1,"form-control"],["value","mililitros","selected",""],["value","gramos"],["value","centimetros"],["value","piezas"],["for","unidadConsumo"],["formControlName","unidadInsumo","id","unidadInsumo","aria-label","unidadInsumo","placeholder","unidadInsumo",1,"form-control"],["selected","",3,"value"],["for","unidadInsumo"],["formControlName","cantidadTopping","id","cantidadTopping","aria-label","cantidadTopping","placeholder","cantidadTopping",1,"form-control"],["for","cantidadTopping"],["formControlName","precioTopping","id","precioTopping","aria-label","precioTopping","placeholder","precioTopping",1,"form-control"],["for","precioTopping"],["role","alert",1,"alert","alert-dismissible","d-flex","align-items-center","fade","show",3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-check-circle-fill","flex-shrink-0","me-2"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"]],template:function(i,o){if(i&1&&(d(0,"div",0)(1,"h2",1),m(2,"Ingredientes"),f(),I(3,"hr"),d(4,"div",2)(5,"button",3),L("click",function(){return o.crearIngrediente()}),fe(),d(6,"svg",4),I(7,"path",5),f()()(),De(),d(8,"div",6)(9,"div",7),F(10,zz,1,1,"app-typeahead",8),$(11,"async"),F(12,Gz,1,0)(13,Hz,3,1),f(),d(14,"div",9),F(15,Jz,14,5,"form",10)(16,Zz,6,2,"div",11),f()()()),i&2){let s;p(10),z(10,(s=W(11,3,o.Ingredientes$))?10:o.error?13:12,s),p(5),z(15,o.ingrediente||o.nuevoIngrediente?15:-1),p(),z(16,o.message?16:-1)}},dependencies:[ze,Mi,mt,Xt,gt,Je,et,no,ro,We,jr,Xe,Ke,Qe,st,Ut,Ri]});let t=e;return t})();function Xz(t,e){if(t&1){let n=ie();d(0,"app-typeahead",16),L("elementoActivado",function(i){Q(n);let o=E();return Y(o.productoSeleccionado(i))}),f()}t&2&&_("data",e)}function eG(t,e){t&1&&m(0," Cargando ... ")}function tG(t,e){if(t&1&&(d(0,"label",17),m(1),I(2,"hr"),f()),t&2){let n=E();p(),O(" ",n.error," ... ")}}var AN=(t,e)=>e.value;function nG(t,e){if(t&1){let n=ie();d(0,"tr",28)(1,"th",29)(2,"span",30)(3,"button",31),L("click",function(){let o=Q(n).$index,s=E(2);return Y(s.removerIngrediente(!0,o))}),f(),m(4),f()(),d(5,"td")(6,"div",32),I(7,"input",33),d(8,"span",34),m(9),f(),d(10,"div",35)(11,"button",36),L("click",function(){let i=Q(n),o=i.$implicit,s=i.$index,a=E(2);return Y(a.moverIngAgregables(o.value,s))}),d(12,"span"),fe(),d(13,"svg",37),I(14,"path",38),f()()()()()()()}if(t&2){let n=e.$implicit,r=e.$index,i,o;_("formGroupName",r),p(4),Lc(" ",(i=n.get("nombre"))==null?null:i.value," ",(i=n.get("topping"))!=null&&i.value?(i=n.get("cantidadTopping"))==null?null:i.value:""," "),p(5),Z((o=n.get("unidades"))==null?null:o.value)}}function rG(t,e){if(t&1){let n=ie();d(0,"tr",28)(1,"th",29)(2,"span",30)(3,"button",31),L("click",function(){let o=Q(n).$index,s=E(2);return Y(s.removerIngrediente(!0,o))}),f(),m(4),f()(),d(5,"td")(6,"div",32),I(7,"input",33),d(8,"span",34),m(9),f(),d(10,"span",39)(11,"button",40),L("click",function(){let i=Q(n),o=i.$implicit,s=i.$index,a=E(2);return Y(a.moverIngBase(o.value,s))}),fe(),d(12,"svg",41),I(13,"path",42),f()()()()()()}if(t&2){let n=e.$implicit,r=e.$index,i,o,s;_("formGroupName",r),p(4),O(" ",(i=n.get("nombre"))==null?null:i.value," "),p(3),J("is-invalid",(n==null||(o=n.get("cantidad"))==null?null:o.touched)&&(n==null||(o=n.get("cantidad"))==null?null:o.invalid)),p(2),Z((s=n.get("unidades"))==null?null:s.value)}}function iG(t,e){if(t&1){let n=ie();d(0,"div",18)(1,"div",19)(2,"div",20)(3,"table",21)(4,"thead",22)(5,"tr")(6,"th",23),m(7,"Ingredientes Base"),f(),d(8,"th",23),m(9,"Unidades por producto"),f()()(),d(10,"tbody",24),at(11,nG,15,4,"tr",28,AN),f()()(),d(13,"div",20)(14,"table",21)(15,"thead",22)(16,"tr")(17,"th",23),m(18,"Ingredientes Agregables"),f(),d(19,"th",23),m(20,"Maximo No. Unidades"),f()()(),d(21,"tbody",25),at(22,rG,14,5,"tr",28,AN),f()()()()(),I(24,"hr",26),d(25,"button",27),L("click",function(){Q(n);let i=E();return Y(i.adminIngredientes(!1))}),m(26," Administrar Productos "),f()}if(t&2){let n=E();p(3),_("formGroup",n.form),p(8),ct(n.ingredientesBase.controls),p(3),_("formGroup",n.form),p(8),ct(n.ingredientesAgregables.controls)}}function oG(t,e){if(t&1&&(d(0,"app-form-input",46),I(1,"input",47),d(2,"label",48),m(3," Nombre"),f()()),t&2){let n=e.f;_("control",n.nombre),p(),J("is-invalid",n.nombre.touched&&n.nombre.invalid)}}function sG(t,e){if(t&1&&(d(0,"div",49)(1,"app-form-input",46),I(2,"input",50),d(3,"label",51),m(4,"Descuento"),f()()(),d(5,"div",49)(6,"app-form-input",46)(7,"span",52),m(8,"$"),f(),I(9,"input",53),d(10,"label",54),m(11,"Precio"),f()()()),t&2){let n=e.f;p(),_("control",n.descuento),p(),J("is-invalid",n.descuento.touched&&n.descuento.invalid),p(4),_("control",n.precio),p(3),J("is-invalid",n.precio.touched&&n.precio.invalid)}}function aG(t,e){if(t&1&&(d(0,"div",49)(1,"app-form-input",46)(2,"select",55)(3,"option",56),m(4),$(5,"uppercase"),f(),d(6,"option",56),m(7),$(8,"uppercase"),f()(),d(9,"label",57),m(10,"Es Jarabe ?"),f()()(),d(11,"div",49)(12,"app-form-input",46),I(13,"input",58),d(14,"label",59),m(15,"Cantidad Por Receta"),f()()()),t&2){let n=e.f;p(),_("control",n.esJarabe),p(),J("is-invalid",n.esJarabe.touched&&n.esJarabe.invalid),p(),_("value",!0),p(),Z(W(5,10,"si")),p(2),_("value",!1),p(),Z(W(8,12,"no")),p(5),_("control",n.cantidadPorReceta),p(),J("is-invalid",n.cantidadPorReceta.touched&&n.cantidadPorReceta.invalid)}}function cG(t,e){if(t&1&&(d(0,"app-form-input",46),I(1,"textarea",60),d(2,"label",61),m(3,"Receta"),f()()),t&2){let n=e.f;_("control",n.receta),p(),J("is-invalid",n.receta.touched&&n.receta.invalid)}}function lG(t,e){if(t&1){let n=ie();d(0,"app-form",43),L("formValue",function(i){Q(n);let o=E();return Y(o.crear(i))}),F(1,oG,4,3,"ng-template",null,44,Ue)(3,sG,12,6,"ng-template",null,44,Ue)(5,aG,16,14,"ng-template",null,44,Ue)(7,cG,4,3,"ng-template",null,44,Ue),d(9,"span"),m(10),f(),d(11,"button",45),L("click",function(){Q(n);let i=E();return Y(i.eliminar())}),m(12,"Eliminar"),f(),d(13,"button",27),L("click",function(){Q(n);let i=E();return Y(i.adminIngredientes(!0))}),m(14," Administrar Ingredientes "),f()()}if(t&2){let n=E();_("form",n.form)("soloLectura",n.cargando),p(10),Z(n.nuevoProducto?"Crear":"Actualizar"),p(),_("disabled",n.nuevoProducto)}}function uG(t,e){if(t&1&&(d(0,"div",62),fe(),d(1,"svg",63),I(2,"path",64),f(),De(),d(3,"span"),m(4),f(),I(5,"button",65),f()),t&2){let n=E();_("ngClass",n.alertColor?"alert-success":"alert-danger"),p(4),O(" ",n.message," ")}}var dG=(t,e)=>({"col-5":t,"col-3":e}),hG=(t,e)=>({"col-7":t,"col-9":e}),xN=(()=>{let e=class e{constructor(r,i,o){this.fb=r,this.pService=i,this.ingredientes=o,this.productoSub$=new le(T([])),this.ingredientesProdutcto$=this.productoSub$.asObservable().pipe(V(s=>s)),this.error=void 0,this.message=void 0,this.nuevoProducto=!1,this.ingrediente=!1,this.cargando=!1,this.alertColor=!0,this.esJarabe=!1,this.form=this.fb.group({receta:["",[N.required,N.maxLength(500)]],nombre:["",[N.required,N.maxLength(50)]],descuento:[0,[N.required,N.min(0),N.max(100),N.pattern(/^[0-9]+(.[0-9]{0,1})?$/)]],precio:[0,[N.required,N.min(0),N.max(200),N.pattern(/^[0-9]+(.[0-9]{0,1})?$/)]],esJarabe:[!1,N.required],cantidadPorReceta:[0,[N.required,N.min(1)]],ingredientesAgregables:this.fb.array([]),ingredientesBase:this.fb.array([])}),this.ingJoinProd$=this.ingredientes.obtenerIngredientesMap$.pipe(S(console.log),V(s=>this.pService.obtenerProductos().pipe(H(1),_t(),S(a=>a.ingredientesBase?.map(c=>Object.assign(c,s.get(c.id??"")))),S(a=>a.ingredientesAgregables?.map(c=>Object.assign(c,s.get(c.id??"")))),Pn()))).pipe(ke(s=>(this.error="Error de Conexi\xF3n, Intente recargar",[]))),this.ingJoinJarabe$=this.ingredientes.obtenerIngredientesMap$.pipe(V(s=>this.pService.obtenerJarabes().pipe(H(1),_t(),S(a=>a.ingredientesBase?.map(c=>Object.assign(c,s.get(c.id??"")))),S(a=>a.ingredientesAgregables?.map(c=>Object.assign(c,s.get(c.id??"")))),Pn()))).pipe(ke(s=>(this.error="Error de Conexi\xF3n, Intente recargar",[])))}ngOnInit(){this.productoSub$.next(this.ingJoinProd$)}get ingredientesAgregables(){return this.form.get("ingredientesAgregables")}get ingredientesBase(){return this.form.get("ingredientesBase")}crearIngredienteForm(r,i,o,s){return this.fb.group({id:[r],nombre:[i],cantidad:[s??0,[N.min(0),N.pattern(/^[0-9]*$/)]],unidades:[o]})}removerIngrediente(r,i){r?this.ingredientesBase.removeAt(i):this.ingredientesAgregables.removeAt(i)}moverIngAgregables(r,i){this.ingredientesAgregables.value.findIndex(s=>s.id==r.id)==-1&&(i&&this.removerIngrediente(!0,i),this.ingredientesAgregables.push(this.crearIngredienteForm(r.id??"",r.nombre??"",r.unidadConsumo??"")))}moverIngBase(r,i){this.ingredientesBase.value.findIndex(s=>s.id==r.id)==-1&&(i&&this.removerIngrediente(!1,i),this.ingredientesBase.push(this.crearIngredienteForm(r.id??"",r.nombre??"",r.unidadConsumo??"")))}productoSeleccionado(r){if(this.ingrediente)this.moverIngBase(r);else{let i=r;this.producto=i,this.nuevoProducto=!1,this.message=void 0,console.log(i),this.form.patchValue(i),this.ingredientesAgregables.controls=[],this.ingredientesBase.controls=[],i.ingredientesBase?.forEach(o=>{o.id!=i.id&&this.ingredientesBase.push(this.crearIngredienteForm(o.id,o.nombre,o.unidadConsumo,o.cantidad))}),i.ingredientesAgregables?.forEach(o=>{this.ingredientesAgregables.push(this.crearIngredienteForm(o.id,o.nombre,o.unidadConsumo,o.cantidad))})}}eliminar(){this.producto&&(this.cargando=!0,this.producto.esJarabe?(console.log(this.producto.id),this.pService.eliminarProducto(this.producto.id??"",!0).pipe(V(()=>this.ingredientes.eliminarIngrediente(this.producto?.id??""))).subscribe({complete:()=>{this.message="El Jarabe fue Eliminado",this.alertColor=!0,this.reset(),this.cargando=!1},error:r=>{this.cargando=!1,this.alertColor=!1,this.message=r.message?r.message:"Error de conexion. Intente de nuevo"}})):this.pService.eliminarProducto(this.producto.id??"").subscribe({complete:()=>{this.message="El producto fue Eliminado",this.alertColor=!0,this.reset(),this.cargando=!1},error:r=>{this.cargando=!1,this.alertColor=!1,this.message=r.message?r.message:"Error de conexion. Intente de nuevo"}}))}crearProducto(){this.reset(),this.nuevoProducto=!0}adminIngredientes(r){this.ingrediente=r,this.ingrediente?this.productoSub$.next(this.ingredientes.obtenerIngredientes()):this.esJarabe?this.productoSub$.next(this.ingJoinJarabe$):this.productoSub$.next(this.ingJoinProd$)}reset(){this.nuevoProducto=!1,this.producto=void 0,this.form.reset(),this.ingredientesAgregables.controls=[],this.ingredientesBase.controls=[]}adminJarabes(r){this.esJarabe=r,r?this.productoSub$.next(this.ingJoinJarabe$):this.productoSub$.next(this.ingJoinProd$)}crear(r){if(this.cargando=!0,r.ingredientesAgregables=r.ingredientesAgregables?.map(i=>({id:i.id,cantidad:i.cantidad})),r.ingredientesBase=r.ingredientesBase?.map(i=>({id:i.id,cantidad:i.cantidad})),this.producto)Object.assign(this.producto,r),r.esJarabe?this.pService.actualizarJarabe(this.producto).subscribe({complete:()=>{this.message="El producto fue Actualizado",this.alertColor=!0,this.reset(),this.cargando=!1},error:()=>{this.cargando=!1,this.alertColor=!1,this.message="Error de conexion. Intente de nuevo"}}):(r.cantidadPorReceta=0,this.pService.actualizarProducto(this.producto).subscribe({complete:()=>{this.message="El producto fue Actualizado",this.alertColor=!0,this.reset(),this.cargando=!1},error:()=>{this.cargando=!1,this.alertColor=!1,this.message="Error de conexion. Intente de nuevo"}}));else if(r.esJarabe=r.esJarabe=="true",r.esJarabe){let i={nombre:r.nombre,unidadConsumo:"mililitros",unidadInsumo:"litros",ingredienteA\u00F1adible:!1,topping:!1};this.pService.crearJarabe(r).pipe(H(1),S(o=>console.log("crear producto",o)),V(o=>this.ingredientes.crearIngrediente(i,o))).subscribe({complete:()=>{this.message="El producto fue Creado",this.alertColor=!0,this.reset(),this.cargando=!1},error:()=>{this.cargando=!1,this.alertColor=!1,this.message="Error de conexion. Intente de nuevo"}})}else r.cantidadPorReceta=0,this.pService.crearProducto(r).subscribe({complete:()=>{this.message="El producto fue Creado",this.alertColor=!0,this.reset(),this.cargando=!1},error:()=>{this.cargando=!1,this.alertColor=!1,this.message="Error de conexion. Intente de nuevo"}})}};e.\u0275fac=function(i){return new(i||e)(b(Ye),b(Gn),b(en))},e.\u0275cmp=se({type:e,selectors:[["app-productos"]],standalone:!0,features:[ae],decls:24,vars:15,consts:[[1,"mt-3","container-fluid"],[1,"text-muted"],[1,"position-fixed","me-5","mb-5",2,"bottom","5rem","right","7rem"],[1,"z-3","btn","btn-lg","bg-primary","float-end","position-absolute","float-end","rounded-circle",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","2rem","height","3rem","fill","white","viewBox","0 0 16 16",1,"bi","bi-plus"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"],[1,"row"],[1,"form-check","form-switch","mb-1"],["type","checkbox","role","switch","id","flexSwitchCheckDefault",1,"form-check-input",3,"change"],["jarabe",""],["for","flexSwitchCheckDefault",1,"form-check-label"],[3,"ngClass"],["key","nombre",3,"data"],[3,"formGroup"],[3,"form","soloLectura"],["class","alert alert-dismissible d-flex align-items-center fade show","role","alert",3,"ngClass"],["key","nombre",3,"data","elementoActivado"],["for","",1,""],[1,"container-fluid"],[1,"row","g-0"],[1,"col","overflow-auto",2,"height","30vw"],[1,"table",3,"formGroup"],[1,"sticky-top","table-secondary"],["scope","col"],["formArrayName","ingredientesBase"],["formArrayName","ingredientesAgregables"],[1,"w-75"],["type","button",1,"btn","btn-secondary","ms-2","mt-2",3,"click"],[3,"formGroupName"],["scope","row",1,"align-middle"],[1,"align-middle"],["type","button","aria-label","Close",1,"btn-close","align-middle",3,"click"],[1,"input-group","input-group-sm"],["formControlName","cantidad","type","number","aria-label","Sizing example input","aria-describedby","inputGroup-sizing-sm","placeholder","",1,"form-control"],[1,"input-group-text"],[1,"input-group-append"],["aria-label","Right",1,"btn","btn-sm","btn-outline-secondary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-right"],["fill-rule","evenodd","d","M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"],[1,""],["type","button","aria-label","Left",1,"align-middle","btn","btn-sm","btn-outline-secondary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-left"],["fill-rule","evenodd","d","M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"],[3,"form","soloLectura","formValue"],["inputTpt",""],["type","button",1,"btn","btn-danger","ms-2","mt-2",3,"disabled","click"],[3,"control"],["formControlName","nombre","id","nombre","type","text","aria-label","nombre","placeholder","Nombre",1,"form-control"],["for","nombre"],[1,"col"],["formControlName","descuento","id","descuento","type","number","placeholder","descuento",1,"form-control"],["for","descuento"],[1,"input-group-text","align-baseline"],["formControlName","precio","id","precio","aria-label","precio","type","number","placeholder","Precio",1,"form-control"],["for","precio"],["formControlName","esJarabe","id","esJarabe","aria-label","esJarabe","placeholder","esJarabe",1,"form-control"],[3,"value"],["for","esJarabe"],["formControlName","cantidadPorReceta","id","cantidadPorReceta","type","text","placeholder","cantidadPorReceta",1,"form-control"],["for","cantidadPorReceta"],["formControlName","receta","id","receta","type","text","placeholder","receta",1,"form-control",2,"height","20vh"],["for","receta"],["role","alert",1,"alert","alert-dismissible","d-flex","align-items-center","fade","show",3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-check-circle-fill","flex-shrink-0","me-2"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"]],template:function(i,o){if(i&1){let s=ie();d(0,"div",0)(1,"h2",1),m(2,"Productos"),f(),I(3,"hr"),d(4,"div",2)(5,"button",3),L("click",function(){return o.crearProducto()}),fe(),d(6,"svg",4),I(7,"path",5),f()()(),De(),d(8,"div",6)(9,"div",7)(10,"input",8,9),L("change",function(){Q(s);let c=Js(11);return Y(o.adminJarabes(c.checked))}),f(),d(12,"label",10),m(13,"Mostrar Jarabes"),f()(),d(14,"div",11),F(15,Xz,1,1,"app-typeahead",12),$(16,"async"),F(17,eG,1,0)(18,tG,3,1),f(),d(19,"div",11),F(20,iG,27,2),d(21,"form",13),F(22,lG,15,4,"app-form",14),f(),F(23,uG,6,2,"div",15),f()()()}if(i&2){let s;p(14),_("ngClass",Ai(9,dG,!(o.producto||o.nuevoProducto||o.ingrediente),!!o.producto||o.nuevoProducto||o.ingrediente)),p(),z(15,(s=W(16,7,o.ingredientesProdutcto$))?15:o.error?18:17,s),p(4),_("ngClass",Ai(12,hG,!(o.producto||o.nuevoProducto||o.ingrediente),!!o.producto||o.nuevoProducto||o.ingrediente)),p(),z(20,o.ingrediente?20:-1),p(),_("formGroup",o.form),p(),z(22,(o.producto||o.nuevoProducto)&&!o.ingrediente?22:-1),p(),z(23,o.message?23:-1)}},dependencies:[Je,et,no,ro,We,qt,jr,Xe,Ke,Qe,st,Vr,Lr,gt,mt,ze,Ut,Ri,Mi,Xt]});let t=e;return t})();var fG=()=>["ingredientes"],pG=()=>["productos"],mG=()=>["eventos"],gG=()=>["franquicias"],vG=()=>["almacen"],yG=()=>["balances"],RN=(()=>{let e=class e{constructor(r){this.auth=r,this.sesionIniciada$=this.auth.sesionIniciada$,this.isAdmin$=this.auth.esAdmin$,this.franquicia$=this.auth.franquicia$}cerrarSession(){this.auth.cerrarSesion()}};e.\u0275fac=function(i){return new(i||e)(b(tn))},e.\u0275cmp=se({type:e,selectors:[["app-admin-navbar"]],standalone:!0,features:[ae],decls:40,vars:30,consts:[[1,"navbar","navbar-expand-lg","bg-light"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["src","assets/icons/icon-72x72.png","alt","Logo","width","30","height","24",1,"d-inline-block","align-text-top"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],["routerLinkActive","eventos",1,"nav-link",3,"routerLink"],["routerLinkActive","franquicias",1,"nav-link",3,"routerLink"],["routerLinkActive","almacen",1,"nav-link",3,"routerLink"],["routerLinkActive","balances",1,"nav-link",3,"routerLink"],[1,"d-flex","float-end"],[1,"navbar-nav"],[1,"nav-link",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-box-arrow-right"],["fill-rule","evenodd","d","M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0z"],["fill-rule","evenodd","d","M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708z"]],template:function(i,o){i&1&&(d(0,"nav",0)(1,"div",1)(2,"a",2),I(3,"img",3),m(4," CAFE "),f(),d(5,"button",4),I(6,"span",5),f(),d(7,"div",6)(8,"ul",7)(9,"li",8)(10,"a",9),m(11),$(12,"uppercase"),f()(),d(13,"li",8)(14,"a",9),m(15),$(16,"uppercase"),f()(),d(17,"li",8)(18,"a",10),m(19),$(20,"uppercase"),f()(),d(21,"li",8)(22,"a",11),m(23),$(24,"uppercase"),f()(),d(25,"li",8)(26,"a",12),m(27),$(28,"uppercase"),f()(),d(29,"li",8)(30,"a",13),m(31),$(32,"uppercase"),f()()(),d(33,"div",14)(34,"ul",15)(35,"li",8)(36,"a",16),L("click",function(){return o.cerrarSession()}),fe(),d(37,"svg",17),I(38,"path",18)(39,"path",19),f()()()()()()()()),i&2&&(p(10),_("routerLink",it(24,fG)),p(),O(" ",W(12,12,"ingredientes"),""),p(3),_("routerLink",it(25,pG)),p(),O(" ",W(16,14,"productos"),""),p(3),_("routerLink",it(26,mG)),p(),Z(W(20,16,"combos")),p(3),_("routerLink",it(27,gG)),p(),Z(W(24,18,"franquicias")),p(3),_("routerLink",it(28,vG)),p(),Z(W(28,20,"almacen")),p(3),_("routerLink",it(29,yG)),p(),Z(W(32,22,"registro balances")))},dependencies:[Un,Mi]});let t=e;return t})();var MN=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=se({type:e,selectors:[["app-admin-home"]],standalone:!0,features:[ae],decls:2,vars:0,template:function(i,o){i&1&&I(0,"app-admin-navbar")(1,"router-outlet")},dependencies:[Oo,RN]});let t=e;return t})();var _G=(t,e)=>e.value;function IG(t,e){t&1&&(d(0,"div",28),fe(),d(1,"svg",29),I(2,"path",30),f(),De(),d(3,"span"),m(4),f(),I(5,"button",31),f()),t&2&&(p(4),O(" ","Orden Invalida"," "))}var wG=()=>["../preparacion"];function EG(t,e){if(t&1){let n=ie();d(0,"div",32),fe(),d(1,"svg",33),I(2,"path",34),f(),De(),d(3,"span"),m(4),f(),I(5,"button",31)(6,"hr",35),d(7,"button",36),L("click",function(){Q(n);let i=E();return Y(i.crearOrden())}),m(8,"Continuar"),f()()}t&2&&(p(4),O(" ","Desea continuar?"," "),p(3),_("routerLink",it(2,wG)))}function bG(t,e){if(t&1){let n=ie();d(0,"app-typeahead",37),L("elementoActivado",function(i){Q(n);let o=E();return Y(o.productoSeleccionado(i))}),f()}if(t&2){let n=E();_("data",n.productosEnCaja)}}function CG(t,e){t&1&&(d(0,"label",38),m(1," Error Inesperado. Intente Regresar a caja y volver aqui... "),f())}function TG(t,e){if(t&1){let n=ie();d(0,"tr")(1,"th",39)(2,"button",40),L("click",function(){let o=Q(n).$index,s=E();return Y(s.removerTopping(o))}),f()(),d(3,"th",39)(4,"span",1),m(5),f()(),d(6,"td")(7,"div",41),I(8,"input",42)(9,"label",43),f()(),d(10,"td")(11,"div",41)(12,"span",44),m(13,"/"),f(),d(14,"span",44),m(15),f()()(),d(16,"td")(17,"div",41)(18,"span",45),m(19),f()()(),d(20,"td")(21,"div",41)(22,"span",45),m(23),$(24,"currency"),f()()()()}if(t&2){let n=e.$implicit,r,i,o,s,a,c;p(2),_("disabled",((r=n.get("costo"))==null?null:r.value)==0),p(3),O(" ",(i=n.get("nombre"))==null?null:i.value," "),p(3),J("is-invalid",((o=n.get("cantidad"))==null?null:o.touched)&&((o=n.get("cantidad"))==null?null:o.invalid)),_("formControl",n.get("cantidad")),p(7),Z((s=n.get("max"))==null?null:s.value),p(4),Lc("",(a=n.get("unidades"))==null?null:a.value," - ",(a=n.get("topping"))!=null&&a.value?"( "+((a=n.get("cantidadTopping"))==null?null:a.value)+" "+n.get("unidades")+")":"",""),p(4),Z(Pt(24,9,(c=n.get("costo"))==null?null:c.value,"MXN","symbol-narrow","2.2-2"))}}function DG(t,e){if(t&1){let n=ie();d(0,"app-typeahead",37),L("elementoActivado",function(i){Q(n);let o=E(2);return Y(o.toppingSeleccionado(i))}),f()}if(t&2){let n=E(2);_("data",n.toppings)}}function SG(t,e){t&1&&(d(0,"label",38),m(1," No hay toppings registrados ... "),f())}function AG(t,e){t&1&&(d(0,"label",38),m(1," Error Inesperado. Intente Regresar a caja y volver aqui... "),f())}function xG(t,e){if(t&1&&(fe(),De(),d(0,"div",46),F(1,DG,1,1,"app-typeahead",13)(2,SG,2,0)(3,AG,2,0),f()),t&2){let n=E();p(),z(1,n.toppings&&n.toppings.length!==0?1:n.toppings.length==0?2:3)}}var RG=(t,e)=>({"col-9":t,"col-7":e}),NN=(()=>{let e=class e{constructor(r,i,o){this.fb=r,this.caja=i,this.ingredientes=o,this.productoSub$=new le(T([])),this.productos$=this.productoSub$.asObservable().pipe(V(s=>s)),this.onDestroy$=new Pe,this.productosEnCaja=[],this.indiceProductoSeleccionado=0,this.ordenId="",this.ordenTotal=0,this.esTopping=!1,this.toppings=[],this.form=this.fb.group({ingredientesAgregablesProductos:this.fb.array([],N.required)})}getIngredientesAgregables(r){return this.ingredientesAgregablesProductos.at(r)}get ingredientesAgregablesProductos(){return this.form.get("ingredientesAgregablesProductos")}ngOnInit(){this.ordenTotal=this.caja.ordenVenta.total??0,this.ingredientes.obtenerIngredientesMap$.pipe(H(1),V(()=>this.ingredientes.obtenerIngredientes().pipe(H(1)))).subscribe(r=>{this.toppings=r.filter(i=>i.topping),console.log(this.toppings)}),this.productosEnCaja=this.caja.productosEnCaja.map((r,i)=>{let o=A({},r);return o.idCaja=""+i,o}),this.initForm()}adminTopping(r){this.esTopping=r}crearIngredienteAgregable(r){var i=this.fb.group({id:[r.id],topping:[!!r.topping],cantidadTopping:[r.topping?r.cantidadTopping:0],nombre:[r.nombre],cantidad:[0,[N.required,N.min(0),N.max(r.topping?5:r.cantidad),N.pattern(/^[0-9]*$/)]],max:[r.topping?5:r.cantidad],unidades:[r.topping?"extras":r.unidades],costo:[r.topping?r.precioTopping:0]});return r.topping&&i.get("cantidad")?.valueChanges.pipe(ir(this.onDestroy$),bn(0),dd(),S(([o,s])=>{o&&(this.ordenTotal-=o*r.precioTopping),s&&(this.ordenTotal+=s*r.precioTopping)})).subscribe(),i}initForm(){this.productosEnCaja.forEach(r=>{let i=this.fb.array([]);r.ingredientesAgregables?.forEach(o=>{i.push(this.crearIngredienteAgregable(Object.assign(o,this.ingredientes.ingredientesMap$.getValue().get(o.id??""))))}),this.ingredientesAgregablesProductos.push(i)})}toppingSeleccionado(r){this.getIngredientesAgregables(this.indiceProductoSeleccionado).push(this.crearIngredienteAgregable(r))}removerTopping(r){let i=this.getIngredientesAgregables(this.indiceProductoSeleccionado).at(r);var o=i.get("costo")?.value??10,s=i.get("canitdad")?.value??0;this.ordenTotal-=o*s,this.getIngredientesAgregables(this.indiceProductoSeleccionado).removeAt(r)}productoSeleccionado(r){let i=r;this.indiceProductoSeleccionado=this.productosEnCaja.findIndex(o=>o.idCaja===i.idCaja)}actualizarIngredientes(r,i){r.forEach((o,s)=>{o.topping&&(o.cantidad*=o.cantidadTopping),this.caja.setIngrediente=o,this.caja.validezOrdenSub$.getValue()||(this.caja.validezOrdenSub$.next(!0),this.getIngredientesAgregables(i).at(s).get("cantidad")?.setErrors({max:!0}))})}crearOrden(){if(!this.form.invalid&&(this.ingredientesAgregablesProductos.value.forEach((r,i)=>this.actualizarIngredientes(r,i)),this.form.invalid)){alert("Ingredientes Insuficientes");return}}ngOnDestroy(){this.onDestroy$.next(!0),this.onDestroy$.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)(b(Ye),b(oo),b(en))},e.\u0275cmp=se({type:e,selectors:[["app-preparacion-productos"]],standalone:!0,features:[ae],decls:52,vars:15,consts:[["id","ingredientes",1,"mt-3","container-fluid"],[1,"text-muted"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],["modal",""],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],["class","mb-0 alert alert-danger alert-dismissible  align-items-center fade show","role","alert"],[1,"row"],[1,"col-3"],[1,"form-check","form-switch","mb-1"],["type","checkbox","role","switch","id","flexSwitchCheckDefault",1,"form-check-input",3,"change"],["topping",""],["for","flexSwitchCheckDefault",1,"form-check-label"],["key","nombre",3,"data"],[3,"ngClass"],[1,"container-fluid"],[1,"overflow-auto",2,"height","35vw","width","100%"],[1,"table",3,"formGroup"],[1,"sticky-top","table-secondary"],["scope","col"],[1,"table-group-divider"],[1,"table-group-divider","sticky-bottom","table-secondary","overflow-hidden"],["colspan","5"],["data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn","btn-outline-success","float-end","mt-3","me-3"],["xmlns","http://www.w3.org/2000/svg","width","2rem","height","2rem","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-right"],["fill-rule","evenodd","d","M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"],["class","col-2"],[3,"OrdenId"],["role","alert",1,"mb-0","alert","alert-danger","alert-dismissible","align-items-center","fade","show"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-exclamation-triangle-fill","flex-shrink-0","me-2"],["d","M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["role","alert",1,"mb-0","alert","alert-primary","alert-dismissible","align-items-center","fade","show"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-info-circle-fill","flex-shrink-0","me-2"],["d","M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2"],[1,"mt-2"],["data-bs-dismiss","modal",1,"btn","btn-success",3,"routerLink","click"],["key","nombre",3,"data","elementoActivado"],["for","",1,""],[1,"align-middle"],["type","button","aria-label","Close",1,"btn-close","align-middle",2,"width","10%",3,"disabled","click"],[1,"input-group","input-group-sm"],["type","number","aria-label","Small","aria-describedby","cantidad ingrediente",1,"form-control",3,"formControl"],["for",""],[1,"input-group-text"],["id","inputGroup-sizing-sm",1,"input-group-text"],[1,"col-2"]],template:function(i,o){if(i&1){let s=ie();d(0,"div",0)(1,"h2",1),m(2,"Caja (Preparado)"),f(),I(3,"hr"),d(4,"div",2,3)(6,"div",4)(7,"div",5),F(8,IG,6,1,"div",6)(9,EG,9,3),f()()(),d(10,"div",7)(11,"div",8)(12,"div",9)(13,"input",10,11),L("change",function(){Q(s);let c=Js(14);return Y(o.adminTopping(c.checked))}),f(),d(15,"label",12),m(16,"Mostrar Toppings"),f()(),F(17,bG,1,1,"app-typeahead",13)(18,CG,2,0),f(),d(19,"div",14)(20,"div",15)(21,"div",16)(22,"table",17)(23,"thead",18)(24,"tr")(25,"th",19),m(26,"#"),f(),d(27,"th",19),m(28,"Ingrediente"),f(),d(29,"th",19),m(30,"Cantidad"),f(),d(31,"th",19),m(32,"Max"),f(),d(33,"th",19),m(34,"Unidades"),f(),d(35,"th",19),m(36,"Costo"),f()()(),d(37,"tbody",20),at(38,TG,25,14,"tr",null,_G),f(),d(40,"tfoot",21)(41,"tr")(42,"th",22),m(43," Total "),f(),d(44,"th"),m(45),$(46,"currency"),f()()()()(),d(47,"button",23),fe(),d(48,"svg",24),I(49,"path",25),f()()()(),F(50,xG,4,1,"div",26),f()(),De(),I(51,"app-imprimir",27)}if(i&2){let s;p(8),z(8,o.form.invalid?8:9),p(9),z(17,o.productosEnCaja&&o.productosEnCaja.length!==0?17:18),p(2),_("ngClass",Ai(12,RG,!o.esTopping,o.esTopping)),p(3),_("formGroup",o.form),p(16),ct((s=o.ingredientesAgregablesProductos.at(o.indiceProductoSeleccionado))==null?null:s.controls),p(7),O(" ",Pt(46,7,o.ordenTotal,"MXN","symbol-narrow","3.2-2")," "),p(5),z(50,o.esTopping?50:-1),p(),_("OrdenId",o.ordenId)}},dependencies:[Je,We,qt,Xe,Ke,DE,Qe,mt,Un,oc,Ni,Ut,Ri],styles:["@media print{#ingredientes[_ngcontent-%COMP%]{display:none}}"]});let t=e;return t})();function MG(t,e){if(t&1){let n=ie();d(0,"app-typeahead",8),L("elementoActivado",function(i){Q(n);let o=E();return Y(o.inventarioSeleccionado(i))}),f()}t&2&&_("data",e)}function NG(t,e){t&1&&(d(0,"p",9),m(1,"Error de Conexion. Intente recargar ..."),f())}function PG(t,e){if(t&1&&(d(0,"app-form-input",12),I(1,"input",13),d(2,"label",14),m(3," Nombre"),f()()),t&2){let n=e.f;_("control",n.nombre),p(),J("is-invalid",n.nombre.touched&&n.nombre.invalid)}}function kG(t,e){if(t&1&&(d(0,"div",15)(1,"app-form-input",12),I(2,"input",16),d(3,"small",17),m(4),f(),d(5,"label",18),m(6,"Min Resurtir"),f()()(),d(7,"div",15)(8,"app-form-input",12),I(9,"input",19),d(10,"label",20),m(11,"Min Permitible"),f(),d(12,"small",17),m(13),f()()()),t&2){let n=e.f,r=E(2);p(),_("control",n.minResurtir),p(),J("is-invalid",n.minResurtir.touched&&n.minResurtir.invalid),p(2),Z(r.inventario==null?null:r.inventario.unidad),p(4),_("control",n.minPermitible),p(),J("is-invalid",n.minPermitible.touched&&n.minPermitible.invalid),p(4),Z(r.inventario==null?null:r.inventario.unidad)}}function OG(t,e){if(t&1){let n=ie();d(0,"form",6)(1,"app-form",10),L("formValue",function(i){Q(n);let o=E();return Y(o.crear(i))}),F(2,PG,4,3,"ng-template",null,11,Ue)(4,kG,14,8,"ng-template",null,11,Ue),d(6,"span"),m(7,"Actualizar"),f()()()}if(t&2){let n=E();_("formGroup",n.form),p(),_("soloLectura",n.cargando)("form",n.form)}}function FG(t,e){if(t&1&&(d(0,"div",21),fe(),d(1,"svg",22),I(2,"path",23),f(),De(),d(3,"span"),m(4),f(),I(5,"button",24),f()),t&2){let n=E();p(4),O(" ",n.message," ")}}var PN=(()=>{let e=class e{constructor(r,i){this.inventarios=r,this.fb=i,this.id="",this.inventario=void 0,this.inventarios$=T([]),this.form=this.fb.group({nombre:[{value:"",disabled:!0},[N.required]],minResurtir:[0,[N.required,N.min(1)]],minPermitible:[0,[N.required,N.min(1)]]}),this.message=void 0,this.cargando=!1}ngOnInit(){this.inventarios.setFranquiciaId=this.id,this.inventarios$=this.inventarios.inventarioConIngredientes$}inventarioSeleccionado(r){this.inventario=r,this.message=void 0,this.form.patchValue(r)}crear(r){if(!(this.inventario&&this.inventario.disponible!=null)||this.cargando)return;this.cargando=!0;let i={id:this.inventario.id,disponible:this.inventario.disponible,minPermitible:r.minPermitible??this.inventario.minPermitible,minResurtir:r.minResurtir??this.inventario.minResurtir,resurtir:this.inventario.resurtir};this.inventarios.actualizarInventario(i,this.id).subscribe({complete:()=>{this.message="El insumo fue Actualizado",this.inventario=void 0,this.cargando=!1},error:()=>{this.cargando=!1,this.message="Error de conexion. Intente de nuevo"}})}};e.\u0275fac=function(i){return new(i||e)(b(Ur),b(Ye))},e.\u0275cmp=se({type:e,selectors:[["app-insumos-opciones"]],inputs:{id:"id"},standalone:!0,features:[ae],decls:12,vars:5,consts:[[1,"mt-3","container-fluid"],[1,"text-muted"],[1,"row"],[1,"col-5"],["key","nombre",3,"data"],[1,"col-7"],[3,"formGroup"],["class","alert alert-success alert-dismissible d-flex align-items-center fade show","role","alert"],["key","nombre",3,"data","elementoActivado"],[1,"text-muted","ms-1"],[3,"soloLectura","form","formValue"],["inputTpt",""],[3,"control"],["formControlName","nombre","id","nombre","type","text","aria-label","nombre","placeholder","Nombre",1,"form-control"],["for","nombre"],[1,"col"],["formControlName","minResurtir","id","minResurtir","type","number","min","0","placeholder","minResurtir",1,"form-control"],["spanend","",1,"mb-0","pb-0","input-group-text"],["for","minResurtir"],["formControlName","minPermitible","id","minPermitible","type","number","placeholder","minPermitible",1,"form-control"],["for","minPermitible"],["role","alert",1,"alert","alert-success","alert-dismissible","d-flex","align-items-center","fade","show"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-check-circle-fill","flex-shrink-0","me-2"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"]],template:function(i,o){if(i&1&&(d(0,"div",0)(1,"h2",1),m(2,"Insumos Opciones"),f(),I(3,"hr"),d(4,"div",2)(5,"div",3),F(6,MG,1,1,"app-typeahead",4),$(7,"async"),F(8,NG,2,0),f(),d(9,"div",5),F(10,OG,8,3,"form",6)(11,FG,6,1,"div",7),f()()()),i&2){let s;p(6),z(6,(s=W(7,3,o.inventarios$))?6:8,s),p(4),z(10,o.inventario!=null&&o.inventario.id?10:-1),p(),z(11,o.message?11:-1)}},dependencies:[ze,mt,Xt,gt,Je,et,We,qt,Xe,Ke,hs,Qe,st]});let t=e;return t})();var kN=(t,e)=>e.id;function VG(t,e){if(t&1&&(d(0,"tr")(1,"th",11),m(2),f(),d(3,"td",12)(4,"span",13),m(5),f()(),d(6,"td",12)(7,"span",13),m(8),$(9,"currency"),f()(),d(10,"td")(11,"span",13),m(12),f()()()),t&2){let n=e.$implicit,r=e.$index,i=E();p(2),O(" ",r+1," "),p(3),O(" ",n.nombre," "),p(3),O(" ",Pt(9,4,n.cantidad,"MXN","symbol-narrow","3.2-2")," "),p(4),O(" ",i.getLocalDate(n.timestamp)," ")}}function LG(t,e){if(t&1&&(d(0,"tr")(1,"th",11),m(2),f(),d(3,"td",12)(4,"span",13),m(5),f()(),d(6,"td",12)(7,"span",13),m(8),$(9,"currency"),f()(),d(10,"td")(11,"span",13),m(12),f()()()),t&2){let n=e.$implicit,r=e.$index;p(2),O(" ",r+1," "),p(3),O(" ",n.id," "),p(3),O(" ",Pt(9,4,n.total,"MXN","symbol-narrow","3.2-2")," "),p(4),O(" ",n.timestamp," ")}}function jG(t,e){if(t&1&&(d(0,"div",4)(1,"div",5)(2,"table",6)(3,"caption"),m(4,"Lista de Ingresos"),f(),d(5,"thead",7)(6,"tr")(7,"th",8),m(8,"#"),f(),d(9,"th",8),m(10,"Ticket ID"),f(),d(11,"th",8),m(12,"Ingreso"),f(),d(13,"th",8),m(14,"Estampilla"),f()()(),Qs(15),d(16,"tbody",9),at(17,LG,13,9,"tr",null,kN),$(19,"async"),f(),Ys(),f()()()),t&2){let n=E();p(17),ct(W(19,0,n.egresos$))}}var ME=(()=>{let e=class e{constructor(r){this.balance=r,this.id=""}getLocalDate(r){var i=r.toDate();return i.toLocaleString()}ngOnInit(){this.balance.setFranquiciaId=this.id,this.balances$=this.balance.obtenerRegistrosBalances(),this.egresos$=this.balance.obtenerRegistrosEgresos()}};e.\u0275fac=function(i){return new(i||e)(b(ic))},e.\u0275cmp=se({type:e,selectors:[["app-balance"]],inputs:{id:"id"},standalone:!0,features:[ae],decls:27,vars:5,consts:[[1,"mt-3","container-fluid"],[1,"d-inline"],[1,"text-muted"],[1,"row","g-0"],[1,"col"],[1,"overflow-auto",2,"height","40vw","width","100%"],[1,"table","caption-top"],[1,"sticky-top","table-secondary"],["scope","col"],[1,"table-group-divider"],["class","col"],["scope","row",1,"align-middle"],[1,"align-middle"],[1,"text-muted","align-middle"]],template:function(i,o){i&1&&(d(0,"div",0)(1,"div",1)(2,"h2",2),m(3,"Registro Ingresos y Egresos"),f()(),I(4,"hr"),d(5,"div",3)(6,"div",4)(7,"div",5)(8,"table",6)(9,"caption"),m(10),f(),d(11,"thead",7)(12,"tr")(13,"th",8),m(14,"#"),f(),d(15,"th",8),m(16,"Nombre"),f(),d(17,"th",8),m(18),f(),d(19,"th",8),m(20,"Estampilla"),f()()(),Qs(21),d(22,"tbody",9),at(23,VG,13,9,"tr",null,kN),$(25,"async"),f(),Ys(),f()()(),F(26,jG,20,2,"div",10),f()()),i&2&&(p(10),O("Lista de ",o.id?"Egresos":"Transacciones",""),p(8),Z(o.id?"Egresos":"Transacciones"),p(5),ct(W(25,3,o.balances$)),p(3),z(26,o.id?26:-1))},dependencies:[ze,Ni]});let t=e;return t})();function UG(t,e){if(t&1){let n=ie();d(0,"app-typeahead",8),L("elementoActivado",function(i){Q(n);let o=E();return Y(o.productoSeleccionado(i))}),f()}t&2&&_("data",e)}function $G(t,e){if(t&1&&(d(0,"p",9),m(1),f()),t&2){let n=E();p(),Z(n.error)}}function BG(t,e){if(t&1&&(d(0,"app-form-input",12),I(1,"input",13),d(2,"label",14),m(3," Nombre"),f()()),t&2){let n=e.f;_("control",n.nombre),p(),J("is-invalid",n.nombre.touched&&n.nombre.invalid)}}function qG(t,e){if(t&1&&(d(0,"app-form-input",12),I(1,"input",15),d(2,"p",16),m(3,"mililitros"),f(),d(4,"label",17),m(5,"Insumo"),f()()),t&2){let n=e.f;_("control",n.cantidadAProducir),p(),J("is-invalid",n.cantidadAProducir.touched&&n.cantidadAProducir.invalid)}}function zG(t,e){if(t&1){let n=ie();d(0,"form",6)(1,"app-form",10),L("formValue",function(i){Q(n);let o=E();return Y(o.crear(i))}),F(2,BG,4,3,"ng-template",null,11,Ue)(4,qG,6,3,"ng-template",null,11,Ue),d(6,"span"),m(7,"Actualizar"),f()()()}if(t&2){let n=E();_("formGroup",n.form),p(),_("soloLectura",!1)("form",n.form)}}function GG(t,e){if(t&1&&(d(0,"div",18),fe(),d(1,"svg",19),I(2,"path",20),f(),De(),d(3,"span"),m(4),f(),I(5,"button",21),f()),t&2){let n=E();p(4),O(" ",n.message," ")}}var ON=(()=>{let e=class e{constructor(r,i,o){this.fb=r,this.pService=i,this.caja=o,this.id="",this.productosEnCaja=[],this.loadingDisable=!1,this.message=void 0,this.form=this.fb.group({nombre:[0,[N.required,N.min(0)]],cantidadAProducir:[0,[N.required,N.min(0)]]}),this.jarabe=void 0,this.error=void 0}ngOnInit(){this.caja.setFranquiciaId=this.id,this.caja.resetearHashmapIngredientes(),this.productos$=this.pService.obtenerJarabes().pipe(mc(this.caja.initInventarios$),ke(r=>(this.error="Error de Conexi\xF3n, Intente Recargar",[])))}get formStatus$(){return this.caja.validezOrden$.pipe(P(r=>r&&!this.form.invalid))}get total(){return this.form.get("total")}productoSeleccionado(r){console.log(r),this.form.patchValue(r),this.jarabe=r}limpiarValidacionActualizarForm(){this.form.clearValidators(),this.form.updateValueAndValidity()}crear(r){if(!this.jarabe?.cantidadPorReceta)return;if(this.jarabe.cantidadPorReceta>r.cantidadAProducir){alert("La cantidad a producir debe ser mayor que el minimo por receta y preferiblemente un multiplo de esta");return}let i=r.cantidadAProducir/this.jarabe.cantidadPorReceta;if(console.log(i),this.jarabe.ingredientesBase?.forEach(s=>s.cantidad=(s.cantidad??0)*i),this.caja.setHashMapIngredientes(this.jarabe.ingredientesBase??[]),!this.caja.validezOrdenSub$.getValue()){this.form.get("cantidadAProducir")?.setErrors({required:!0}),this.caja.validezOrdenSub$.next(!0);return}this.caja.inventarioLotes$(!0).subscribe({complete:()=>{this.message="El insumo fue Actualizado",this.loadingDisable=!1,this.jarabe=void 0,this.form.reset(),this.caja.resetearHashmapIngredientes()},error:()=>{this.loadingDisable=!1,this.message="Error de conexion. Intente de nuevo",this.caja.resetearHashmapIngredientes()}})}};e.\u0275fac=function(i){return new(i||e)(b(Ye),b(Gn),b(oo))},e.\u0275cmp=se({type:e,selectors:[["app-produccion"]],inputs:{id:"id"},standalone:!0,features:[ae],decls:12,vars:5,consts:[[1,"mt-3","container-fluid"],[1,"text-muted"],[1,"row"],[1,"col-5"],["key","nombre",3,"data"],[1,"col-7"],[3,"formGroup"],["class","alert alert-success alert-dismissible d-flex align-items-center fade show","role","alert"],["key","nombre",3,"data","elementoActivado"],[1,"text-muted","ms-1"],[3,"soloLectura","form","formValue"],["inputTpt",""],[3,"control"],["formControlName","nombre","id","nombre","type","text","aria-label","nombre","placeholder","Nombre",1,"form-control"],["for","nombre"],["formControlName","cantidadAProducir","id","cantidadAProducir","type","number","min","0","placeholder","cantidadAProducir",1,"form-control"],["spanend","",1,"mb-0","pb-0","input-group-text"],["for","cantidadAProducir"],["role","alert",1,"alert","alert-success","alert-dismissible","d-flex","align-items-center","fade","show"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-check-circle-fill","flex-shrink-0","me-2"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"]],template:function(i,o){if(i&1&&(d(0,"div",0)(1,"h2",1),m(2,"Captura Produccion de Jarabes"),f(),I(3,"hr"),d(4,"div",2)(5,"div",3),F(6,UG,1,1,"app-typeahead",4),$(7,"async"),F(8,$G,2,1),f(),d(9,"div",5),F(10,zG,8,3,"form",6)(11,GG,6,1,"div",7),f()()()),i&2){let s;p(6),z(6,(s=W(7,3,o.productos$))?6:o.error?-1:8,s),p(4),z(10,o.jarabe?10:-1),p(),z(11,o.message?11:-1)}},dependencies:[Je,et,We,qt,Xe,Ke,hs,Qe,st,mt,ze,Ut,gt,Xt]});let t=e;return t})();var FN=(()=>{let e=class e{constructor(r){this.crud=r,this.franquiciaId="",this.ruta="/ordenes"}set setFranquiciaId(r){this.franquiciaId=r}obtenerOrdenes(){return console.log(this.franquiciaId),this.crud.setRuta(this.ruta,this.franquiciaId).obtenerTodos()}crearOrden(r,i){return console.log(r,i),this.crud.setRuta(this.ruta,this.franquiciaId).crear(r,i,this.franquiciaId)}};e.\u0275fac=function(i){return new(i||e)(x(tt))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function WG(t,e){if(t&1){let n=ie();d(0,"app-typeahead",12),L("elementoActivado",function(i){Q(n);let o=E();return Y(o.productoSeleccionado(i))}),f()}t&2&&_("data",e)}function KG(t,e){t&1&&m(0," Cargando ... ")}function QG(t,e){if(t&1&&(d(0,"label",13),m(1),I(2,"hr"),f()),t&2){let n=E();p(),O(" ",n.error," ... ")}}var YG=(t,e)=>e.value;function JG(t,e){if(t&1){let n=ie();d(0,"tr",22)(1,"th",23)(2,"span",24)(3,"button",25),L("click",function(){let o=Q(n).$index,s=E(2);return Y(s.removerIngrediente(!0,o))}),f(),m(4),f()(),d(5,"td")(6,"div",26),I(7,"input",27),d(8,"span",28),m(9),f()()()()}if(t&2){let n=e.$implicit,r=e.$index,i,o,s;_("formGroupName",r),p(4),O(" ",(i=n.get("nombre"))==null?null:i.value," "),p(3),J("is-invalid",(n==null||(o=n.get("cantidad"))==null?null:o.touched)&&(n==null||(o=n.get("cantidad"))==null?null:o.invalid)),p(2),Z((s=n.get("unidades"))==null?null:s.value)}}function ZG(t,e){if(t&1){let n=ie();d(0,"div",14)(1,"div",15)(2,"table",16)(3,"thead",17)(4,"tr")(5,"th",18),m(6,"Ingredientes Agregables"),f(),d(7,"th",18),m(8,"Maximo No. Unidades"),f()()(),d(9,"tbody",19),at(10,JG,10,5,"tr",22,YG),f()()()(),I(12,"hr",20),d(13,"button",21),L("click",function(){Q(n);let i=E();return Y(i.adminIngredientes(!1))}),m(14," Administrar Productos "),f()}if(t&2){let n=E();p(2),_("formGroup",n.form),p(8),ct(n.ingredientes.controls)}}function XG(t,e){if(t&1&&(d(0,"app-form-input",33),I(1,"input",34),d(2,"label",35),m(3," Nombre"),f()()),t&2){let n=e.f;_("control",n.nombre),p(),J("is-invalid",n.nombre.touched&&n.nombre.invalid)}}function eH(t,e){if(t&1&&(d(0,"div",36)(1,"app-form-input",33),I(2,"input",37),d(3,"label",38),m(4,"Fecha de Emision"),f()()(),d(5,"div",36)(6,"app-form-input",33),I(7,"input",39),d(8,"label",40),m(9,"Estatus"),f()()()),t&2){let n=e.f;p(),_("control",n.fecha_emision),p(),J("is-invalid",n.fecha_emision.touched&&n.fecha_emision.invalid),p(4),_("control",n.estatus),p(),J("is-invalid",n.estatus.touched&&n.estatus.invalid)}}function tH(t,e){if(t&1){let n=ie();d(0,"app-form",29),L("formValue",function(i){Q(n);let o=E();return Y(o.crear(i))}),F(1,XG,4,3,"ng-template",null,30,Ue)(3,eH,10,6,"ng-template",null,30,Ue),d(5,"span"),m(6),f(),d(7,"button",31),L("click",function(){Q(n);let i=E();return Y(i.eliminar())}),m(8),f(),d(9,"button",32),L("click",function(){Q(n);let i=E();return Y(i.adminIngredientes(!0))}),m(10," Administrar Ingredientes "),f()()}if(t&2){let n=E();_("form",n.form)("soloLectura",n.cargando),p(6),Z(n.nuevoProducto?"Crear":"Actualizar"),p(),_("disabled",n.nuevoProducto||(n.order==null?null:n.order.estatus)!="espera"&&n.entregar||(n.order==null?null:n.order.estatus)!="en_progreso"&&!n.entregar),p(),O(" ",n.entregar?"Enviar":"Recibir",""),p(),_("disabled",n.entregar||n.order!=null&&n.order.estatus!="espera")}}function nH(t,e){if(t&1&&(d(0,"div",41),fe(),d(1,"svg",42),I(2,"path",43),f(),De(),d(3,"span"),m(4),f(),I(5,"button",44),f()),t&2){let n=E();_("ngClass",n.alertColor?"alert-success":"alert-danger"),p(4),O(" ",n.message," ")}}var rH=(t,e)=>({"col-5":t,"col-3":e}),iH=(t,e)=>({"col-7":t,"col-9":e}),VN=function(t){return t[t.kilos=1e3]="kilos",t[t.litros=1e3]="litros",t[t.piezas=1]="piezas",t[t.docenas=12]="docenas",t}(VN||{}),gm=(()=>{let e=class e{constructor(r,i,o,s){this.inventarios=r,this.balance=i,this.orders=o,this.fb=s,this.id="",this.productoSub$=new le(T([])),this.ingredientesProdutcto$=this.productoSub$.asObservable().pipe(V(a=>a)),this.error=void 0,this.message=void 0,this.nuevoProducto=!1,this.ingrediente=!1,this.cargando=!1,this.alertColor=!0,this.esJarabe=!1,this.entregar=!1,this.form=this.fb.group({nombre:["",[N.required,N.maxLength(50)]],fecha_emision:[this.formatDate(new Date),[N.required,N.maxLength(50)]],estatus:[{value:"espera",disabled:!0},[N.required]],ingredientes:this.fb.array([],N.required)})}ngOnInit(){var r=this.id.split("_");console.log(r),r.length>1&&(this.id=r[0],this.entregar=!0),this.orders.franquiciaId=this.id,this.inventarios.setFranquiciaId=this.id,this.productoSub$.next(this.orders.obtenerOrdenes())}get ingredientes(){return this.form.get("ingredientes")}formatDate(r){let i=r.getFullYear(),o=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0");return`${i}-${o}-${s}`}crearIngredienteForm({id:r,nombre:i,unidadInsumo:o,cantidad:s}){return this.fb.group({id:[r],nombre:[i],cantidad:[s??0,[N.min(1),N.pattern(/^[0-9]*$/)]],unidades:[o]})}removerIngrediente(r,i){this.ingredientes.removeAt(i)}productoSeleccionado(r){if(this.ingrediente){var i=r;if(this.ingredientes.controls.findIndex(o=>o.get("id")?.value==i.id)!=-1)return;this.ingredientes.push(this.crearIngredienteForm(A({cantidad:0},i)))}else{let o=r;this.order=o,this.nuevoProducto=!1,this.message=void 0,console.log(o),this.form.patchValue(o),this.ingredientes.controls=[],this.ingredientes.controls=o.ingredientes?.map(s=>this.crearIngredienteForm(s))??[]}}marcarSalida(){if(this.order?.id){var o=this.order,{id:r}=o,i=Vt(o,["id"]);i.estatus="en_progreso",this.orders.crearOrden(i,r).subscribe({complete:()=>{this.message="Orden Creada",this.reset()},error:()=>{this.message="Error de conexion. Intente de nuevo"}})}}eliminar(){if(this.order?.id){if(this.entregar){this.marcarSalida();return}this.productoSub$.next(this.inventarios.inventarioConIngredientes$);var o=this.order,{id:r}=o,i=Vt(o,["id"]);i.estatus="entregada",this.orders.crearOrden(i,r).pipe(V(()=>te(this.order?.ingredientes??[]).pipe(xe(s=>this.productoSub$.getValue().pipe(V(a=>{let u=a.find(h=>h.id==s.id),{disponible:c}=u,l=Vt(u,["disponible"]);return console.log(l,r,c),l?this.inventarios.actualizarInventario(A({disponible:c+s.cantidad},l),this.id):T(null)}))))),ke(s=>(console.error("Error updating inventory:",s),T(null)))).subscribe({complete:()=>{this.productoSub$.next(this.orders.obtenerOrdenes()),this.message="Orden Entregada",this.reset()},error:()=>{this.message="Error de conexion. Intente de nuevo"}})}}crearProducto(){this.reset(),this.nuevoProducto=!0}adminIngredientes(r){this.ingrediente=r,this.ingrediente?this.productoSub$.next(this.inventarios.inventarioConIngredientes$):this.productoSub$.next(this.orders.obtenerOrdenes())}reset(){this.nuevoProducto=!1,this.order=void 0,this.form.reset(),this.ingredientes.controls=[]}crear(r){if(!(!this.nuevoProducto&&!this.order?.id)){if(this.order!=null&&this.order.estatus!="espera"){alert("Esta orden ya fue procesada. No es posible modificar");return}r.estatus="espera",r.ingredientes?.forEach(i=>i.cantidad=i.cantidad*VN[i.unidades]),this.orders.crearOrden(r,this.order?.id).subscribe({complete:()=>{this.message="Orden Creada",this.reset()},error:()=>{this.message="Error de conexion. Intente de nuevo"}})}}actualizarInventario(r){}};e.\u0275fac=function(i){return new(i||e)(b(Ur),b(ic),b(FN),b(Ye))},e.\u0275cmp=se({type:e,selectors:[["app-surtir"]],inputs:{id:"id"},standalone:!0,features:[ae],decls:19,vars:15,consts:[[1,"mt-3","container-fluid"],[1,"text-muted"],[1,"position-fixed","me-5","mb-5",2,"bottom","5rem","right","7rem"],[1,"z-3","btn","btn-lg","bg-primary","float-end","position-absolute","float-end","rounded-circle",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","2rem","height","3rem","fill","white","viewBox","0 0 16 16",1,"bi","bi-plus"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"],[1,"row"],[3,"ngClass"],["key","nombre",3,"data"],[3,"formGroup"],[3,"form","soloLectura"],["class","alert alert-dismissible d-flex align-items-center fade show","role","alert",3,"ngClass"],["key","nombre",3,"data","elementoActivado"],["for","",1,""],[1,"container-fluid"],[1,"overflow-auto",2,"height","30vw"],[1,"table",3,"formGroup"],[1,"sticky-top","table-secondary"],["scope","col"],["formArrayName","ingredientes"],[1,"w-75"],["type","button",1,"btn","btn-secondary","ms-2","mt-2",3,"click"],[3,"formGroupName"],["scope","row",1,"align-middle"],[1,"align-middle"],["type","button","aria-label","Close",1,"btn-close","align-middle",3,"click"],[1,"input-group","input-group-sm"],["formControlName","cantidad","type","number","aria-label","Sizing example input","aria-describedby","inputGroup-sizing-sm","placeholder","",1,"form-control"],[1,"input-group-text"],[3,"form","soloLectura","formValue"],["inputTpt",""],["type","button",1,"btn","btn-danger","ms-2","mt-2",3,"disabled","click"],["type","button",1,"btn","btn-secondary","ms-2","mt-2",3,"disabled","click"],[3,"control"],["formControlName","nombre","id","nombre","type","text","aria-label","nombre","placeholder","Nombre",1,"form-control"],["for","nombre"],[1,"col"],["formControlName","fecha_emision","id","fecha_emision","type","date","placeholder","fecha_emision",1,"form-control"],["for","fecha_emision"],["formControlName","estatus","id","estatus","type","text","placeholder","estatus",1,"form-control"],["for","estatus"],["role","alert",1,"alert","alert-dismissible","d-flex","align-items-center","fade","show",3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-check-circle-fill","flex-shrink-0","me-2"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"]],template:function(i,o){if(i&1&&(I(0,"div",0),d(1,"h2",1),m(2,"Ordenes Generadas"),f(),I(3,"hr"),d(4,"div",2)(5,"button",3),L("click",function(){return o.crearProducto()}),fe(),d(6,"svg",4),I(7,"path",5),f()()(),De(),d(8,"div",6)(9,"div",7),F(10,WG,1,1,"app-typeahead",8),$(11,"async"),F(12,KG,1,0)(13,QG,3,1),f(),d(14,"div",7),F(15,ZG,15,1),d(16,"form",9),F(17,tH,11,6,"app-form",10),f(),F(18,nH,6,2,"div",11),f()()),i&2){let s;p(9),_("ngClass",Ai(9,rH,!(o.order||o.nuevoProducto||o.ingrediente),!!o.order||o.nuevoProducto||o.ingrediente)),p(),z(10,(s=W(11,7,o.ingredientesProdutcto$))?10:o.error?13:12,s),p(4),_("ngClass",Ai(12,iH,!(o.order||o.nuevoProducto||o.ingrediente),!!o.order||o.nuevoProducto||o.ingrediente)),p(),z(15,o.ingrediente?15:-1),p(),_("formGroup",o.form),p(),z(17,(o.order||o.nuevoProducto)&&!o.ingrediente?17:-1),p(),z(18,o.message?18:-1)}},dependencies:[ze,mt,Ut,Ri,Xt,gt,Je,et,We,qt,Xe,Ke,Qe,st,Vr,Lr]});let t=e;return t})();var LN=[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",component:wN},{path:"admin",component:MN,children:[{path:"",pathMatch:"full",redirectTo:"franquicias"},{path:"franquicias",component:bN,canActivate:[so]},{path:"balances",component:ME,canActivate:[so]},{path:"almacen",component:gm,canActivate:[so]},{path:"ingredientes",component:SN,canActivate:[so]},{path:"productos",component:xN,canActivate:[so]},{path:"eventos",component:gN,canActivate:[so]}]},{path:"franquicias/:id",component:DN,canActivateChild:[CN],children:[{path:"",pathMatch:"full",redirectTo:"ventas"},{path:"surtir",component:gm,canActivate:[so]},{path:"usuarios",component:IN,canActivate:[ps]},{path:"inventarios",component:yN,canActivate:[ps]},{path:"insumos",component:gm,canActivate:[ps]},{path:"insumosOpciones",component:PN,canActivate:[ps]},{path:"balances",component:ME,canActivate:[ps]},{path:"produccion",component:ON,canActivate:[ps]},{path:"ventas",component:mN},{path:"preparacion",component:NN},{path:"recetas",component:_N},{path:"imprimir",component:oc}]},{path:"**",pathMatch:"full",redirectTo:"admin"}];var Nu="Service workers are disabled or not supported by this browser";function oH(t){return fo(()=>zt(new Error(t)))}var cc=class{constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=oH(Nu);else{let r=zr(e,"controllerchange").pipe(P(()=>e.controller)),i=fo(()=>T(e.controller)),o=rr(i,r);this.worker=o.pipe(je(u=>!!u)),this.registration=this.worker.pipe(V(()=>e.getRegistration()));let l=zr(e,"message").pipe(P(u=>u.data)).pipe(je(u=>u&&u.type)).pipe(Om());l.connect(),this.events=l}}postMessage(e,n){return this.worker.pipe(H(1),S(r=>{r.postMessage(A({action:e},n))})).toPromise().then(()=>{})}postMessageWithOperation(e,n,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,n);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let n;return typeof e=="string"?n=r=>r.type===e:n=r=>e.includes(r.type),this.events.pipe(je(n))}nextEventOfType(e){return this.eventsOfType(e).pipe(H(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(je(n=>n.nonce===e),H(1),P(n=>{if(n.result!==void 0)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},sH=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(r){if(this.sw=r,this.pushManager=null,this.subscriptionChanges=new Pe,!r.isEnabled){this.messages=mo,this.notificationClicks=mo,this.subscription=mo;return}this.messages=this.sw.eventsOfType("PUSH").pipe(P(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(P(o=>o.data)),this.pushManager=this.sw.registration.pipe(P(o=>o.pushManager));let i=this.pushManager.pipe(V(o=>o.getSubscription()));this.subscription=Ts(i,this.subscriptionChanges)}requestSubscription(r){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Nu));let i={userVisibleOnly:!0},o=this.decodeBase64(r.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(o.length));for(let a=0;a<o.length;a++)s[a]=o.charCodeAt(a);return i.applicationServerKey=s,this.pushManager.pipe(V(a=>a.subscribe(i)),H(1)).toPromise().then(a=>(this.subscriptionChanges.next(a),a))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Nu));let r=i=>{if(i===null)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(o=>{if(!o)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(H(1),V(r)).toPromise()}decodeBase64(r){return atob(r)}};e.\u0275fac=function(i){return new(i||e)(x(cc))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),aH=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(r){if(this.sw=r,!r.isEnabled){this.versionUpdates=mo,this.unrecoverable=mo;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Nu));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:r},r)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Nu));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:r},r)}};e.\u0275fac=function(i){return new(i||e)(x(cc))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})();var jN=new K("NGSW_REGISTER_SCRIPT");function cH(t,e,n,r){return()=>{if(!(bh(r)&&"serviceWorker"in navigator&&n.enabled!==!1))return;navigator.serviceWorker.addEventListener("controllerchange",()=>{navigator.serviceWorker.controller!==null&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})});let i;if(typeof n.registrationStrategy=="function")i=n.registrationStrategy();else{let[s,...a]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=T(null);break;case"registerWithDelay":i=UN(+a[0]||0);break;case"registerWhenStable":i=a[0]?Ts($N(t),UN(+a[0])):$N(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}t.get(Re).runOutsideAngular(()=>i.pipe(H(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(s=>console.error("Service worker registration failed with:",s))))}}function UN(t){return T(null).pipe(Ds(t))}function $N(t){return t.get(xi).isStable.pipe(je(n=>n))}function lH(t,e){return new cc(bh(e)&&t.enabled!==!1?navigator.serviceWorker:void 0)}var Mu=class{};function BN(t,e={}){return Ti([sH,aH,{provide:jN,useValue:t},{provide:Mu,useValue:e},{provide:cc,useFactory:lH,deps:[Mu,dn]},{provide:Xs,useFactory:cH,deps:[Dt,jN,Mu,dn],multi:!0}])}var uH={apiKey:"AIzaSyDCyZIHdlBrxc7_7ZPgIYRz_U45y_Q1rDc",authDomain:"shopcaferesp.firebaseapp.com",projectId:"shopcaferesp",storageBucket:"shopcaferesp.appspot.com",messagingSenderId:"871789942990",appId:"1:871789942990:web:4030dad53a0d85c94e989f"},qN={providers:[tt,KD(LN,ey(),XD({paramsInheritanceStrategy:"always"})),JT(),BN("ngsw-worker.js",{enabled:!ST(),registrationStrategy:"registerWhenStable:30000"}),v0([DS(()=>SS(uH,"primaria")),PM(()=>OM(Cy("primaria"),{})),vA(()=>Ea(Cy("primaria")))])]};var zN=(()=>{let e=class e{constructor(){this.title="shopCafe"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=se({type:e,selectors:[["app-root"]],standalone:!0,features:[ae],decls:1,vars:0,template:function(i,o){i&1&&I(0,"router-outlet")},dependencies:[Oo]});let t=e;return t})();oD(zN,qN).catch(t=>console.error(t));
